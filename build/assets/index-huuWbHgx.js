function xm(n,r){for(var s=0;s<r.length;s++){const a=r[s];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in n)){const c=Object.getOwnPropertyDescriptor(a,u);c&&Object.defineProperty(n,u,c.get?c:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();function wm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ml={exports:{}},Rs={},gl={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd;function _m(){if(zd)return pe;zd=1;var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=_&&N[_]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,P={};function T(N,I,ue){this.props=N,this.context=I,this.refs=P,this.updater=ue||b}T.prototype.isReactComponent={},T.prototype.setState=function(N,I){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,I,"setState")},T.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function D(){}D.prototype=T.prototype;function U(N,I,ue){this.props=N,this.context=I,this.refs=P,this.updater=ue||b}var A=U.prototype=new D;A.constructor=U,S(A,T.prototype),A.isPureReactComponent=!0;var q=Array.isArray,oe=Object.prototype.hasOwnProperty,ee={current:null},ce={key:!0,ref:!0,__self:!0,__source:!0};function ve(N,I,ue){var de,he={},le=null,ge=null;if(I!=null)for(de in I.ref!==void 0&&(ge=I.ref),I.key!==void 0&&(le=""+I.key),I)oe.call(I,de)&&!ce.hasOwnProperty(de)&&(he[de]=I[de]);var ye=arguments.length-2;if(ye===1)he.children=ue;else if(1<ye){for(var Ee=Array(ye),Xe=0;Xe<ye;Xe++)Ee[Xe]=arguments[Xe+2];he.children=Ee}if(N&&N.defaultProps)for(de in ye=N.defaultProps,ye)he[de]===void 0&&(he[de]=ye[de]);return{$$typeof:n,type:N,key:le,ref:ge,props:he,_owner:ee.current}}function Se(N,I){return{$$typeof:n,type:N.type,key:I,ref:N.ref,props:N.props,_owner:N._owner}}function Be(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Q(N){var I={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ue){return I[ue]})}var be=/\/+/g;function Ce(N,I){return typeof N=="object"&&N!==null&&N.key!=null?Q(""+N.key):I.toString(36)}function te(N,I,ue,de,he){var le=typeof N;(le==="undefined"||le==="boolean")&&(N=null);var ge=!1;if(N===null)ge=!0;else switch(le){case"string":case"number":ge=!0;break;case"object":switch(N.$$typeof){case n:case r:ge=!0}}if(ge)return ge=N,he=he(ge),N=de===""?"."+Ce(ge,0):de,q(he)?(ue="",N!=null&&(ue=N.replace(be,"$&/")+"/"),te(he,I,ue,"",function(Xe){return Xe})):he!=null&&(Be(he)&&(he=Se(he,ue+(!he.key||ge&&ge.key===he.key?"":(""+he.key).replace(be,"$&/")+"/")+N)),I.push(he)),1;if(ge=0,de=de===""?".":de+":",q(N))for(var ye=0;ye<N.length;ye++){le=N[ye];var Ee=de+Ce(le,ye);ge+=te(le,I,ue,Ee,he)}else if(Ee=y(N),typeof Ee=="function")for(N=Ee.call(N),ye=0;!(le=N.next()).done;)le=le.value,Ee=de+Ce(le,ye++),ge+=te(le,I,ue,Ee,he);else if(le==="object")throw I=String(N),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ge}function Ne(N,I,ue){if(N==null)return N;var de=[],he=0;return te(N,de,"","",function(le){return I.call(ue,le,he++)}),de}function De(N){if(N._status===-1){var I=N._result;I=I(),I.then(function(ue){(N._status===0||N._status===-1)&&(N._status=1,N._result=ue)},function(ue){(N._status===0||N._status===-1)&&(N._status=2,N._result=ue)}),N._status===-1&&(N._status=0,N._result=I)}if(N._status===1)return N._result.default;throw N._result}var ke={current:null},F={transition:null},Z={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:F,ReactCurrentOwner:ee};function W(){throw Error("act(...) is not supported in production builds of React.")}return pe.Children={map:Ne,forEach:function(N,I,ue){Ne(N,function(){I.apply(this,arguments)},ue)},count:function(N){var I=0;return Ne(N,function(){I++}),I},toArray:function(N){return Ne(N,function(I){return I})||[]},only:function(N){if(!Be(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},pe.Component=T,pe.Fragment=s,pe.Profiler=u,pe.PureComponent=U,pe.StrictMode=a,pe.Suspense=m,pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,pe.act=W,pe.cloneElement=function(N,I,ue){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var de=S({},N.props),he=N.key,le=N.ref,ge=N._owner;if(I!=null){if(I.ref!==void 0&&(le=I.ref,ge=ee.current),I.key!==void 0&&(he=""+I.key),N.type&&N.type.defaultProps)var ye=N.type.defaultProps;for(Ee in I)oe.call(I,Ee)&&!ce.hasOwnProperty(Ee)&&(de[Ee]=I[Ee]===void 0&&ye!==void 0?ye[Ee]:I[Ee])}var Ee=arguments.length-2;if(Ee===1)de.children=ue;else if(1<Ee){ye=Array(Ee);for(var Xe=0;Xe<Ee;Xe++)ye[Xe]=arguments[Xe+2];de.children=ye}return{$$typeof:n,type:N.type,key:he,ref:le,props:de,_owner:ge}},pe.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},pe.createElement=ve,pe.createFactory=function(N){var I=ve.bind(null,N);return I.type=N,I},pe.createRef=function(){return{current:null}},pe.forwardRef=function(N){return{$$typeof:p,render:N}},pe.isValidElement=Be,pe.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:De}},pe.memo=function(N,I){return{$$typeof:v,type:N,compare:I===void 0?null:I}},pe.startTransition=function(N){var I=F.transition;F.transition={};try{N()}finally{F.transition=I}},pe.unstable_act=W,pe.useCallback=function(N,I){return ke.current.useCallback(N,I)},pe.useContext=function(N){return ke.current.useContext(N)},pe.useDebugValue=function(){},pe.useDeferredValue=function(N){return ke.current.useDeferredValue(N)},pe.useEffect=function(N,I){return ke.current.useEffect(N,I)},pe.useId=function(){return ke.current.useId()},pe.useImperativeHandle=function(N,I,ue){return ke.current.useImperativeHandle(N,I,ue)},pe.useInsertionEffect=function(N,I){return ke.current.useInsertionEffect(N,I)},pe.useLayoutEffect=function(N,I){return ke.current.useLayoutEffect(N,I)},pe.useMemo=function(N,I){return ke.current.useMemo(N,I)},pe.useReducer=function(N,I,ue){return ke.current.useReducer(N,I,ue)},pe.useRef=function(N){return ke.current.useRef(N)},pe.useState=function(N){return ke.current.useState(N)},pe.useSyncExternalStore=function(N,I,ue){return ke.current.useSyncExternalStore(N,I,ue)},pe.useTransition=function(){return ke.current.useTransition()},pe.version="18.3.1",pe}var qd;function Jl(){return qd||(qd=1,gl.exports=_m()),gl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd;function bm(){if(Vd)return Rs;Vd=1;var n=Jl(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var x,_={},y=null,b=null;v!==void 0&&(y=""+v),m.key!==void 0&&(y=""+m.key),m.ref!==void 0&&(b=m.ref);for(x in m)a.call(m,x)&&!c.hasOwnProperty(x)&&(_[x]=m[x]);if(p&&p.defaultProps)for(x in m=p.defaultProps,m)_[x]===void 0&&(_[x]=m[x]);return{$$typeof:r,type:p,key:y,ref:b,props:_,_owner:u.current}}return Rs.Fragment=s,Rs.jsx=h,Rs.jsxs=h,Rs}var Wd;function km(){return Wd||(Wd=1,ml.exports=bm()),ml.exports}var l=km(),sa={},vl={exports:{}},yt={},yl={exports:{}},xl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd;function jm(){return Hd||(Hd=1,(function(n){function r(F,Z){var W=F.length;F.push(Z);e:for(;0<W;){var N=W-1>>>1,I=F[N];if(0<u(I,Z))F[N]=Z,F[W]=I,W=N;else break e}}function s(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var Z=F[0],W=F.pop();if(W!==Z){F[0]=W;e:for(var N=0,I=F.length,ue=I>>>1;N<ue;){var de=2*(N+1)-1,he=F[de],le=de+1,ge=F[le];if(0>u(he,W))le<I&&0>u(ge,he)?(F[N]=ge,F[le]=W,N=le):(F[N]=he,F[de]=W,N=de);else if(le<I&&0>u(ge,W))F[N]=ge,F[le]=W,N=le;else break e}}return Z}function u(F,Z){var W=F.sortIndex-Z.sortIndex;return W!==0?W:F.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();n.unstable_now=function(){return h.now()-p}}var m=[],v=[],x=1,_=null,y=3,b=!1,S=!1,P=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var Z=s(v);Z!==null;){if(Z.callback===null)a(v);else if(Z.startTime<=F)a(v),Z.sortIndex=Z.expirationTime,r(m,Z);else break;Z=s(v)}}function q(F){if(P=!1,A(F),!S)if(s(m)!==null)S=!0,De(oe);else{var Z=s(v);Z!==null&&ke(q,Z.startTime-F)}}function oe(F,Z){S=!1,P&&(P=!1,D(ve),ve=-1),b=!0;var W=y;try{for(A(Z),_=s(m);_!==null&&(!(_.expirationTime>Z)||F&&!Q());){var N=_.callback;if(typeof N=="function"){_.callback=null,y=_.priorityLevel;var I=N(_.expirationTime<=Z);Z=n.unstable_now(),typeof I=="function"?_.callback=I:_===s(m)&&a(m),A(Z)}else a(m);_=s(m)}if(_!==null)var ue=!0;else{var de=s(v);de!==null&&ke(q,de.startTime-Z),ue=!1}return ue}finally{_=null,y=W,b=!1}}var ee=!1,ce=null,ve=-1,Se=5,Be=-1;function Q(){return!(n.unstable_now()-Be<Se)}function be(){if(ce!==null){var F=n.unstable_now();Be=F;var Z=!0;try{Z=ce(!0,F)}finally{Z?Ce():(ee=!1,ce=null)}}else ee=!1}var Ce;if(typeof U=="function")Ce=function(){U(be)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Ne=te.port2;te.port1.onmessage=be,Ce=function(){Ne.postMessage(null)}}else Ce=function(){T(be,0)};function De(F){ce=F,ee||(ee=!0,Ce())}function ke(F,Z){ve=T(function(){F(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,De(oe))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return s(m)},n.unstable_next=function(F){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var W=y;y=Z;try{return F()}finally{y=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,Z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=y;y=F;try{return Z()}finally{y=W}},n.unstable_scheduleCallback=function(F,Z,W){var N=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?N+W:N):W=N,F){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=W+I,F={id:x++,callback:Z,priorityLevel:F,startTime:W,expirationTime:I,sortIndex:-1},W>N?(F.sortIndex=W,r(v,F),s(m)===null&&F===s(v)&&(P?(D(ve),ve=-1):P=!0,ke(q,W-N))):(F.sortIndex=I,r(m,F),S||b||(S=!0,De(oe))),F},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(F){var Z=y;return function(){var W=y;y=Z;try{return F.apply(this,arguments)}finally{y=W}}}})(xl)),xl}var Kd;function Sm(){return Kd||(Kd=1,yl.exports=jm()),yl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd;function Nm(){if(Gd)return yt;Gd=1;var n=Jl(),r=Sm();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function y(e){return m.call(_,e)?!0:m.call(x,e)?!1:v.test(e)?_[e]=!0:(x[e]=!0,!1)}function b(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,i,o){if(t===null||typeof t>"u"||b(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,i,o,d,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){T[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){T[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){T[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){T[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function U(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(D,U);T[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(D,U);T[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(D,U);T[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),T.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function A(e,t,i,o){var d=T.hasOwnProperty(t)?T[t]:null;(d!==null?d.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,i,d,o)&&(i=null),o||d===null?y(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,o=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),ee=Symbol.for("react.portal"),ce=Symbol.for("react.fragment"),ve=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),Be=Symbol.for("react.provider"),Q=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),F=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var W=Object.assign,N;function I(e){if(N===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return`
`+N+e}var ue=!1;function de(e,t){if(!e||ue)return"";ue=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var o=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){o=O}e.call(t.prototype)}else{try{throw Error()}catch(O){o=O}e()}}catch(O){if(O&&o&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),f=o.stack.split(`
`),g=d.length-1,w=f.length-1;1<=g&&0<=w&&d[g]!==f[w];)w--;for(;1<=g&&0<=w;g--,w--)if(d[g]!==f[w]){if(g!==1||w!==1)do if(g--,w--,0>w||d[g]!==f[w]){var k=`
`+d[g].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=g&&0<=w);break}}}finally{ue=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?I(e):""}function he(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=de(e.type,!1),e;case 11:return e=de(e.type.render,!1),e;case 1:return e=de(e.type,!0),e;default:return""}}function le(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ce:return"Fragment";case ee:return"Portal";case Se:return"Profiler";case ve:return"StrictMode";case Ce:return"Suspense";case te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q:return(e.displayName||"Context")+".Consumer";case Be:return(e._context.displayName||"Context")+".Provider";case be:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ne:return t=e.displayName||null,t!==null?t:le(e.type)||"Memo";case De:t=e._payload,e=e._init;try{return le(e(t))}catch{}}return null}function ge(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(t);case 8:return t===ve?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ye(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xe(e){var t=Ee(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(g){o=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Et(e){e._valueTracker||(e._valueTracker=Xe(e))}function nn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=Ee(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Kt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ir(e,t){var i=t.checked;return W({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function sn(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=ye(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function V(e,t){t=t.checked,t!=null&&A(e,"checked",t,!1)}function me(e,t){V(e,t);var i=ye(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dt(e,t.type,i):t.hasOwnProperty("defaultValue")&&Dt(e,t.type,ye(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lt(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Dt(e,t,i){(t!=="number"||Kt(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Ct=Array.isArray;function Ge(e,t,i,o){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&o&&(e[i].defaultSelected=!0)}else{for(i=""+ye(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Vn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return W({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gs(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(s(92));if(Ct(i)){if(1<i.length)throw Error(s(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:ye(i)}}function Js(e,t){var i=ye(t.value),o=ye(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function Wn(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var z,fe=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,o,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(z=z||document.createElement("div"),z.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=z.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _e(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(e){xt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ut[t]=ut[e]})});function Lr(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||ut.hasOwnProperty(e)&&ut[e]?(""+t).trim():t+"px"}function Qs(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,d=Lr(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,d):e[i]=d}}var jf=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Na(e,t){if(t){if(jf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Ea(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=null;function Ta(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ra=null,an=null,on=null;function iu(e){if(e=ms(e)){if(typeof Ra!="function")throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ra(e.stateNode,e.type,t))}}function au(e){an?on?on.push(e):on=[e]:an=e}function ou(){if(an){var e=an,t=on;if(on=an=null,iu(e),t)for(e=0;e<t.length;e++)iu(t[e])}}function lu(e,t){return e(t)}function uu(){}var Pa=!1;function cu(e,t,i){if(Pa)return e(t,i);Pa=!0;try{return lu(e,t,i)}finally{Pa=!1,(an!==null||on!==null)&&(uu(),ou())}}function Gn(e,t){var i=e.stateNode;if(i===null)return null;var o=xi(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Oa=!1;if(p)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{Oa=!1}function Sf(e,t,i,o,d,f,g,w,k){var O=Array.prototype.slice.call(arguments,3);try{t.apply(i,O)}catch($){this.onError($)}}var Qn=!1,Ys=null,Xs=!1,Aa=null,Nf={onError:function(e){Qn=!0,Ys=e}};function Ef(e,t,i,o,d,f,g,w,k){Qn=!1,Ys=null,Sf.apply(Nf,arguments)}function Cf(e,t,i,o,d,f,g,w,k){if(Ef.apply(this,arguments),Qn){if(Qn){var O=Ys;Qn=!1,Ys=null}else throw Error(s(198));Xs||(Xs=!0,Aa=O)}}function Dr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function du(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hu(e){if(Dr(e)!==e)throw Error(s(188))}function Tf(e){var t=e.alternate;if(!t){if(t=Dr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,o=t;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return hu(d),e;if(f===o)return hu(d),t;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=d,o=f;else{for(var g=!1,w=d.child;w;){if(w===i){g=!0,i=d,o=f;break}if(w===o){g=!0,o=d,i=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===i){g=!0,i=f,o=d;break}if(w===o){g=!0,o=f,i=d;break}w=w.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function fu(e){return e=Tf(e),e!==null?pu(e):null}function pu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pu(e);if(t!==null)return t;e=e.sibling}return null}var mu=r.unstable_scheduleCallback,gu=r.unstable_cancelCallback,Rf=r.unstable_shouldYield,Pf=r.unstable_requestPaint,Me=r.unstable_now,Of=r.unstable_getCurrentPriorityLevel,Ia=r.unstable_ImmediatePriority,vu=r.unstable_UserBlockingPriority,Zs=r.unstable_NormalPriority,Af=r.unstable_LowPriority,yu=r.unstable_IdlePriority,ei=null,Gt=null;function If(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ei,e,void 0,(e.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:$f,Lf=Math.log,Df=Math.LN2;function $f(e){return e>>>=0,e===0?32:31-(Lf(e)/Df|0)|0}var ti=64,ri=4194304;function Yn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ni(e,t){var i=e.pendingLanes;if(i===0)return 0;var o=0,d=e.suspendedLanes,f=e.pingedLanes,g=i&268435455;if(g!==0){var w=g&~d;w!==0?o=Yn(w):(f&=g,f!==0&&(o=Yn(f)))}else g=i&~d,g!==0?o=Yn(g):f!==0&&(o=Yn(f));if(o===0)return 0;if(t!==0&&t!==o&&(t&d)===0&&(d=o&-o,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((o&4)!==0&&(o|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-$t(t),d=1<<i,o|=e[i],t&=~d;return o}function Uf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bf(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-$t(f),w=1<<g,k=d[g];k===-1?((w&i)===0||(w&o)!==0)&&(d[g]=Uf(w,t)):k<=t&&(e.expiredLanes|=w),f&=~w}}function La(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xu(){var e=ti;return ti<<=1,(ti&4194240)===0&&(ti=64),e}function Da(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Xn(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$t(t),e[t]=i}function Mf(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-$t(i),f=1<<d;t[d]=0,o[d]=-1,e[d]=-1,i&=~f}}function $a(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-$t(i),d=1<<o;d&t|e[o]&t&&(e[o]|=t),i&=~d}}var je=0;function wu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var _u,Ua,bu,ku,ju,Ba=!1,si=[],cr=null,dr=null,hr=null,Zn=new Map,es=new Map,fr=[],Ff="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Su(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(t.pointerId)}}function ts(e,t,i,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},t!==null&&(t=ms(t),t!==null&&Ua(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function zf(e,t,i,o,d){switch(t){case"focusin":return cr=ts(cr,e,t,i,o,d),!0;case"dragenter":return dr=ts(dr,e,t,i,o,d),!0;case"mouseover":return hr=ts(hr,e,t,i,o,d),!0;case"pointerover":var f=d.pointerId;return Zn.set(f,ts(Zn.get(f)||null,e,t,i,o,d)),!0;case"gotpointercapture":return f=d.pointerId,es.set(f,ts(es.get(f)||null,e,t,i,o,d)),!0}return!1}function Nu(e){var t=$r(e.target);if(t!==null){var i=Dr(t);if(i!==null){if(t=i.tag,t===13){if(t=du(i),t!==null){e.blockedOn=t,ju(e.priority,function(){bu(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Ca=o,i.target.dispatchEvent(o),Ca=null}else return t=ms(i),t!==null&&Ua(t),e.blockedOn=i,!1;t.shift()}return!0}function Eu(e,t,i){ii(e)&&i.delete(t)}function qf(){Ba=!1,cr!==null&&ii(cr)&&(cr=null),dr!==null&&ii(dr)&&(dr=null),hr!==null&&ii(hr)&&(hr=null),Zn.forEach(Eu),es.forEach(Eu)}function rs(e,t){e.blockedOn===t&&(e.blockedOn=null,Ba||(Ba=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,qf)))}function ns(e){function t(d){return rs(d,e)}if(0<si.length){rs(si[0],e);for(var i=1;i<si.length;i++){var o=si[i];o.blockedOn===e&&(o.blockedOn=null)}}for(cr!==null&&rs(cr,e),dr!==null&&rs(dr,e),hr!==null&&rs(hr,e),Zn.forEach(t),es.forEach(t),i=0;i<fr.length;i++)o=fr[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<fr.length&&(i=fr[0],i.blockedOn===null);)Nu(i),i.blockedOn===null&&fr.shift()}var ln=q.ReactCurrentBatchConfig,ai=!0;function Vf(e,t,i,o){var d=je,f=ln.transition;ln.transition=null;try{je=1,Ma(e,t,i,o)}finally{je=d,ln.transition=f}}function Wf(e,t,i,o){var d=je,f=ln.transition;ln.transition=null;try{je=4,Ma(e,t,i,o)}finally{je=d,ln.transition=f}}function Ma(e,t,i,o){if(ai){var d=Fa(e,t,i,o);if(d===null)so(e,t,o,oi,i),Su(e,o);else if(zf(d,e,t,i,o))o.stopPropagation();else if(Su(e,o),t&4&&-1<Ff.indexOf(e)){for(;d!==null;){var f=ms(d);if(f!==null&&_u(f),f=Fa(e,t,i,o),f===null&&so(e,t,o,oi,i),f===d)break;d=f}d!==null&&o.stopPropagation()}else so(e,t,o,null,i)}}var oi=null;function Fa(e,t,i,o){if(oi=null,e=Ta(o),e=$r(e),e!==null)if(t=Dr(e),t===null)e=null;else if(i=t.tag,i===13){if(e=du(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return oi=e,null}function Cu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Of()){case Ia:return 1;case vu:return 4;case Zs:case Af:return 16;case yu:return 536870912;default:return 16}default:return 16}}var pr=null,za=null,li=null;function Tu(){if(li)return li;var e,t=za,i=t.length,o,d="value"in pr?pr.value:pr.textContent,f=d.length;for(e=0;e<i&&t[e]===d[e];e++);var g=i-e;for(o=1;o<=g&&t[i-o]===d[f-o];o++);return li=d.slice(e,1<o?1-o:void 0)}function ui(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function Ru(){return!1}function wt(e){function t(i,o,d,f,g){this._reactName=i,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ci:Ru,this.isPropagationStopped=Ru,this}return W(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),t}var un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=wt(un),ss=W({},un,{view:0,detail:0}),Hf=wt(ss),Va,Wa,is,di=W({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==is&&(is&&e.type==="mousemove"?(Va=e.screenX-is.screenX,Wa=e.screenY-is.screenY):Wa=Va=0,is=e),Va)},movementY:function(e){return"movementY"in e?e.movementY:Wa}}),Pu=wt(di),Kf=W({},di,{dataTransfer:0}),Gf=wt(Kf),Jf=W({},ss,{relatedTarget:0}),Ha=wt(Jf),Qf=W({},un,{animationName:0,elapsedTime:0,pseudoElement:0}),Yf=wt(Qf),Xf=W({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zf=wt(Xf),ep=W({},un,{data:0}),Ou=wt(ep),tp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=np[e])?!!t[e]:!1}function Ka(){return sp}var ip=W({},ss,{key:function(e){if(e.key){var t=tp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ui(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(e){return e.type==="keypress"?ui(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ui(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ap=wt(ip),op=W({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Au=wt(op),lp=W({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),up=wt(lp),cp=W({},un,{propertyName:0,elapsedTime:0,pseudoElement:0}),dp=wt(cp),hp=W({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fp=wt(hp),pp=[9,13,27,32],Ga=p&&"CompositionEvent"in window,as=null;p&&"documentMode"in document&&(as=document.documentMode);var mp=p&&"TextEvent"in window&&!as,Iu=p&&(!Ga||as&&8<as&&11>=as),Lu=" ",Du=!1;function $u(e,t){switch(e){case"keyup":return pp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cn=!1;function gp(e,t){switch(e){case"compositionend":return Uu(t);case"keypress":return t.which!==32?null:(Du=!0,Lu);case"textInput":return e=t.data,e===Lu&&Du?null:e;default:return null}}function vp(e,t){if(cn)return e==="compositionend"||!Ga&&$u(e,t)?(e=Tu(),li=za=pr=null,cn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iu&&t.locale!=="ko"?null:t.data;default:return null}}var yp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yp[e.type]:t==="textarea"}function Mu(e,t,i,o){au(o),t=gi(t,"onChange"),0<t.length&&(i=new qa("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var os=null,ls=null;function xp(e){sc(e,0)}function hi(e){var t=mn(e);if(nn(t))return e}function wp(e,t){if(e==="change")return t}var Fu=!1;if(p){var Ja;if(p){var Qa="oninput"in document;if(!Qa){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),Qa=typeof zu.oninput=="function"}Ja=Qa}else Ja=!1;Fu=Ja&&(!document.documentMode||9<document.documentMode)}function qu(){os&&(os.detachEvent("onpropertychange",Vu),ls=os=null)}function Vu(e){if(e.propertyName==="value"&&hi(ls)){var t=[];Mu(t,ls,e,Ta(e)),cu(xp,t)}}function _p(e,t,i){e==="focusin"?(qu(),os=t,ls=i,os.attachEvent("onpropertychange",Vu)):e==="focusout"&&qu()}function bp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hi(ls)}function kp(e,t){if(e==="click")return hi(t)}function jp(e,t){if(e==="input"||e==="change")return hi(t)}function Sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:Sp;function us(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!m.call(t,d)||!Ut(e[d],t[d]))return!1}return!0}function Wu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hu(e,t){var i=Wu(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Wu(i)}}function Ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gu(){for(var e=window,t=Kt();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Kt(e.document)}return t}function Ya(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Np(e){var t=Gu(),i=e.focusedElem,o=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&Ku(i.ownerDocument.documentElement,i)){if(o!==null&&Ya(i)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,f=Math.min(o.start,d);o=o.end===void 0?f:Math.min(o.end,d),!e.extend&&f>o&&(d=o,o=f,f=d),d=Hu(i,f);var g=Hu(i,o);d&&g&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>o?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ep=p&&"documentMode"in document&&11>=document.documentMode,dn=null,Xa=null,cs=null,Za=!1;function Ju(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Za||dn==null||dn!==Kt(o)||(o=dn,"selectionStart"in o&&Ya(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),cs&&us(cs,o)||(cs=o,o=gi(Xa,"onSelect"),0<o.length&&(t=new qa("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=dn)))}function fi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var hn={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},eo={},Qu={};p&&(Qu=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function pi(e){if(eo[e])return eo[e];if(!hn[e])return e;var t=hn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Qu)return eo[e]=t[i];return e}var Yu=pi("animationend"),Xu=pi("animationiteration"),Zu=pi("animationstart"),ec=pi("transitionend"),tc=new Map,rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(e,t){tc.set(e,t),c(t,[e])}for(var to=0;to<rc.length;to++){var ro=rc[to],Cp=ro.toLowerCase(),Tp=ro[0].toUpperCase()+ro.slice(1);mr(Cp,"on"+Tp)}mr(Yu,"onAnimationEnd"),mr(Xu,"onAnimationIteration"),mr(Zu,"onAnimationStart"),mr("dblclick","onDoubleClick"),mr("focusin","onFocus"),mr("focusout","onBlur"),mr(ec,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function nc(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,Cf(o,t,void 0,e),e.currentTarget=null}function sc(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],d=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],k=w.instance,O=w.currentTarget;if(w=w.listener,k!==f&&d.isPropagationStopped())break e;nc(d,w,O),f=k}else for(g=0;g<o.length;g++){if(w=o[g],k=w.instance,O=w.currentTarget,w=w.listener,k!==f&&d.isPropagationStopped())break e;nc(d,w,O),f=k}}}if(Xs)throw e=Aa,Xs=!1,Aa=null,e}function Pe(e,t){var i=t[co];i===void 0&&(i=t[co]=new Set);var o=e+"__bubble";i.has(o)||(ic(t,e,2,!1),i.add(o))}function no(e,t,i){var o=0;t&&(o|=4),ic(i,e,o,t)}var mi="_reactListening"+Math.random().toString(36).slice(2);function hs(e){if(!e[mi]){e[mi]=!0,a.forEach(function(i){i!=="selectionchange"&&(Rp.has(i)||no(i,!1,e),no(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mi]||(t[mi]=!0,no("selectionchange",!1,t))}}function ic(e,t,i,o){switch(Cu(t)){case 1:var d=Vf;break;case 4:d=Wf;break;default:d=Ma}i=d.bind(null,t,i,e),d=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function so(e,t,i,o,d){var f=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===d||w.nodeType===8&&w.parentNode===d)break;if(g===4)for(g=o.return;g!==null;){var k=g.tag;if((k===3||k===4)&&(k=g.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;g=g.return}for(;w!==null;){if(g=$r(w),g===null)return;if(k=g.tag,k===5||k===6){o=f=g;continue e}w=w.parentNode}}o=o.return}cu(function(){var O=f,$=Ta(i),B=[];e:{var L=tc.get(e);if(L!==void 0){var H=qa,G=e;switch(e){case"keypress":if(ui(i)===0)break e;case"keydown":case"keyup":H=ap;break;case"focusin":G="focus",H=Ha;break;case"focusout":G="blur",H=Ha;break;case"beforeblur":case"afterblur":H=Ha;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=up;break;case Yu:case Xu:case Zu:H=Yf;break;case ec:H=dp;break;case"scroll":H=Hf;break;case"wheel":H=fp;break;case"copy":case"cut":case"paste":H=Zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Au}var J=(t&4)!==0,Fe=!J&&e==="scroll",C=J?L!==null?L+"Capture":null:L;J=[];for(var j=O,R;j!==null;){R=j;var M=R.stateNode;if(R.tag===5&&M!==null&&(R=M,C!==null&&(M=Gn(j,C),M!=null&&J.push(fs(j,M,R)))),Fe)break;j=j.return}0<J.length&&(L=new H(L,G,null,i,$),B.push({event:L,listeners:J}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",L&&i!==Ca&&(G=i.relatedTarget||i.fromElement)&&($r(G)||G[er]))break e;if((H||L)&&(L=$.window===$?$:(L=$.ownerDocument)?L.defaultView||L.parentWindow:window,H?(G=i.relatedTarget||i.toElement,H=O,G=G?$r(G):null,G!==null&&(Fe=Dr(G),G!==Fe||G.tag!==5&&G.tag!==6)&&(G=null)):(H=null,G=O),H!==G)){if(J=Pu,M="onMouseLeave",C="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(J=Au,M="onPointerLeave",C="onPointerEnter",j="pointer"),Fe=H==null?L:mn(H),R=G==null?L:mn(G),L=new J(M,j+"leave",H,i,$),L.target=Fe,L.relatedTarget=R,M=null,$r($)===O&&(J=new J(C,j+"enter",G,i,$),J.target=R,J.relatedTarget=Fe,M=J),Fe=M,H&&G)t:{for(J=H,C=G,j=0,R=J;R;R=fn(R))j++;for(R=0,M=C;M;M=fn(M))R++;for(;0<j-R;)J=fn(J),j--;for(;0<R-j;)C=fn(C),R--;for(;j--;){if(J===C||C!==null&&J===C.alternate)break t;J=fn(J),C=fn(C)}J=null}else J=null;H!==null&&ac(B,L,H,J,!1),G!==null&&Fe!==null&&ac(B,Fe,G,J,!0)}}e:{if(L=O?mn(O):window,H=L.nodeName&&L.nodeName.toLowerCase(),H==="select"||H==="input"&&L.type==="file")var Y=wp;else if(Bu(L))if(Fu)Y=jp;else{Y=bp;var re=_p}else(H=L.nodeName)&&H.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(Y=kp);if(Y&&(Y=Y(e,O))){Mu(B,Y,i,$);break e}re&&re(e,L,O),e==="focusout"&&(re=L._wrapperState)&&re.controlled&&L.type==="number"&&Dt(L,"number",L.value)}switch(re=O?mn(O):window,e){case"focusin":(Bu(re)||re.contentEditable==="true")&&(dn=re,Xa=O,cs=null);break;case"focusout":cs=Xa=dn=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,Ju(B,i,$);break;case"selectionchange":if(Ep)break;case"keydown":case"keyup":Ju(B,i,$)}var ne;if(Ga)e:{switch(e){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else cn?$u(e,i)&&(ae="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ae="onCompositionStart");ae&&(Iu&&i.locale!=="ko"&&(cn||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&cn&&(ne=Tu()):(pr=$,za="value"in pr?pr.value:pr.textContent,cn=!0)),re=gi(O,ae),0<re.length&&(ae=new Ou(ae,e,null,i,$),B.push({event:ae,listeners:re}),ne?ae.data=ne:(ne=Uu(i),ne!==null&&(ae.data=ne)))),(ne=mp?gp(e,i):vp(e,i))&&(O=gi(O,"onBeforeInput"),0<O.length&&($=new Ou("onBeforeInput","beforeinput",null,i,$),B.push({event:$,listeners:O}),$.data=ne))}sc(B,t)})}function fs(e,t,i){return{instance:e,listener:t,currentTarget:i}}function gi(e,t){for(var i=t+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Gn(e,i),f!=null&&o.unshift(fs(e,f,d)),f=Gn(e,t),f!=null&&o.push(fs(e,f,d))),e=e.return}return o}function fn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ac(e,t,i,o,d){for(var f=t._reactName,g=[];i!==null&&i!==o;){var w=i,k=w.alternate,O=w.stateNode;if(k!==null&&k===o)break;w.tag===5&&O!==null&&(w=O,d?(k=Gn(i,f),k!=null&&g.unshift(fs(i,k,w))):d||(k=Gn(i,f),k!=null&&g.push(fs(i,k,w)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var Pp=/\r\n?/g,Op=/\u0000|\uFFFD/g;function oc(e){return(typeof e=="string"?e:""+e).replace(Pp,`
`).replace(Op,"")}function vi(e,t,i){if(t=oc(t),oc(e)!==t&&i)throw Error(s(425))}function yi(){}var io=null,ao=null;function oo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lo=typeof setTimeout=="function"?setTimeout:void 0,Ap=typeof clearTimeout=="function"?clearTimeout:void 0,lc=typeof Promise=="function"?Promise:void 0,Ip=typeof queueMicrotask=="function"?queueMicrotask:typeof lc<"u"?function(e){return lc.resolve(null).then(e).catch(Lp)}:lo;function Lp(e){setTimeout(function(){throw e})}function uo(e,t){var i=t,o=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(o===0){e.removeChild(d),ns(t);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=d}while(i);ns(t)}function gr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var pn=Math.random().toString(36).slice(2),Jt="__reactFiber$"+pn,ps="__reactProps$"+pn,er="__reactContainer$"+pn,co="__reactEvents$"+pn,Dp="__reactListeners$"+pn,$p="__reactHandles$"+pn;function $r(e){var t=e[Jt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[er]||i[Jt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=uc(e);e!==null;){if(i=e[Jt])return i;e=uc(e)}return t}e=i,i=e.parentNode}return null}function ms(e){return e=e[Jt]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function xi(e){return e[ps]||null}var ho=[],gn=-1;function vr(e){return{current:e}}function Oe(e){0>gn||(e.current=ho[gn],ho[gn]=null,gn--)}function Te(e,t){gn++,ho[gn]=e.current,e.current=t}var yr={},st=vr(yr),ft=vr(!1),Ur=yr;function vn(e,t){var i=e.type.contextTypes;if(!i)return yr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in i)d[f]=t[f];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function pt(e){return e=e.childContextTypes,e!=null}function wi(){Oe(ft),Oe(st)}function cc(e,t,i){if(st.current!==yr)throw Error(s(168));Te(st,t),Te(ft,i)}function dc(e,t,i){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var d in o)if(!(d in t))throw Error(s(108,ge(e)||"Unknown",d));return W({},i,o)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yr,Ur=st.current,Te(st,e),Te(ft,ft.current),!0}function hc(e,t,i){var o=e.stateNode;if(!o)throw Error(s(169));i?(e=dc(e,t,Ur),o.__reactInternalMemoizedMergedChildContext=e,Oe(ft),Oe(st),Te(st,e)):Oe(ft),Te(ft,i)}var tr=null,bi=!1,fo=!1;function fc(e){tr===null?tr=[e]:tr.push(e)}function Up(e){bi=!0,fc(e)}function xr(){if(!fo&&tr!==null){fo=!0;var e=0,t=je;try{var i=tr;for(je=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}tr=null,bi=!1}catch(d){throw tr!==null&&(tr=tr.slice(e+1)),mu(Ia,xr),d}finally{je=t,fo=!1}}return null}var yn=[],xn=0,ki=null,ji=0,Tt=[],Rt=0,Br=null,rr=1,nr="";function Mr(e,t){yn[xn++]=ji,yn[xn++]=ki,ki=e,ji=t}function pc(e,t,i){Tt[Rt++]=rr,Tt[Rt++]=nr,Tt[Rt++]=Br,Br=e;var o=rr;e=nr;var d=32-$t(o)-1;o&=~(1<<d),i+=1;var f=32-$t(t)+d;if(30<f){var g=d-d%5;f=(o&(1<<g)-1).toString(32),o>>=g,d-=g,rr=1<<32-$t(t)+d|i<<d|o,nr=f+e}else rr=1<<f|i<<d|o,nr=e}function po(e){e.return!==null&&(Mr(e,1),pc(e,1,0))}function mo(e){for(;e===ki;)ki=yn[--xn],yn[xn]=null,ji=yn[--xn],yn[xn]=null;for(;e===Br;)Br=Tt[--Rt],Tt[Rt]=null,nr=Tt[--Rt],Tt[Rt]=null,rr=Tt[--Rt],Tt[Rt]=null}var _t=null,bt=null,Ae=!1,Bt=null;function mc(e,t){var i=It(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function gc(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,bt=gr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Br!==null?{id:rr,overflow:nr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=It(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,_t=e,bt=null,!0):!1;default:return!1}}function go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vo(e){if(Ae){var t=bt;if(t){var i=t;if(!gc(e,t)){if(go(e))throw Error(s(418));t=gr(i.nextSibling);var o=_t;t&&gc(e,t)?mc(o,i):(e.flags=e.flags&-4097|2,Ae=!1,_t=e)}}else{if(go(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ae=!1,_t=e}}}function vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function Si(e){if(e!==_t)return!1;if(!Ae)return vc(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oo(e.type,e.memoizedProps)),t&&(t=bt)){if(go(e))throw yc(),Error(s(418));for(;t;)mc(e,t),t=gr(t.nextSibling)}if(vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){bt=gr(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=_t?gr(e.stateNode.nextSibling):null;return!0}function yc(){for(var e=bt;e;)e=gr(e.nextSibling)}function wn(){bt=_t=null,Ae=!1}function yo(e){Bt===null?Bt=[e]:Bt.push(e)}var Bp=q.ReactCurrentBatchConfig;function gs(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var o=i.stateNode}if(!o)throw Error(s(147,e));var d=o,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var w=d.refs;g===null?delete w[f]:w[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function Ni(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xc(e){var t=e._init;return t(e._payload)}function wc(e){function t(C,j){if(e){var R=C.deletions;R===null?(C.deletions=[j],C.flags|=16):R.push(j)}}function i(C,j){if(!e)return null;for(;j!==null;)t(C,j),j=j.sibling;return null}function o(C,j){for(C=new Map;j!==null;)j.key!==null?C.set(j.key,j):C.set(j.index,j),j=j.sibling;return C}function d(C,j){return C=Er(C,j),C.index=0,C.sibling=null,C}function f(C,j,R){return C.index=R,e?(R=C.alternate,R!==null?(R=R.index,R<j?(C.flags|=2,j):R):(C.flags|=2,j)):(C.flags|=1048576,j)}function g(C){return e&&C.alternate===null&&(C.flags|=2),C}function w(C,j,R,M){return j===null||j.tag!==6?(j=ul(R,C.mode,M),j.return=C,j):(j=d(j,R),j.return=C,j)}function k(C,j,R,M){var Y=R.type;return Y===ce?$(C,j,R.props.children,M,R.key):j!==null&&(j.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===De&&xc(Y)===j.type)?(M=d(j,R.props),M.ref=gs(C,j,R),M.return=C,M):(M=Qi(R.type,R.key,R.props,null,C.mode,M),M.ref=gs(C,j,R),M.return=C,M)}function O(C,j,R,M){return j===null||j.tag!==4||j.stateNode.containerInfo!==R.containerInfo||j.stateNode.implementation!==R.implementation?(j=cl(R,C.mode,M),j.return=C,j):(j=d(j,R.children||[]),j.return=C,j)}function $(C,j,R,M,Y){return j===null||j.tag!==7?(j=Gr(R,C.mode,M,Y),j.return=C,j):(j=d(j,R),j.return=C,j)}function B(C,j,R){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ul(""+j,C.mode,R),j.return=C,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case oe:return R=Qi(j.type,j.key,j.props,null,C.mode,R),R.ref=gs(C,null,j),R.return=C,R;case ee:return j=cl(j,C.mode,R),j.return=C,j;case De:var M=j._init;return B(C,M(j._payload),R)}if(Ct(j)||Z(j))return j=Gr(j,C.mode,R,null),j.return=C,j;Ni(C,j)}return null}function L(C,j,R,M){var Y=j!==null?j.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Y!==null?null:w(C,j,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case oe:return R.key===Y?k(C,j,R,M):null;case ee:return R.key===Y?O(C,j,R,M):null;case De:return Y=R._init,L(C,j,Y(R._payload),M)}if(Ct(R)||Z(R))return Y!==null?null:$(C,j,R,M,null);Ni(C,R)}return null}function H(C,j,R,M,Y){if(typeof M=="string"&&M!==""||typeof M=="number")return C=C.get(R)||null,w(j,C,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:return C=C.get(M.key===null?R:M.key)||null,k(j,C,M,Y);case ee:return C=C.get(M.key===null?R:M.key)||null,O(j,C,M,Y);case De:var re=M._init;return H(C,j,R,re(M._payload),Y)}if(Ct(M)||Z(M))return C=C.get(R)||null,$(j,C,M,Y,null);Ni(j,M)}return null}function G(C,j,R,M){for(var Y=null,re=null,ne=j,ae=j=0,Ye=null;ne!==null&&ae<R.length;ae++){ne.index>ae?(Ye=ne,ne=null):Ye=ne.sibling;var we=L(C,ne,R[ae],M);if(we===null){ne===null&&(ne=Ye);break}e&&ne&&we.alternate===null&&t(C,ne),j=f(we,j,ae),re===null?Y=we:re.sibling=we,re=we,ne=Ye}if(ae===R.length)return i(C,ne),Ae&&Mr(C,ae),Y;if(ne===null){for(;ae<R.length;ae++)ne=B(C,R[ae],M),ne!==null&&(j=f(ne,j,ae),re===null?Y=ne:re.sibling=ne,re=ne);return Ae&&Mr(C,ae),Y}for(ne=o(C,ne);ae<R.length;ae++)Ye=H(ne,C,ae,R[ae],M),Ye!==null&&(e&&Ye.alternate!==null&&ne.delete(Ye.key===null?ae:Ye.key),j=f(Ye,j,ae),re===null?Y=Ye:re.sibling=Ye,re=Ye);return e&&ne.forEach(function(Cr){return t(C,Cr)}),Ae&&Mr(C,ae),Y}function J(C,j,R,M){var Y=Z(R);if(typeof Y!="function")throw Error(s(150));if(R=Y.call(R),R==null)throw Error(s(151));for(var re=Y=null,ne=j,ae=j=0,Ye=null,we=R.next();ne!==null&&!we.done;ae++,we=R.next()){ne.index>ae?(Ye=ne,ne=null):Ye=ne.sibling;var Cr=L(C,ne,we.value,M);if(Cr===null){ne===null&&(ne=Ye);break}e&&ne&&Cr.alternate===null&&t(C,ne),j=f(Cr,j,ae),re===null?Y=Cr:re.sibling=Cr,re=Cr,ne=Ye}if(we.done)return i(C,ne),Ae&&Mr(C,ae),Y;if(ne===null){for(;!we.done;ae++,we=R.next())we=B(C,we.value,M),we!==null&&(j=f(we,j,ae),re===null?Y=we:re.sibling=we,re=we);return Ae&&Mr(C,ae),Y}for(ne=o(C,ne);!we.done;ae++,we=R.next())we=H(ne,C,ae,we.value,M),we!==null&&(e&&we.alternate!==null&&ne.delete(we.key===null?ae:we.key),j=f(we,j,ae),re===null?Y=we:re.sibling=we,re=we);return e&&ne.forEach(function(ym){return t(C,ym)}),Ae&&Mr(C,ae),Y}function Fe(C,j,R,M){if(typeof R=="object"&&R!==null&&R.type===ce&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case oe:e:{for(var Y=R.key,re=j;re!==null;){if(re.key===Y){if(Y=R.type,Y===ce){if(re.tag===7){i(C,re.sibling),j=d(re,R.props.children),j.return=C,C=j;break e}}else if(re.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===De&&xc(Y)===re.type){i(C,re.sibling),j=d(re,R.props),j.ref=gs(C,re,R),j.return=C,C=j;break e}i(C,re);break}else t(C,re);re=re.sibling}R.type===ce?(j=Gr(R.props.children,C.mode,M,R.key),j.return=C,C=j):(M=Qi(R.type,R.key,R.props,null,C.mode,M),M.ref=gs(C,j,R),M.return=C,C=M)}return g(C);case ee:e:{for(re=R.key;j!==null;){if(j.key===re)if(j.tag===4&&j.stateNode.containerInfo===R.containerInfo&&j.stateNode.implementation===R.implementation){i(C,j.sibling),j=d(j,R.children||[]),j.return=C,C=j;break e}else{i(C,j);break}else t(C,j);j=j.sibling}j=cl(R,C.mode,M),j.return=C,C=j}return g(C);case De:return re=R._init,Fe(C,j,re(R._payload),M)}if(Ct(R))return G(C,j,R,M);if(Z(R))return J(C,j,R,M);Ni(C,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,j!==null&&j.tag===6?(i(C,j.sibling),j=d(j,R),j.return=C,C=j):(i(C,j),j=ul(R,C.mode,M),j.return=C,C=j),g(C)):i(C,j)}return Fe}var _n=wc(!0),_c=wc(!1),Ei=vr(null),Ci=null,bn=null,xo=null;function wo(){xo=bn=Ci=null}function _o(e){var t=Ei.current;Oe(Ei),e._currentValue=t}function bo(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function kn(e,t){Ci=e,xo=bn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(mt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},bn===null){if(Ci===null)throw Error(s(308));bn=e,Ci.dependencies={lanes:0,firstContext:e}}else bn=bn.next=e;return t}var Fr=null;function ko(e){Fr===null?Fr=[e]:Fr.push(e)}function bc(e,t,i,o){var d=t.interleaved;return d===null?(i.next=i,ko(t)):(i.next=d.next,d.next=i),t.interleaved=i,sr(e,o)}function sr(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var wr=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(xe&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,sr(e,i)}return d=o.interleaved,d===null?(t.next=t,ko(o)):(t.next=d.next,d.next=t),o.interleaved=t,sr(e,i)}function Ti(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,$a(e,i)}}function jc(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?d=f=g:f=f.next=g,i=i.next}while(i!==null);f===null?d=f=t:f=f.next=t}else d=f=t;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Ri(e,t,i,o){var d=e.updateQueue;wr=!1;var f=d.firstBaseUpdate,g=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,O=k.next;k.next=null,g===null?f=O:g.next=O,g=k;var $=e.alternate;$!==null&&($=$.updateQueue,w=$.lastBaseUpdate,w!==g&&(w===null?$.firstBaseUpdate=O:w.next=O,$.lastBaseUpdate=k))}if(f!==null){var B=d.baseState;g=0,$=O=k=null,w=f;do{var L=w.lane,H=w.eventTime;if((o&L)===L){$!==null&&($=$.next={eventTime:H,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var G=e,J=w;switch(L=t,H=i,J.tag){case 1:if(G=J.payload,typeof G=="function"){B=G.call(H,B,L);break e}B=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=J.payload,L=typeof G=="function"?G.call(H,B,L):G,L==null)break e;B=W({},B,L);break e;case 2:wr=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,L=d.effects,L===null?d.effects=[w]:L.push(w))}else H={eventTime:H,lane:L,tag:w.tag,payload:w.payload,callback:w.callback,next:null},$===null?(O=$=H,k=B):$=$.next=H,g|=L;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;L=w,w=L.next,L.next=null,d.lastBaseUpdate=L,d.shared.pending=null}}while(!0);if($===null&&(k=B),d.baseState=k,d.firstBaseUpdate=O,d.lastBaseUpdate=$,t=d.shared.interleaved,t!==null){d=t;do g|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Vr|=g,e.lanes=g,e.memoizedState=B}}function Sc(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],d=o.callback;if(d!==null){if(o.callback=null,o=i,typeof d!="function")throw Error(s(191,d));d.call(o)}}}var vs={},Qt=vr(vs),ys=vr(vs),xs=vr(vs);function zr(e){if(e===vs)throw Error(s(174));return e}function So(e,t){switch(Te(xs,t),Te(ys,e),Te(Qt,vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kn(t,e)}Oe(Qt),Te(Qt,t)}function jn(){Oe(Qt),Oe(ys),Oe(xs)}function Nc(e){zr(xs.current);var t=zr(Qt.current),i=Kn(t,e.type);t!==i&&(Te(ys,e),Te(Qt,i))}function No(e){ys.current===e&&(Oe(Qt),Oe(ys))}var Ie=vr(0);function Pi(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Eo=[];function Co(){for(var e=0;e<Eo.length;e++)Eo[e]._workInProgressVersionPrimary=null;Eo.length=0}var Oi=q.ReactCurrentDispatcher,To=q.ReactCurrentBatchConfig,qr=0,Le=null,We=null,Je=null,Ai=!1,ws=!1,_s=0,Mp=0;function it(){throw Error(s(321))}function Ro(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ut(e[i],t[i]))return!1;return!0}function Po(e,t,i,o,d,f){if(qr=f,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oi.current=e===null||e.memoizedState===null?Vp:Wp,e=i(o,d),ws){f=0;do{if(ws=!1,_s=0,25<=f)throw Error(s(301));f+=1,Je=We=null,t.updateQueue=null,Oi.current=Hp,e=i(o,d)}while(ws)}if(Oi.current=Di,t=We!==null&&We.next!==null,qr=0,Je=We=Le=null,Ai=!1,t)throw Error(s(300));return e}function Oo(){var e=_s!==0;return _s=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Le.memoizedState=Je=e:Je=Je.next=e,Je}function Ot(){if(We===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Je===null?Le.memoizedState:Je.next;if(t!==null)Je=t,We=e;else{if(e===null)throw Error(s(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?Le.memoizedState=Je=e:Je=Je.next=e}return Je}function bs(e,t){return typeof t=="function"?t(e):t}function Ao(e){var t=Ot(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=We,d=o.baseQueue,f=i.pending;if(f!==null){if(d!==null){var g=d.next;d.next=f.next,f.next=g}o.baseQueue=d=f,i.pending=null}if(d!==null){f=d.next,o=o.baseState;var w=g=null,k=null,O=f;do{var $=O.lane;if((qr&$)===$)k!==null&&(k=k.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),o=O.hasEagerState?O.eagerState:e(o,O.action);else{var B={lane:$,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};k===null?(w=k=B,g=o):k=k.next=B,Le.lanes|=$,Vr|=$}O=O.next}while(O!==null&&O!==f);k===null?g=o:k.next=w,Ut(o,t.memoizedState)||(mt=!0),t.memoizedState=o,t.baseState=g,t.baseQueue=k,i.lastRenderedState=o}if(e=i.interleaved,e!==null){d=e;do f=d.lane,Le.lanes|=f,Vr|=f,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Io(e){var t=Ot(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,d=i.pending,f=t.memoizedState;if(d!==null){i.pending=null;var g=d=d.next;do f=e(f,g.action),g=g.next;while(g!==d);Ut(f,t.memoizedState)||(mt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,o]}function Ec(){}function Cc(e,t){var i=Le,o=Ot(),d=t(),f=!Ut(o.memoizedState,d);if(f&&(o.memoizedState=d,mt=!0),o=o.queue,Lo(Pc.bind(null,i,o,e),[e]),o.getSnapshot!==t||f||Je!==null&&Je.memoizedState.tag&1){if(i.flags|=2048,ks(9,Rc.bind(null,i,o,d,t),void 0,null),Qe===null)throw Error(s(349));(qr&30)!==0||Tc(i,t,d)}return d}function Tc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Rc(e,t,i,o){t.value=i,t.getSnapshot=o,Oc(t)&&Ac(e)}function Pc(e,t,i){return i(function(){Oc(t)&&Ac(e)})}function Oc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ut(e,i)}catch{return!0}}function Ac(e){var t=sr(e,1);t!==null&&qt(t,e,1,-1)}function Ic(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=qp.bind(null,Le,e),[t.memoizedState,e]}function ks(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function Lc(){return Ot().memoizedState}function Ii(e,t,i,o){var d=Yt();Le.flags|=e,d.memoizedState=ks(1|t,i,void 0,o===void 0?null:o)}function Li(e,t,i,o){var d=Ot();o=o===void 0?null:o;var f=void 0;if(We!==null){var g=We.memoizedState;if(f=g.destroy,o!==null&&Ro(o,g.deps)){d.memoizedState=ks(t,i,f,o);return}}Le.flags|=e,d.memoizedState=ks(1|t,i,f,o)}function Dc(e,t){return Ii(8390656,8,e,t)}function Lo(e,t){return Li(2048,8,e,t)}function $c(e,t){return Li(4,2,e,t)}function Uc(e,t){return Li(4,4,e,t)}function Bc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mc(e,t,i){return i=i!=null?i.concat([e]):null,Li(4,4,Bc.bind(null,t,e),i)}function Do(){}function Fc(e,t){var i=Ot();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&Ro(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function zc(e,t){var i=Ot();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&Ro(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function qc(e,t,i){return(qr&21)===0?(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=i):(Ut(i,t)||(i=xu(),Le.lanes|=i,Vr|=i,e.baseState=!0),t)}function Fp(e,t){var i=je;je=i!==0&&4>i?i:4,e(!0);var o=To.transition;To.transition={};try{e(!1),t()}finally{je=i,To.transition=o}}function Vc(){return Ot().memoizedState}function zp(e,t,i){var o=Sr(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},Wc(e))Hc(t,i);else if(i=bc(e,t,i,o),i!==null){var d=dt();qt(i,e,o,d),Kc(i,t,o)}}function qp(e,t,i){var o=Sr(e),d={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(Wc(e))Hc(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,i);if(d.hasEagerState=!0,d.eagerState=w,Ut(w,g)){var k=t.interleaved;k===null?(d.next=d,ko(t)):(d.next=k.next,k.next=d),t.interleaved=d;return}}catch{}finally{}i=bc(e,t,d,o),i!==null&&(d=dt(),qt(i,e,o,d),Kc(i,t,o))}}function Wc(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Hc(e,t){ws=Ai=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Kc(e,t,i){if((i&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,$a(e,i)}}var Di={readContext:Pt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},Vp={readContext:Pt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:Dc,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Ii(4194308,4,Bc.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var i=Yt();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=Yt();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=zp.bind(null,Le,e),[o.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:Ic,useDebugValue:Do,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=Ic(!1),t=e[0];return e=Fp.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var o=Le,d=Yt();if(Ae){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Qe===null)throw Error(s(349));(qr&30)!==0||Tc(o,t,i)}d.memoizedState=i;var f={value:i,getSnapshot:t};return d.queue=f,Dc(Pc.bind(null,o,f,e),[e]),o.flags|=2048,ks(9,Rc.bind(null,o,f,i,t),void 0,null),i},useId:function(){var e=Yt(),t=Qe.identifierPrefix;if(Ae){var i=nr,o=rr;i=(o&~(1<<32-$t(o)-1)).toString(32)+i,t=":"+t+"R"+i,i=_s++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Mp++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wp={readContext:Pt,useCallback:Fc,useContext:Pt,useEffect:Lo,useImperativeHandle:Mc,useInsertionEffect:$c,useLayoutEffect:Uc,useMemo:zc,useReducer:Ao,useRef:Lc,useState:function(){return Ao(bs)},useDebugValue:Do,useDeferredValue:function(e){var t=Ot();return qc(t,We.memoizedState,e)},useTransition:function(){var e=Ao(bs)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:Ec,useSyncExternalStore:Cc,useId:Vc,unstable_isNewReconciler:!1},Hp={readContext:Pt,useCallback:Fc,useContext:Pt,useEffect:Lo,useImperativeHandle:Mc,useInsertionEffect:$c,useLayoutEffect:Uc,useMemo:zc,useReducer:Io,useRef:Lc,useState:function(){return Io(bs)},useDebugValue:Do,useDeferredValue:function(e){var t=Ot();return We===null?t.memoizedState=e:qc(t,We.memoizedState,e)},useTransition:function(){var e=Io(bs)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:Ec,useSyncExternalStore:Cc,useId:Vc,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=W({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function $o(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:W({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var $i={isMounted:function(e){return(e=e._reactInternals)?Dr(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=dt(),d=Sr(e),f=ir(o,d);f.payload=t,i!=null&&(f.callback=i),t=_r(e,f,d),t!==null&&(qt(t,e,d,o),Ti(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=dt(),d=Sr(e),f=ir(o,d);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=_r(e,f,d),t!==null&&(qt(t,e,d,o),Ti(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=dt(),o=Sr(e),d=ir(i,o);d.tag=2,t!=null&&(d.callback=t),t=_r(e,d,o),t!==null&&(qt(t,e,o,i),Ti(t,e,o))}};function Gc(e,t,i,o,d,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!us(i,o)||!us(d,f):!0}function Jc(e,t,i){var o=!1,d=yr,f=t.contextType;return typeof f=="object"&&f!==null?f=Pt(f):(d=pt(t)?Ur:st.current,o=t.contextTypes,f=(o=o!=null)?vn(e,d):yr),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$i,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function Qc(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&$i.enqueueReplaceState(t,t.state,null)}function Uo(e,t,i,o){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs={},jo(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=Pt(f):(f=pt(t)?Ur:st.current,d.context=vn(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&($o(e,t,f,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&$i.enqueueReplaceState(d,d.state,null),Ri(e,i,d,o),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Sn(e,t){try{var i="",o=t;do i+=he(o),o=o.return;while(o);var d=i}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Bo(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Mo(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Kp=typeof WeakMap=="function"?WeakMap:Map;function Yc(e,t,i){i=ir(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){Vi||(Vi=!0,tl=o),Mo(e,t)},i}function Xc(e,t,i){i=ir(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var d=t.value;i.payload=function(){return o(d)},i.callback=function(){Mo(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){Mo(e,t),typeof o!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function Zc(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Kp;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(i)||(d.add(i),e=om.bind(null,e,t,i),t.then(e,e))}function ed(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function td(e,t,i,o,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ir(-1,1),t.tag=2,_r(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Gp=q.ReactCurrentOwner,mt=!1;function ct(e,t,i,o){t.child=e===null?_c(t,null,i,o):_n(t,e.child,i,o)}function rd(e,t,i,o,d){i=i.render;var f=t.ref;return kn(t,d),o=Po(e,t,i,o,f,d),i=Oo(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,ar(e,t,d)):(Ae&&i&&po(t),t.flags|=1,ct(e,t,o,d),t.child)}function nd(e,t,i,o,d){if(e===null){var f=i.type;return typeof f=="function"&&!ll(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,sd(e,t,f,o,d)):(e=Qi(i.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var g=f.memoizedProps;if(i=i.compare,i=i!==null?i:us,i(g,o)&&e.ref===t.ref)return ar(e,t,d)}return t.flags|=1,e=Er(f,o),e.ref=t.ref,e.return=t,t.child=e}function sd(e,t,i,o,d){if(e!==null){var f=e.memoizedProps;if(us(f,o)&&e.ref===t.ref)if(mt=!1,t.pendingProps=o=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(mt=!0);else return t.lanes=e.lanes,ar(e,t,d)}return Fo(e,t,i,o,d)}function id(e,t,i){var o=t.pendingProps,d=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(En,kt),kt|=i;else{if((i&1073741824)===0)return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(En,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=f!==null?f.baseLanes:i,Te(En,kt),kt|=o}else f!==null?(o=f.baseLanes|i,t.memoizedState=null):o=i,Te(En,kt),kt|=o;return ct(e,t,d,i),t.child}function ad(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Fo(e,t,i,o,d){var f=pt(i)?Ur:st.current;return f=vn(t,f),kn(t,d),i=Po(e,t,i,o,f,d),o=Oo(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,ar(e,t,d)):(Ae&&o&&po(t),t.flags|=1,ct(e,t,i,d),t.child)}function od(e,t,i,o,d){if(pt(i)){var f=!0;_i(t)}else f=!1;if(kn(t,d),t.stateNode===null)Bi(e,t),Jc(t,i,o),Uo(t,i,o,d),o=!0;else if(e===null){var g=t.stateNode,w=t.memoizedProps;g.props=w;var k=g.context,O=i.contextType;typeof O=="object"&&O!==null?O=Pt(O):(O=pt(i)?Ur:st.current,O=vn(t,O));var $=i.getDerivedStateFromProps,B=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function";B||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==o||k!==O)&&Qc(t,g,o,O),wr=!1;var L=t.memoizedState;g.state=L,Ri(t,o,g,d),k=t.memoizedState,w!==o||L!==k||ft.current||wr?(typeof $=="function"&&($o(t,i,$,o),k=t.memoizedState),(w=wr||Gc(t,i,w,o,L,k,O))?(B||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=k),g.props=o,g.state=k,g.context=O,o=w):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,kc(e,t),w=t.memoizedProps,O=t.type===t.elementType?w:Mt(t.type,w),g.props=O,B=t.pendingProps,L=g.context,k=i.contextType,typeof k=="object"&&k!==null?k=Pt(k):(k=pt(i)?Ur:st.current,k=vn(t,k));var H=i.getDerivedStateFromProps;($=typeof H=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==B||L!==k)&&Qc(t,g,o,k),wr=!1,L=t.memoizedState,g.state=L,Ri(t,o,g,d);var G=t.memoizedState;w!==B||L!==G||ft.current||wr?(typeof H=="function"&&($o(t,i,H,o),G=t.memoizedState),(O=wr||Gc(t,i,O,o,L,G,k)||!1)?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,G,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,G,k)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=G),g.props=o,g.state=G,g.context=k,o=O):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),o=!1)}return zo(e,t,i,o,f,d)}function zo(e,t,i,o,d,f){ad(e,t);var g=(t.flags&128)!==0;if(!o&&!g)return d&&hc(t,i,!1),ar(e,t,f);o=t.stateNode,Gp.current=t;var w=g&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=_n(t,e.child,null,f),t.child=_n(t,null,w,f)):ct(e,t,w,f),t.memoizedState=o.state,d&&hc(t,i,!0),t.child}function ld(e){var t=e.stateNode;t.pendingContext?cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cc(e,t.context,!1),So(e,t.containerInfo)}function ud(e,t,i,o,d){return wn(),yo(d),t.flags|=256,ct(e,t,i,o),t.child}var qo={dehydrated:null,treeContext:null,retryLane:0};function Vo(e){return{baseLanes:e,cachePool:null,transitions:null}}function cd(e,t,i){var o=t.pendingProps,d=Ie.current,f=!1,g=(t.flags&128)!==0,w;if((w=g)||(w=e!==null&&e.memoizedState===null?!1:(d&2)!==0),w?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Te(Ie,d&1),e===null)return vo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=o.children,e=o.fallback,f?(o=t.mode,f=t.child,g={mode:"hidden",children:g},(o&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Yi(g,o,0,null),e=Gr(e,o,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Vo(i),t.memoizedState=qo,e):Wo(t,g));if(d=e.memoizedState,d!==null&&(w=d.dehydrated,w!==null))return Jp(e,t,g,o,w,d,i);if(f){f=o.fallback,g=t.mode,d=e.child,w=d.sibling;var k={mode:"hidden",children:o.children};return(g&1)===0&&t.child!==d?(o=t.child,o.childLanes=0,o.pendingProps=k,t.deletions=null):(o=Er(d,k),o.subtreeFlags=d.subtreeFlags&14680064),w!==null?f=Er(w,f):(f=Gr(f,g,i,null),f.flags|=2),f.return=t,o.return=t,o.sibling=f,t.child=o,o=f,f=t.child,g=e.child.memoizedState,g=g===null?Vo(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~i,t.memoizedState=qo,o}return f=e.child,e=f.sibling,o=Er(f,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=i),o.return=t,o.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function Wo(e,t){return t=Yi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ui(e,t,i,o){return o!==null&&yo(o),_n(t,e.child,null,i),e=Wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jp(e,t,i,o,d,f,g){if(i)return t.flags&256?(t.flags&=-257,o=Bo(Error(s(422))),Ui(e,t,g,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=o.fallback,d=t.mode,o=Yi({mode:"visible",children:o.children},d,0,null),f=Gr(f,d,g,null),f.flags|=2,o.return=t,f.return=t,o.sibling=f,t.child=o,(t.mode&1)!==0&&_n(t,e.child,null,g),t.child.memoizedState=Vo(g),t.memoizedState=qo,f);if((t.mode&1)===0)return Ui(e,t,g,null);if(d.data==="$!"){if(o=d.nextSibling&&d.nextSibling.dataset,o)var w=o.dgst;return o=w,f=Error(s(419)),o=Bo(f,o,void 0),Ui(e,t,g,o)}if(w=(g&e.childLanes)!==0,mt||w){if(o=Qe,o!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(o.suspendedLanes|g))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,sr(e,d),qt(o,e,d,-1))}return ol(),o=Bo(Error(s(421))),Ui(e,t,g,o)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=lm.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,bt=gr(d.nextSibling),_t=t,Ae=!0,Bt=null,e!==null&&(Tt[Rt++]=rr,Tt[Rt++]=nr,Tt[Rt++]=Br,rr=e.id,nr=e.overflow,Br=t),t=Wo(t,o.children),t.flags|=4096,t)}function dd(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),bo(e.return,t,i)}function Ho(e,t,i,o,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=d)}function hd(e,t,i){var o=t.pendingProps,d=o.revealOrder,f=o.tail;if(ct(e,t,o.children,i),o=Ie.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dd(e,i,t);else if(e.tag===19)dd(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Te(Ie,o),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&Pi(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),Ho(t,!1,d,i,f);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Pi(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Ho(t,!0,i,null,f);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ar(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Vr|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Er(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Er(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Qp(e,t,i){switch(t.tag){case 3:ld(t),wn();break;case 5:Nc(t);break;case 1:pt(t.type)&&_i(t);break;case 4:So(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,d=t.memoizedProps.value;Te(Ei,o._currentValue),o._currentValue=d;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Te(Ie,Ie.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?cd(e,t,i):(Te(Ie,Ie.current&1),e=ar(e,t,i),e!==null?e.sibling:null);Te(Ie,Ie.current&1);break;case 19:if(o=(i&t.childLanes)!==0,(e.flags&128)!==0){if(o)return hd(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Te(Ie,Ie.current),o)break;return null;case 22:case 23:return t.lanes=0,id(e,t,i)}return ar(e,t,i)}var fd,Ko,pd,md;fd=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ko=function(){},pd=function(e,t,i,o){var d=e.memoizedProps;if(d!==o){e=t.stateNode,zr(Qt.current);var f=null;switch(i){case"input":d=Ir(e,d),o=Ir(e,o),f=[];break;case"select":d=W({},d,{value:void 0}),o=W({},o,{value:void 0}),f=[];break;case"textarea":d=Vn(e,d),o=Vn(e,o),f=[];break;default:typeof d.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=yi)}Na(i,o);var g;i=null;for(O in d)if(!o.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var w=d[O];for(g in w)w.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(u.hasOwnProperty(O)?f||(f=[]):(f=f||[]).push(O,null));for(O in o){var k=o[O];if(w=d?.[O],o.hasOwnProperty(O)&&k!==w&&(k!=null||w!=null))if(O==="style")if(w){for(g in w)!w.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in k)k.hasOwnProperty(g)&&w[g]!==k[g]&&(i||(i={}),i[g]=k[g])}else i||(f||(f=[]),f.push(O,i)),i=k;else O==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,w=w?w.__html:void 0,k!=null&&w!==k&&(f=f||[]).push(O,k)):O==="children"?typeof k!="string"&&typeof k!="number"||(f=f||[]).push(O,""+k):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(u.hasOwnProperty(O)?(k!=null&&O==="onScroll"&&Pe("scroll",e),f||w===k||(f=[])):(f=f||[]).push(O,k))}i&&(f=f||[]).push("style",i);var O=f;(t.updateQueue=O)&&(t.flags|=4)}},md=function(e,t,i,o){i!==o&&(t.flags|=4)};function js(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&14680064,o|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function Yp(e,t,i){var o=t.pendingProps;switch(mo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return pt(t.type)&&wi(),at(t),null;case 3:return o=t.stateNode,jn(),Oe(ft),Oe(st),Co(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Si(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bt!==null&&(sl(Bt),Bt=null))),Ko(e,t),at(t),null;case 5:No(t);var d=zr(xs.current);if(i=t.type,e!==null&&t.stateNode!=null)pd(e,t,i,o,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(s(166));return at(t),null}if(e=zr(Qt.current),Si(t)){o=t.stateNode,i=t.type;var f=t.memoizedProps;switch(o[Jt]=t,o[ps]=f,e=(t.mode&1)!==0,i){case"dialog":Pe("cancel",o),Pe("close",o);break;case"iframe":case"object":case"embed":Pe("load",o);break;case"video":case"audio":for(d=0;d<ds.length;d++)Pe(ds[d],o);break;case"source":Pe("error",o);break;case"img":case"image":case"link":Pe("error",o),Pe("load",o);break;case"details":Pe("toggle",o);break;case"input":sn(o,f),Pe("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!f.multiple},Pe("invalid",o);break;case"textarea":Gs(o,f),Pe("invalid",o)}Na(i,f),d=null;for(var g in f)if(f.hasOwnProperty(g)){var w=f[g];g==="children"?typeof w=="string"?o.textContent!==w&&(f.suppressHydrationWarning!==!0&&vi(o.textContent,w,e),d=["children",w]):typeof w=="number"&&o.textContent!==""+w&&(f.suppressHydrationWarning!==!0&&vi(o.textContent,w,e),d=["children",""+w]):u.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&Pe("scroll",o)}switch(i){case"input":Et(o),lt(o,f,!0);break;case"textarea":Et(o),Wn(o);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(o.onclick=yi)}o=d,t.updateQueue=o,o!==null&&(t.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hn(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(i,{is:o.is}):(e=g.createElement(i),i==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,i),e[Jt]=t,e[ps]=o,fd(e,t,!1,!1),t.stateNode=e;e:{switch(g=Ea(i,o),i){case"dialog":Pe("cancel",e),Pe("close",e),d=o;break;case"iframe":case"object":case"embed":Pe("load",e),d=o;break;case"video":case"audio":for(d=0;d<ds.length;d++)Pe(ds[d],e);d=o;break;case"source":Pe("error",e),d=o;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),d=o;break;case"details":Pe("toggle",e),d=o;break;case"input":sn(e,o),d=Ir(e,o),Pe("invalid",e);break;case"option":d=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},d=W({},o,{value:void 0}),Pe("invalid",e);break;case"textarea":Gs(e,o),d=Vn(e,o),Pe("invalid",e);break;default:d=o}Na(i,d),w=d;for(f in w)if(w.hasOwnProperty(f)){var k=w[f];f==="style"?Qs(e,k):f==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&fe(e,k)):f==="children"?typeof k=="string"?(i!=="textarea"||k!=="")&&_e(e,k):typeof k=="number"&&_e(e,""+k):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(u.hasOwnProperty(f)?k!=null&&f==="onScroll"&&Pe("scroll",e):k!=null&&A(e,f,k,g))}switch(i){case"input":Et(e),lt(e,o,!1);break;case"textarea":Et(e),Wn(e);break;case"option":o.value!=null&&e.setAttribute("value",""+ye(o.value));break;case"select":e.multiple=!!o.multiple,f=o.value,f!=null?Ge(e,!!o.multiple,f,!1):o.defaultValue!=null&&Ge(e,!!o.multiple,o.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=yi)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)md(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(i=zr(xs.current),zr(Qt.current),Si(t)){if(o=t.stateNode,i=t.memoizedProps,o[Jt]=t,(f=o.nodeValue!==i)&&(e=_t,e!==null))switch(e.tag){case 3:vi(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vi(o.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Jt]=t,t.stateNode=o}return at(t),null;case 13:if(Oe(Ie),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&bt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)yc(),wn(),t.flags|=98560,f=!1;else if(f=Si(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Jt]=t}else wn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;at(t),f=!1}else Bt!==null&&(sl(Bt),Bt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ie.current&1)!==0?He===0&&(He=3):ol())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return jn(),Ko(e,t),e===null&&hs(t.stateNode.containerInfo),at(t),null;case 10:return _o(t.type._context),at(t),null;case 17:return pt(t.type)&&wi(),at(t),null;case 19:if(Oe(Ie),f=t.memoizedState,f===null)return at(t),null;if(o=(t.flags&128)!==0,g=f.rendering,g===null)if(o)js(f,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Pi(e),g!==null){for(t.flags|=128,js(f,!1),o=g.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=i,i=t.child;i!==null;)f=i,e=o,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Te(Ie,Ie.current&1|2),t.child}e=e.sibling}f.tail!==null&&Me()>Cn&&(t.flags|=128,o=!0,js(f,!1),t.lanes=4194304)}else{if(!o)if(e=Pi(g),e!==null){if(t.flags|=128,o=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),js(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ae)return at(t),null}else 2*Me()-f.renderingStartTime>Cn&&i!==1073741824&&(t.flags|=128,o=!0,js(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(i=f.last,i!==null?i.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Me(),t.sibling=null,i=Ie.current,Te(Ie,o?i&1|2:i&1),t):(at(t),null);case 22:case 23:return al(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(kt&1073741824)!==0&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Xp(e,t){switch(mo(t),t.tag){case 1:return pt(t.type)&&wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jn(),Oe(ft),Oe(st),Co(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return No(t),null;case 13:if(Oe(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));wn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Ie),null;case 4:return jn(),null;case 10:return _o(t.type._context),null;case 22:case 23:return al(),null;case 24:return null;default:return null}}var Mi=!1,ot=!1,Zp=typeof WeakSet=="function"?WeakSet:Set,K=null;function Nn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){$e(e,t,o)}else i.current=null}function Go(e,t,i){try{i()}catch(o){$e(e,t,o)}}var gd=!1;function em(e,t){if(io=ai,e=Gu(),Ya(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var g=0,w=-1,k=-1,O=0,$=0,B=e,L=null;t:for(;;){for(var H;B!==i||d!==0&&B.nodeType!==3||(w=g+d),B!==f||o!==0&&B.nodeType!==3||(k=g+o),B.nodeType===3&&(g+=B.nodeValue.length),(H=B.firstChild)!==null;)L=B,B=H;for(;;){if(B===e)break t;if(L===i&&++O===d&&(w=g),L===f&&++$===o&&(k=g),(H=B.nextSibling)!==null)break;B=L,L=B.parentNode}B=H}i=w===-1||k===-1?null:{start:w,end:k}}else i=null}i=i||{start:0,end:0}}else i=null;for(ao={focusedElem:e,selectionRange:i},ai=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var G=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var J=G.memoizedProps,Fe=G.memoizedState,C=t.stateNode,j=C.getSnapshotBeforeUpdate(t.elementType===t.type?J:Mt(t.type,J),Fe);C.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(M){$e(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return G=gd,gd=!1,G}function Ss(e,t,i){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Go(t,i,f)}d=d.next}while(d!==o)}}function Fi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==t)}}function Jo(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function vd(e){var t=e.alternate;t!==null&&(e.alternate=null,vd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[ps],delete t[co],delete t[Dp],delete t[$p])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yd(e){return e.tag===5||e.tag===3||e.tag===4}function xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qo(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=yi));else if(o!==4&&(e=e.child,e!==null))for(Qo(e,t,i),e=e.sibling;e!==null;)Qo(e,t,i),e=e.sibling}function Yo(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Yo(e,t,i),e=e.sibling;e!==null;)Yo(e,t,i),e=e.sibling}var Ze=null,Ft=!1;function br(e,t,i){for(i=i.child;i!==null;)wd(e,t,i),i=i.sibling}function wd(e,t,i){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ei,i)}catch{}switch(i.tag){case 5:ot||Nn(i,t);case 6:var o=Ze,d=Ft;Ze=null,br(e,t,i),Ze=o,Ft=d,Ze!==null&&(Ft?(e=Ze,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ze.removeChild(i.stateNode));break;case 18:Ze!==null&&(Ft?(e=Ze,i=i.stateNode,e.nodeType===8?uo(e.parentNode,i):e.nodeType===1&&uo(e,i),ns(e)):uo(Ze,i.stateNode));break;case 4:o=Ze,d=Ft,Ze=i.stateNode.containerInfo,Ft=!0,br(e,t,i),Ze=o,Ft=d;break;case 0:case 11:case 14:case 15:if(!ot&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){d=o=o.next;do{var f=d,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Go(i,t,g),d=d.next}while(d!==o)}br(e,t,i);break;case 1:if(!ot&&(Nn(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(w){$e(i,t,w)}br(e,t,i);break;case 21:br(e,t,i);break;case 22:i.mode&1?(ot=(o=ot)||i.memoizedState!==null,br(e,t,i),ot=o):br(e,t,i);break;default:br(e,t,i)}}function _d(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Zp),t.forEach(function(o){var d=um.bind(null,e,o);i.has(o)||(i.add(o),o.then(d,d))})}}function zt(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];try{var f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 5:Ze=w.stateNode,Ft=!1;break e;case 3:Ze=w.stateNode.containerInfo,Ft=!0;break e;case 4:Ze=w.stateNode.containerInfo,Ft=!0;break e}w=w.return}if(Ze===null)throw Error(s(160));wd(f,g,d),Ze=null,Ft=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(O){$e(d,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bd(t,e),t=t.sibling}function bd(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Xt(e),o&4){try{Ss(3,e,e.return),Fi(3,e)}catch(J){$e(e,e.return,J)}try{Ss(5,e,e.return)}catch(J){$e(e,e.return,J)}}break;case 1:zt(t,e),Xt(e),o&512&&i!==null&&Nn(i,i.return);break;case 5:if(zt(t,e),Xt(e),o&512&&i!==null&&Nn(i,i.return),e.flags&32){var d=e.stateNode;try{_e(d,"")}catch(J){$e(e,e.return,J)}}if(o&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,g=i!==null?i.memoizedProps:f,w=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{w==="input"&&f.type==="radio"&&f.name!=null&&V(d,f),Ea(w,g);var O=Ea(w,f);for(g=0;g<k.length;g+=2){var $=k[g],B=k[g+1];$==="style"?Qs(d,B):$==="dangerouslySetInnerHTML"?fe(d,B):$==="children"?_e(d,B):A(d,$,B,O)}switch(w){case"input":me(d,f);break;case"textarea":Js(d,f);break;case"select":var L=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var H=f.value;H!=null?Ge(d,!!f.multiple,H,!1):L!==!!f.multiple&&(f.defaultValue!=null?Ge(d,!!f.multiple,f.defaultValue,!0):Ge(d,!!f.multiple,f.multiple?[]:"",!1))}d[ps]=f}catch(J){$e(e,e.return,J)}}break;case 6:if(zt(t,e),Xt(e),o&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(J){$e(e,e.return,J)}}break;case 3:if(zt(t,e),Xt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ns(t.containerInfo)}catch(J){$e(e,e.return,J)}break;case 4:zt(t,e),Xt(e);break;case 13:zt(t,e),Xt(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(el=Me())),o&4&&_d(e);break;case 22:if($=i!==null&&i.memoizedState!==null,e.mode&1?(ot=(O=ot)||$,zt(t,e),ot=O):zt(t,e),Xt(e),o&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!$&&(e.mode&1)!==0)for(K=e,$=e.child;$!==null;){for(B=K=$;K!==null;){switch(L=K,H=L.child,L.tag){case 0:case 11:case 14:case 15:Ss(4,L,L.return);break;case 1:Nn(L,L.return);var G=L.stateNode;if(typeof G.componentWillUnmount=="function"){o=L,i=L.return;try{t=o,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(J){$e(o,i,J)}}break;case 5:Nn(L,L.return);break;case 22:if(L.memoizedState!==null){Sd(B);continue}}H!==null?(H.return=L,K=H):Sd(B)}$=$.sibling}e:for($=null,B=e;;){if(B.tag===5){if($===null){$=B;try{d=B.stateNode,O?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(w=B.stateNode,k=B.memoizedProps.style,g=k!=null&&k.hasOwnProperty("display")?k.display:null,w.style.display=Lr("display",g))}catch(J){$e(e,e.return,J)}}}else if(B.tag===6){if($===null)try{B.stateNode.nodeValue=O?"":B.memoizedProps}catch(J){$e(e,e.return,J)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;$===B&&($=null),B=B.return}$===B&&($=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:zt(t,e),Xt(e),o&4&&_d(e);break;case 21:break;default:zt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(yd(i)){var o=i;break e}i=i.return}throw Error(s(160))}switch(o.tag){case 5:var d=o.stateNode;o.flags&32&&(_e(d,""),o.flags&=-33);var f=xd(e);Yo(e,f,d);break;case 3:case 4:var g=o.stateNode.containerInfo,w=xd(e);Qo(e,w,g);break;default:throw Error(s(161))}}catch(k){$e(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tm(e,t,i){K=e,kd(e)}function kd(e,t,i){for(var o=(e.mode&1)!==0;K!==null;){var d=K,f=d.child;if(d.tag===22&&o){var g=d.memoizedState!==null||Mi;if(!g){var w=d.alternate,k=w!==null&&w.memoizedState!==null||ot;w=Mi;var O=ot;if(Mi=g,(ot=k)&&!O)for(K=d;K!==null;)g=K,k=g.child,g.tag===22&&g.memoizedState!==null?Nd(d):k!==null?(k.return=g,K=k):Nd(d);for(;f!==null;)K=f,kd(f),f=f.sibling;K=d,Mi=w,ot=O}jd(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,K=f):jd(e)}}function jd(e){for(;K!==null;){var t=K;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ot||Fi(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!ot)if(i===null)o.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:Mt(t.type,i.memoizedProps);o.componentDidUpdate(d,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Sc(t,f,o);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Sc(t,g,i)}break;case 5:var w=t.stateNode;if(i===null&&t.flags&4){i=w;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&i.focus();break;case"img":k.src&&(i.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var $=O.memoizedState;if($!==null){var B=$.dehydrated;B!==null&&ns(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ot||t.flags&512&&Jo(t)}catch(L){$e(t,t.return,L)}}if(t===e){K=null;break}if(i=t.sibling,i!==null){i.return=t.return,K=i;break}K=t.return}}function Sd(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var i=t.sibling;if(i!==null){i.return=t.return,K=i;break}K=t.return}}function Nd(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Fi(4,t)}catch(k){$e(t,i,k)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var d=t.return;try{o.componentDidMount()}catch(k){$e(t,d,k)}}var f=t.return;try{Jo(t)}catch(k){$e(t,f,k)}break;case 5:var g=t.return;try{Jo(t)}catch(k){$e(t,g,k)}}}catch(k){$e(t,t.return,k)}if(t===e){K=null;break}var w=t.sibling;if(w!==null){w.return=t.return,K=w;break}K=t.return}}var rm=Math.ceil,zi=q.ReactCurrentDispatcher,Xo=q.ReactCurrentOwner,At=q.ReactCurrentBatchConfig,xe=0,Qe=null,qe=null,et=0,kt=0,En=vr(0),He=0,Ns=null,Vr=0,qi=0,Zo=0,Es=null,gt=null,el=0,Cn=1/0,or=null,Vi=!1,tl=null,kr=null,Wi=!1,jr=null,Hi=0,Cs=0,rl=null,Ki=-1,Gi=0;function dt(){return(xe&6)!==0?Me():Ki!==-1?Ki:Ki=Me()}function Sr(e){return(e.mode&1)===0?1:(xe&2)!==0&&et!==0?et&-et:Bp.transition!==null?(Gi===0&&(Gi=xu()),Gi):(e=je,e!==0||(e=window.event,e=e===void 0?16:Cu(e.type)),e)}function qt(e,t,i,o){if(50<Cs)throw Cs=0,rl=null,Error(s(185));Xn(e,i,o),((xe&2)===0||e!==Qe)&&(e===Qe&&((xe&2)===0&&(qi|=i),He===4&&Nr(e,et)),vt(e,o),i===1&&xe===0&&(t.mode&1)===0&&(Cn=Me()+500,bi&&xr()))}function vt(e,t){var i=e.callbackNode;Bf(e,t);var o=ni(e,e===Qe?et:0);if(o===0)i!==null&&gu(i),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(i!=null&&gu(i),t===1)e.tag===0?Up(Cd.bind(null,e)):fc(Cd.bind(null,e)),Ip(function(){(xe&6)===0&&xr()}),i=null;else{switch(wu(o)){case 1:i=Ia;break;case 4:i=vu;break;case 16:i=Zs;break;case 536870912:i=yu;break;default:i=Zs}i=Dd(i,Ed.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Ed(e,t){if(Ki=-1,Gi=0,(xe&6)!==0)throw Error(s(327));var i=e.callbackNode;if(Tn()&&e.callbackNode!==i)return null;var o=ni(e,e===Qe?et:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=Ji(e,o);else{t=o;var d=xe;xe|=2;var f=Rd();(Qe!==e||et!==t)&&(or=null,Cn=Me()+500,Hr(e,t));do try{im();break}catch(w){Td(e,w)}while(!0);wo(),zi.current=f,xe=d,qe!==null?t=0:(Qe=null,et=0,t=He)}if(t!==0){if(t===2&&(d=La(e),d!==0&&(o=d,t=nl(e,d))),t===1)throw i=Ns,Hr(e,0),Nr(e,o),vt(e,Me()),i;if(t===6)Nr(e,o);else{if(d=e.current.alternate,(o&30)===0&&!nm(d)&&(t=Ji(e,o),t===2&&(f=La(e),f!==0&&(o=f,t=nl(e,f))),t===1))throw i=Ns,Hr(e,0),Nr(e,o),vt(e,Me()),i;switch(e.finishedWork=d,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:Kr(e,gt,or);break;case 3:if(Nr(e,o),(o&130023424)===o&&(t=el+500-Me(),10<t)){if(ni(e,0)!==0)break;if(d=e.suspendedLanes,(d&o)!==o){dt(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=lo(Kr.bind(null,e,gt,or),t);break}Kr(e,gt,or);break;case 4:if(Nr(e,o),(o&4194240)===o)break;for(t=e.eventTimes,d=-1;0<o;){var g=31-$t(o);f=1<<g,g=t[g],g>d&&(d=g),o&=~f}if(o=d,o=Me()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*rm(o/1960))-o,10<o){e.timeoutHandle=lo(Kr.bind(null,e,gt,or),o);break}Kr(e,gt,or);break;case 5:Kr(e,gt,or);break;default:throw Error(s(329))}}}return vt(e,Me()),e.callbackNode===i?Ed.bind(null,e):null}function nl(e,t){var i=Es;return e.current.memoizedState.isDehydrated&&(Hr(e,t).flags|=256),e=Ji(e,t),e!==2&&(t=gt,gt=i,t!==null&&sl(t)),e}function sl(e){gt===null?gt=e:gt.push.apply(gt,e)}function nm(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var d=i[o],f=d.getSnapshot;d=d.value;try{if(!Ut(f(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nr(e,t){for(t&=~Zo,t&=~qi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-$t(t),o=1<<i;e[i]=-1,t&=~o}}function Cd(e){if((xe&6)!==0)throw Error(s(327));Tn();var t=ni(e,0);if((t&1)===0)return vt(e,Me()),null;var i=Ji(e,t);if(e.tag!==0&&i===2){var o=La(e);o!==0&&(t=o,i=nl(e,o))}if(i===1)throw i=Ns,Hr(e,0),Nr(e,t),vt(e,Me()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kr(e,gt,or),vt(e,Me()),null}function il(e,t){var i=xe;xe|=1;try{return e(t)}finally{xe=i,xe===0&&(Cn=Me()+500,bi&&xr())}}function Wr(e){jr!==null&&jr.tag===0&&(xe&6)===0&&Tn();var t=xe;xe|=1;var i=At.transition,o=je;try{if(At.transition=null,je=1,e)return e()}finally{je=o,At.transition=i,xe=t,(xe&6)===0&&xr()}}function al(){kt=En.current,Oe(En)}function Hr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Ap(i)),qe!==null)for(i=qe.return;i!==null;){var o=i;switch(mo(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&wi();break;case 3:jn(),Oe(ft),Oe(st),Co();break;case 5:No(o);break;case 4:jn();break;case 13:Oe(Ie);break;case 19:Oe(Ie);break;case 10:_o(o.type._context);break;case 22:case 23:al()}i=i.return}if(Qe=e,qe=e=Er(e.current,null),et=kt=t,He=0,Ns=null,Zo=qi=Vr=0,gt=Es=null,Fr!==null){for(t=0;t<Fr.length;t++)if(i=Fr[t],o=i.interleaved,o!==null){i.interleaved=null;var d=o.next,f=i.pending;if(f!==null){var g=f.next;f.next=d,o.next=g}i.pending=o}Fr=null}return e}function Td(e,t){do{var i=qe;try{if(wo(),Oi.current=Di,Ai){for(var o=Le.memoizedState;o!==null;){var d=o.queue;d!==null&&(d.pending=null),o=o.next}Ai=!1}if(qr=0,Je=We=Le=null,ws=!1,_s=0,Xo.current=null,i===null||i.return===null){He=1,Ns=t,qe=null;break}e:{var f=e,g=i.return,w=i,k=t;if(t=et,w.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var O=k,$=w,B=$.tag;if(($.mode&1)===0&&(B===0||B===11||B===15)){var L=$.alternate;L?($.updateQueue=L.updateQueue,$.memoizedState=L.memoizedState,$.lanes=L.lanes):($.updateQueue=null,$.memoizedState=null)}var H=ed(g);if(H!==null){H.flags&=-257,td(H,g,w,f,t),H.mode&1&&Zc(f,O,t),t=H,k=O;var G=t.updateQueue;if(G===null){var J=new Set;J.add(k),t.updateQueue=J}else G.add(k);break e}else{if((t&1)===0){Zc(f,O,t),ol();break e}k=Error(s(426))}}else if(Ae&&w.mode&1){var Fe=ed(g);if(Fe!==null){(Fe.flags&65536)===0&&(Fe.flags|=256),td(Fe,g,w,f,t),yo(Sn(k,w));break e}}f=k=Sn(k,w),He!==4&&(He=2),Es===null?Es=[f]:Es.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var C=Yc(f,k,t);jc(f,C);break e;case 1:w=k;var j=f.type,R=f.stateNode;if((f.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(kr===null||!kr.has(R)))){f.flags|=65536,t&=-t,f.lanes|=t;var M=Xc(f,w,t);jc(f,M);break e}}f=f.return}while(f!==null)}Od(i)}catch(Y){t=Y,qe===i&&i!==null&&(qe=i=i.return);continue}break}while(!0)}function Rd(){var e=zi.current;return zi.current=Di,e===null?Di:e}function ol(){(He===0||He===3||He===2)&&(He=4),Qe===null||(Vr&268435455)===0&&(qi&268435455)===0||Nr(Qe,et)}function Ji(e,t){var i=xe;xe|=2;var o=Rd();(Qe!==e||et!==t)&&(or=null,Hr(e,t));do try{sm();break}catch(d){Td(e,d)}while(!0);if(wo(),xe=i,zi.current=o,qe!==null)throw Error(s(261));return Qe=null,et=0,He}function sm(){for(;qe!==null;)Pd(qe)}function im(){for(;qe!==null&&!Rf();)Pd(qe)}function Pd(e){var t=Ld(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Od(e):qe=t,Xo.current=null}function Od(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=Yp(i,t,kt),i!==null){qe=i;return}}else{if(i=Xp(i,t),i!==null){i.flags&=32767,qe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,qe=null;return}}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);He===0&&(He=5)}function Kr(e,t,i){var o=je,d=At.transition;try{At.transition=null,je=1,am(e,t,i,o)}finally{At.transition=d,je=o}return null}function am(e,t,i,o){do Tn();while(jr!==null);if((xe&6)!==0)throw Error(s(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(Mf(e,f),e===Qe&&(qe=Qe=null,et=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Wi||(Wi=!0,Dd(Zs,function(){return Tn(),null})),f=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||f){f=At.transition,At.transition=null;var g=je;je=1;var w=xe;xe|=4,Xo.current=null,em(e,i),bd(i,e),Np(ao),ai=!!io,ao=io=null,e.current=i,tm(i),Pf(),xe=w,je=g,At.transition=f}else e.current=i;if(Wi&&(Wi=!1,jr=e,Hi=d),f=e.pendingLanes,f===0&&(kr=null),If(i.stateNode),vt(e,Me()),t!==null)for(o=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],o(d.value,{componentStack:d.stack,digest:d.digest});if(Vi)throw Vi=!1,e=tl,tl=null,e;return(Hi&1)!==0&&e.tag!==0&&Tn(),f=e.pendingLanes,(f&1)!==0?e===rl?Cs++:(Cs=0,rl=e):Cs=0,xr(),null}function Tn(){if(jr!==null){var e=wu(Hi),t=At.transition,i=je;try{if(At.transition=null,je=16>e?16:e,jr===null)var o=!1;else{if(e=jr,jr=null,Hi=0,(xe&6)!==0)throw Error(s(331));var d=xe;for(xe|=4,K=e.current;K!==null;){var f=K,g=f.child;if((K.flags&16)!==0){var w=f.deletions;if(w!==null){for(var k=0;k<w.length;k++){var O=w[k];for(K=O;K!==null;){var $=K;switch($.tag){case 0:case 11:case 15:Ss(8,$,f)}var B=$.child;if(B!==null)B.return=$,K=B;else for(;K!==null;){$=K;var L=$.sibling,H=$.return;if(vd($),$===O){K=null;break}if(L!==null){L.return=H,K=L;break}K=H}}}var G=f.alternate;if(G!==null){var J=G.child;if(J!==null){G.child=null;do{var Fe=J.sibling;J.sibling=null,J=Fe}while(J!==null)}}K=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,K=g;else e:for(;K!==null;){if(f=K,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Ss(9,f,f.return)}var C=f.sibling;if(C!==null){C.return=f.return,K=C;break e}K=f.return}}var j=e.current;for(K=j;K!==null;){g=K;var R=g.child;if((g.subtreeFlags&2064)!==0&&R!==null)R.return=g,K=R;else e:for(g=j;K!==null;){if(w=K,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:Fi(9,w)}}catch(Y){$e(w,w.return,Y)}if(w===g){K=null;break e}var M=w.sibling;if(M!==null){M.return=w.return,K=M;break e}K=w.return}}if(xe=d,xr(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ei,e)}catch{}o=!0}return o}finally{je=i,At.transition=t}}return!1}function Ad(e,t,i){t=Sn(i,t),t=Yc(e,t,1),e=_r(e,t,1),t=dt(),e!==null&&(Xn(e,1,t),vt(e,t))}function $e(e,t,i){if(e.tag===3)Ad(e,e,i);else for(;t!==null;){if(t.tag===3){Ad(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(kr===null||!kr.has(o))){e=Sn(i,e),e=Xc(t,e,1),t=_r(t,e,1),e=dt(),t!==null&&(Xn(t,1,e),vt(t,e));break}}t=t.return}}function om(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&i,Qe===e&&(et&i)===i&&(He===4||He===3&&(et&130023424)===et&&500>Me()-el?Hr(e,0):Zo|=i),vt(e,t)}function Id(e,t){t===0&&((e.mode&1)===0?t=1:(t=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var i=dt();e=sr(e,t),e!==null&&(Xn(e,t,i),vt(e,i))}function lm(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Id(e,i)}function um(e,t){var i=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(t),Id(e,i)}var Ld;Ld=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)mt=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return mt=!1,Qp(e,t,i);mt=(e.flags&131072)!==0}else mt=!1,Ae&&(t.flags&1048576)!==0&&pc(t,ji,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Bi(e,t),e=t.pendingProps;var d=vn(t,st.current);kn(t,i),d=Po(null,t,o,e,d,i);var f=Oo();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(o)?(f=!0,_i(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,jo(t),d.updater=$i,t.stateNode=d,d._reactInternals=t,Uo(t,o,e,i),t=zo(null,t,o,!0,f,i)):(t.tag=0,Ae&&f&&po(t),ct(null,t,d,i),t=t.child),t;case 16:o=t.elementType;e:{switch(Bi(e,t),e=t.pendingProps,d=o._init,o=d(o._payload),t.type=o,d=t.tag=dm(o),e=Mt(o,e),d){case 0:t=Fo(null,t,o,e,i);break e;case 1:t=od(null,t,o,e,i);break e;case 11:t=rd(null,t,o,e,i);break e;case 14:t=nd(null,t,o,Mt(o.type,e),i);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Mt(o,d),Fo(e,t,o,d,i);case 1:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Mt(o,d),od(e,t,o,d,i);case 3:e:{if(ld(t),e===null)throw Error(s(387));o=t.pendingProps,f=t.memoizedState,d=f.element,kc(e,t),Ri(t,o,null,i);var g=t.memoizedState;if(o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=Sn(Error(s(423)),t),t=ud(e,t,o,i,d);break e}else if(o!==d){d=Sn(Error(s(424)),t),t=ud(e,t,o,i,d);break e}else for(bt=gr(t.stateNode.containerInfo.firstChild),_t=t,Ae=!0,Bt=null,i=_c(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(wn(),o===d){t=ar(e,t,i);break e}ct(e,t,o,i)}t=t.child}return t;case 5:return Nc(t),e===null&&vo(t),o=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,g=d.children,oo(o,d)?g=null:f!==null&&oo(o,f)&&(t.flags|=32),ad(e,t),ct(e,t,g,i),t.child;case 6:return e===null&&vo(t),null;case 13:return cd(e,t,i);case 4:return So(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=_n(t,null,o,i):ct(e,t,o,i),t.child;case 11:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Mt(o,d),rd(e,t,o,d,i);case 7:return ct(e,t,t.pendingProps,i),t.child;case 8:return ct(e,t,t.pendingProps.children,i),t.child;case 12:return ct(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(o=t.type._context,d=t.pendingProps,f=t.memoizedProps,g=d.value,Te(Ei,o._currentValue),o._currentValue=g,f!==null)if(Ut(f.value,g)){if(f.children===d.children&&!ft.current){t=ar(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var w=f.dependencies;if(w!==null){g=f.child;for(var k=w.firstContext;k!==null;){if(k.context===o){if(f.tag===1){k=ir(-1,i&-i),k.tag=2;var O=f.updateQueue;if(O!==null){O=O.shared;var $=O.pending;$===null?k.next=k:(k.next=$.next,$.next=k),O.pending=k}}f.lanes|=i,k=f.alternate,k!==null&&(k.lanes|=i),bo(f.return,i,t),w.lanes|=i;break}k=k.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=i,w=g.alternate,w!==null&&(w.lanes|=i),bo(g,i,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}ct(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,o=t.pendingProps.children,kn(t,i),d=Pt(d),o=o(d),t.flags|=1,ct(e,t,o,i),t.child;case 14:return o=t.type,d=Mt(o,t.pendingProps),d=Mt(o.type,d),nd(e,t,o,d,i);case 15:return sd(e,t,t.type,t.pendingProps,i);case 17:return o=t.type,d=t.pendingProps,d=t.elementType===o?d:Mt(o,d),Bi(e,t),t.tag=1,pt(o)?(e=!0,_i(t)):e=!1,kn(t,i),Jc(t,o,d),Uo(t,o,d,i),zo(null,t,o,!0,e,i);case 19:return hd(e,t,i);case 22:return id(e,t,i)}throw Error(s(156,t.tag))};function Dd(e,t){return mu(e,t)}function cm(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,i,o){return new cm(e,t,i,o)}function ll(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dm(e){if(typeof e=="function")return ll(e)?1:0;if(e!=null){if(e=e.$$typeof,e===be)return 11;if(e===Ne)return 14}return 2}function Er(e,t){var i=e.alternate;return i===null?(i=It(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Qi(e,t,i,o,d,f){var g=2;if(o=e,typeof e=="function")ll(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ce:return Gr(i.children,d,f,t);case ve:g=8,d|=8;break;case Se:return e=It(12,i,t,d|2),e.elementType=Se,e.lanes=f,e;case Ce:return e=It(13,i,t,d),e.elementType=Ce,e.lanes=f,e;case te:return e=It(19,i,t,d),e.elementType=te,e.lanes=f,e;case ke:return Yi(i,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Be:g=10;break e;case Q:g=9;break e;case be:g=11;break e;case Ne:g=14;break e;case De:g=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=It(g,i,t,d),t.elementType=e,t.type=o,t.lanes=f,t}function Gr(e,t,i,o){return e=It(7,e,o,t),e.lanes=i,e}function Yi(e,t,i,o){return e=It(22,e,o,t),e.elementType=ke,e.lanes=i,e.stateNode={isHidden:!1},e}function ul(e,t,i){return e=It(6,e,null,t),e.lanes=i,e}function cl(e,t,i){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hm(e,t,i,o,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Da(0),this.expirationTimes=Da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.identifierPrefix=o,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function dl(e,t,i,o,d,f,g,w,k){return e=new hm(e,t,i,w,k),t===1?(t=1,f===!0&&(t|=8)):t=0,f=It(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(f),e}function fm(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function $d(e){if(!e)return yr;e=e._reactInternals;e:{if(Dr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(pt(i))return dc(e,i,t)}return t}function Ud(e,t,i,o,d,f,g,w,k){return e=dl(i,o,!0,e,d,f,g,w,k),e.context=$d(null),i=e.current,o=dt(),d=Sr(i),f=ir(o,d),f.callback=t??null,_r(i,f,d),e.current.lanes=d,Xn(e,d,o),vt(e,o),e}function Xi(e,t,i,o){var d=t.current,f=dt(),g=Sr(d);return i=$d(i),t.context===null?t.context=i:t.pendingContext=i,t=ir(f,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=_r(d,t,g),e!==null&&(qt(e,d,g,f),Ti(e,d,g)),g}function Zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function hl(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}function pm(){return null}var Md=typeof reportError=="function"?reportError:function(e){console.error(e)};function fl(e){this._internalRoot=e}ea.prototype.render=fl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Xi(e,t,null,null)},ea.prototype.unmount=fl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){Xi(null,e,null,null)}),t[er]=null}};function ea(e){this._internalRoot=e}ea.prototype.unstable_scheduleHydration=function(e){if(e){var t=ku();e={blockedOn:null,target:e,priority:t};for(var i=0;i<fr.length&&t!==0&&t<fr[i].priority;i++);fr.splice(i,0,e),i===0&&Nu(e)}};function pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fd(){}function mm(e,t,i,o,d){if(d){if(typeof o=="function"){var f=o;o=function(){var O=Zi(g);f.call(O)}}var g=Ud(t,o,e,0,null,!1,!1,"",Fd);return e._reactRootContainer=g,e[er]=g.current,hs(e.nodeType===8?e.parentNode:e),Wr(),g}for(;d=e.lastChild;)e.removeChild(d);if(typeof o=="function"){var w=o;o=function(){var O=Zi(k);w.call(O)}}var k=dl(e,0,!1,null,null,!1,!1,"",Fd);return e._reactRootContainer=k,e[er]=k.current,hs(e.nodeType===8?e.parentNode:e),Wr(function(){Xi(t,k,i,o)}),k}function ra(e,t,i,o,d){var f=i._reactRootContainer;if(f){var g=f;if(typeof d=="function"){var w=d;d=function(){var k=Zi(g);w.call(k)}}Xi(t,g,e,d)}else g=mm(i,t,e,d,o);return Zi(g)}_u=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Yn(t.pendingLanes);i!==0&&($a(t,i|1),vt(t,Me()),(xe&6)===0&&(Cn=Me()+500,xr()))}break;case 13:Wr(function(){var o=sr(e,1);if(o!==null){var d=dt();qt(o,e,1,d)}}),hl(e,1)}},Ua=function(e){if(e.tag===13){var t=sr(e,134217728);if(t!==null){var i=dt();qt(t,e,134217728,i)}hl(e,134217728)}},bu=function(e){if(e.tag===13){var t=Sr(e),i=sr(e,t);if(i!==null){var o=dt();qt(i,e,t,o)}hl(e,t)}},ku=function(){return je},ju=function(e,t){var i=je;try{return je=e,t()}finally{je=i}},Ra=function(e,t,i){switch(t){case"input":if(me(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var d=xi(o);if(!d)throw Error(s(90));nn(o),me(o,d)}}}break;case"textarea":Js(e,i);break;case"select":t=i.value,t!=null&&Ge(e,!!i.multiple,t,!1)}},lu=il,uu=Wr;var gm={usingClientEntryPoint:!1,Events:[ms,mn,xi,au,ou,il]},Ts={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vm={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fu(e),e===null?null:e.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||pm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!na.isDisabled&&na.supportsFiber)try{ei=na.inject(vm),Gt=na}catch{}}return yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gm,yt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pl(t))throw Error(s(200));return fm(e,t,null,i)},yt.createRoot=function(e,t){if(!pl(e))throw Error(s(299));var i=!1,o="",d=Md;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=dl(e,1,!1,null,null,i,!1,o,d),e[er]=t.current,hs(e.nodeType===8?e.parentNode:e),new fl(t)},yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=fu(t),e=e===null?null:e.stateNode,e},yt.flushSync=function(e){return Wr(e)},yt.hydrate=function(e,t,i){if(!ta(t))throw Error(s(200));return ra(null,e,t,!0,i)},yt.hydrateRoot=function(e,t,i){if(!pl(e))throw Error(s(405));var o=i!=null&&i.hydratedSources||null,d=!1,f="",g=Md;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=Ud(t,null,e,1,i??null,d,!1,f,g),e[er]=t.current,hs(e),o)for(e=0;e<o.length;e++)i=o[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new ea(t)},yt.render=function(e,t,i){if(!ta(t))throw Error(s(200));return ra(null,e,t,!1,i)},yt.unmountComponentAtNode=function(e){if(!ta(e))throw Error(s(40));return e._reactRootContainer?(Wr(function(){ra(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1},yt.unstable_batchedUpdates=il,yt.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!ta(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return ra(e,t,i,!1,o)},yt.version="18.3.1-next-f1338f8080-20240426",yt}var Jd;function Dh(){if(Jd)return vl.exports;Jd=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),vl.exports=Nm(),vl.exports}var Qd;function Em(){if(Qd)return sa;Qd=1;var n=Dh();return sa.createRoot=n.createRoot,sa.hydrateRoot=n.hydrateRoot,sa}var Cm=Em(),E=Jl();const Tm=wm(E),Rm=xm({__proto__:null,default:Tm},[E]);Dh();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ls(){return Ls=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},Ls.apply(this,arguments)}var Pr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Pr||(Pr={}));const Yd="popstate";function Pm(n){n===void 0&&(n={});function r(a,u){let{pathname:c,search:h,hash:p}=a.location;return Ol("",{pathname:c,search:h,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(a,u){return typeof u=="string"?u:fa(u)}return Am(r,s,null,n)}function ze(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Ql(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Om(){return Math.random().toString(36).substr(2,8)}function Xd(n,r){return{usr:n.state,key:n.key,idx:r}}function Ol(n,r,s,a){return s===void 0&&(s=null),Ls({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof r=="string"?Fn(r):r,{state:s,key:r&&r.key||a||Om()})}function fa(n){let{pathname:r="/",search:s="",hash:a=""}=n;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Fn(n){let r={};if(n){let s=n.indexOf("#");s>=0&&(r.hash=n.substr(s),n=n.substr(0,s));let a=n.indexOf("?");a>=0&&(r.search=n.substr(a),n=n.substr(0,a)),n&&(r.pathname=n)}return r}function Am(n,r,s,a){a===void 0&&(a={});let{window:u=document.defaultView,v5Compat:c=!1}=a,h=u.history,p=Pr.Pop,m=null,v=x();v==null&&(v=0,h.replaceState(Ls({},h.state,{idx:v}),""));function x(){return(h.state||{idx:null}).idx}function _(){p=Pr.Pop;let T=x(),D=T==null?null:T-v;v=T,m&&m({action:p,location:P.location,delta:D})}function y(T,D){p=Pr.Push;let U=Ol(P.location,T,D);v=x()+1;let A=Xd(U,v),q=P.createHref(U);try{h.pushState(A,"",q)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;u.location.assign(q)}c&&m&&m({action:p,location:P.location,delta:1})}function b(T,D){p=Pr.Replace;let U=Ol(P.location,T,D);v=x();let A=Xd(U,v),q=P.createHref(U);h.replaceState(A,"",q),c&&m&&m({action:p,location:P.location,delta:0})}function S(T){let D=u.location.origin!=="null"?u.location.origin:u.location.href,U=typeof T=="string"?T:fa(T);return U=U.replace(/ $/,"%20"),ze(D,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,D)}let P={get action(){return p},get location(){return n(u,h)},listen(T){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(Yd,_),m=T,()=>{u.removeEventListener(Yd,_),m=null}},createHref(T){return r(u,T)},createURL:S,encodeLocation(T){let D=S(T);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:y,replace:b,go(T){return h.go(T)}};return P}var Zd;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Zd||(Zd={}));function Im(n,r,s){return s===void 0&&(s="/"),Lm(n,r,s)}function Lm(n,r,s,a){let u=typeof r=="string"?Fn(r):r,c=Yl(u.pathname||"/",s);if(c==null)return null;let h=$h(n);Dm(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let v=Gm(c);p=Wm(h[m],v)}return p}function $h(n,r,s,a){r===void 0&&(r=[]),s===void 0&&(s=[]),a===void 0&&(a="");let u=(c,h,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};m.relativePath.startsWith("/")&&(ze(m.relativePath.startsWith(a),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(a.length));let v=Or([a,m.relativePath]),x=s.concat(m);c.children&&c.children.length>0&&(ze(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),$h(c.children,r,x,v)),!(c.path==null&&!c.index)&&r.push({path:v,score:qm(v,c.index),routesMeta:x})};return n.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))u(c,h);else for(let m of Uh(c.path))u(c,h,m)}),r}function Uh(n){let r=n.split("/");if(r.length===0)return[];let[s,...a]=r,u=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return u?[c,""]:[c];let h=Uh(a.join("/")),p=[];return p.push(...h.map(m=>m===""?c:[c,m].join("/"))),u&&p.push(...h),p.map(m=>n.startsWith("/")&&m===""?"/":m)}function Dm(n){n.sort((r,s)=>r.score!==s.score?s.score-r.score:Vm(r.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const $m=/^:[\w-]+$/,Um=3,Bm=2,Mm=1,Fm=10,zm=-2,eh=n=>n==="*";function qm(n,r){let s=n.split("/"),a=s.length;return s.some(eh)&&(a+=zm),r&&(a+=Bm),s.filter(u=>!eh(u)).reduce((u,c)=>u+($m.test(c)?Um:c===""?Mm:Fm),a)}function Vm(n,r){return n.length===r.length&&n.slice(0,-1).every((a,u)=>a===r[u])?n[n.length-1]-r[r.length-1]:0}function Wm(n,r,s){let{routesMeta:a}=n,u={},c="/",h=[];for(let p=0;p<a.length;++p){let m=a[p],v=p===a.length-1,x=c==="/"?r:r.slice(c.length)||"/",_=Hm({path:m.relativePath,caseSensitive:m.caseSensitive,end:v},x),y=m.route;if(!_)return null;Object.assign(u,_.params),h.push({params:u,pathname:Or([c,_.pathname]),pathnameBase:Zm(Or([c,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(c=Or([c,_.pathnameBase]))}return h}function Hm(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,a]=Km(n.path,n.caseSensitive,n.end),u=r.match(s);if(!u)return null;let c=u[0],h=c.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:a.reduce((v,x,_)=>{let{paramName:y,isOptional:b}=x;if(y==="*"){let P=p[_]||"";h=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const S=p[_];return b&&!S?v[y]=void 0:v[y]=(S||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:n}}function Km(n,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),Ql(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let a=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(a.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(a.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),a]}function Gm(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ql(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),n}}function Yl(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,a=n.charAt(s);return a&&a!=="/"?null:n.slice(s)||"/"}const Jm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qm=n=>Jm.test(n);function Ym(n,r){r===void 0&&(r="/");let{pathname:s,search:a="",hash:u=""}=typeof n=="string"?Fn(n):n,c;if(s)if(Qm(s))c=s;else{if(s.includes("//")){let h=s;s=s.replace(/\/\/+/g,"/"),Ql(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+s))}s.startsWith("/")?c=th(s.substring(1),"/"):c=th(s,r)}else c=r;return{pathname:c,search:eg(a),hash:tg(u)}}function th(n,r){let s=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function wl(n,r,s,a){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xm(n){return n.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function Xl(n,r){let s=Xm(n);return r?s.map((a,u)=>u===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Zl(n,r,s,a){a===void 0&&(a=!1);let u;typeof n=="string"?u=Fn(n):(u=Ls({},n),ze(!u.pathname||!u.pathname.includes("?"),wl("?","pathname","search",u)),ze(!u.pathname||!u.pathname.includes("#"),wl("#","pathname","hash",u)),ze(!u.search||!u.search.includes("#"),wl("#","search","hash",u)));let c=n===""||u.pathname==="",h=c?"/":u.pathname,p;if(h==null)p=s;else{let _=r.length-1;if(!a&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),_-=1;u.pathname=y.join("/")}p=_>=0?r[_]:"/"}let m=Ym(u,p),v=h&&h!=="/"&&h.endsWith("/"),x=(c||h===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(v||x)&&(m.pathname+="/"),m}const Or=n=>n.join("/").replace(/\/\/+/g,"/"),Zm=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),eg=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tg=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function rg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Bh=["post","put","patch","delete"];new Set(Bh);const ng=["get",...Bh];new Set(ng);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ds(){return Ds=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},Ds.apply(this,arguments)}const eu=E.createContext(null),sg=E.createContext(null),Ar=E.createContext(null),xa=E.createContext(null),Zt=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Mh=E.createContext(null);function ig(n,r){let{relative:s}=r===void 0?{}:r;zn()||ze(!1);let{basename:a,navigator:u}=E.useContext(Ar),{hash:c,pathname:h,search:p}=qh(n,{relative:s}),m=h;return a!=="/"&&(m=h==="/"?a:Or([a,h])),u.createHref({pathname:m,search:p,hash:c})}function zn(){return E.useContext(xa)!=null}function rn(){return zn()||ze(!1),E.useContext(xa).location}function Fh(n){E.useContext(Ar).static||E.useLayoutEffect(n)}function Lt(){let{isDataRoute:n}=E.useContext(Zt);return n?wg():ag()}function ag(){zn()||ze(!1);let n=E.useContext(eu),{basename:r,future:s,navigator:a}=E.useContext(Ar),{matches:u}=E.useContext(Zt),{pathname:c}=rn(),h=JSON.stringify(Xl(u,s.v7_relativeSplatPath)),p=E.useRef(!1);return Fh(()=>{p.current=!0}),E.useCallback(function(v,x){if(x===void 0&&(x={}),!p.current)return;if(typeof v=="number"){a.go(v);return}let _=Zl(v,JSON.parse(h),c,x.relative==="path");n==null&&r!=="/"&&(_.pathname=_.pathname==="/"?r:Or([r,_.pathname])),(x.replace?a.replace:a.push)(_,x.state,x)},[r,a,h,c,n])}const og=E.createContext(null);function lg(n){let r=E.useContext(Zt).outlet;return r&&E.createElement(og.Provider,{value:n},r)}function zh(){let{matches:n}=E.useContext(Zt),r=n[n.length-1];return r?r.params:{}}function qh(n,r){let{relative:s}=r===void 0?{}:r,{future:a}=E.useContext(Ar),{matches:u}=E.useContext(Zt),{pathname:c}=rn(),h=JSON.stringify(Xl(u,a.v7_relativeSplatPath));return E.useMemo(()=>Zl(n,JSON.parse(h),c,s==="path"),[n,h,c,s])}function ug(n,r){return cg(n,r)}function cg(n,r,s,a){zn()||ze(!1);let{navigator:u}=E.useContext(Ar),{matches:c}=E.useContext(Zt),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let v=rn(),x;if(r){var _;let T=typeof r=="string"?Fn(r):r;m==="/"||(_=T.pathname)!=null&&_.startsWith(m)||ze(!1),x=T}else x=v;let y=x.pathname||"/",b=y;if(m!=="/"){let T=m.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=Im(n,{pathname:b}),P=mg(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},p,T.params),pathname:Or([m,u.encodeLocation?u.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?m:Or([m,u.encodeLocation?u.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),c,s,a);return r&&P?E.createElement(xa.Provider,{value:{location:Ds({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Pr.Pop}},P):P}function dg(){let n=xg(),r=rg(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},r),s?E.createElement("pre",{style:u},s):null,null)}const hg=E.createElement(dg,null);class fg extends E.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?E.createElement(Zt.Provider,{value:this.props.routeContext},E.createElement(Mh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pg(n){let{routeContext:r,match:s,children:a}=n,u=E.useContext(eu);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),E.createElement(Zt.Provider,{value:r},a)}function mg(n,r,s,a){var u;if(r===void 0&&(r=[]),s===void 0&&(s=null),a===void 0&&(a=null),n==null){var c;if(!s)return null;if(s.errors)n=s.matches;else if((c=a)!=null&&c.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let h=n,p=(u=s)==null?void 0:u.errors;if(p!=null){let x=h.findIndex(_=>_.route.id&&p?.[_.route.id]!==void 0);x>=0||ze(!1),h=h.slice(0,Math.min(h.length,x+1))}let m=!1,v=-1;if(s&&a&&a.v7_partialHydration)for(let x=0;x<h.length;x++){let _=h[x];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(v=x),_.route.id){let{loaderData:y,errors:b}=s,S=_.route.loader&&y[_.route.id]===void 0&&(!b||b[_.route.id]===void 0);if(_.route.lazy||S){m=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((x,_,y)=>{let b,S=!1,P=null,T=null;s&&(b=p&&_.route.id?p[_.route.id]:void 0,P=_.route.errorElement||hg,m&&(v<0&&y===0?(_g("route-fallback"),S=!0,T=null):v===y&&(S=!0,T=_.route.hydrateFallbackElement||null)));let D=r.concat(h.slice(0,y+1)),U=()=>{let A;return b?A=P:S?A=T:_.route.Component?A=E.createElement(_.route.Component,null):_.route.element?A=_.route.element:A=x,E.createElement(pg,{match:_,routeContext:{outlet:x,matches:D,isDataRoute:s!=null},children:A})};return s&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?E.createElement(fg,{location:s.location,revalidation:s.revalidation,component:P,error:b,children:U(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):U()},null)}var Vh=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Vh||{}),Wh=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Wh||{});function gg(n){let r=E.useContext(eu);return r||ze(!1),r}function vg(n){let r=E.useContext(sg);return r||ze(!1),r}function yg(n){let r=E.useContext(Zt);return r||ze(!1),r}function Hh(n){let r=yg(),s=r.matches[r.matches.length-1];return s.route.id||ze(!1),s.route.id}function xg(){var n;let r=E.useContext(Mh),s=vg(),a=Hh();return r!==void 0?r:(n=s.errors)==null?void 0:n[a]}function wg(){let{router:n}=gg(Vh.UseNavigateStable),r=Hh(Wh.UseNavigateStable),s=E.useRef(!1);return Fh(()=>{s.current=!0}),E.useCallback(function(u,c){c===void 0&&(c={}),s.current&&(typeof u=="number"?n.navigate(u):n.navigate(u,Ds({fromRouteId:r},c)))},[n,r])}const rh={};function _g(n,r,s){rh[n]||(rh[n]=!0)}function bg(n,r){n?.v7_startTransition,n?.v7_relativeSplatPath}function ha(n){let{to:r,replace:s,state:a,relative:u}=n;zn()||ze(!1);let{future:c,static:h}=E.useContext(Ar),{matches:p}=E.useContext(Zt),{pathname:m}=rn(),v=Lt(),x=Zl(r,Xl(p,c.v7_relativeSplatPath),m,u==="path"),_=JSON.stringify(x);return E.useEffect(()=>v(JSON.parse(_),{replace:s,state:a,relative:u}),[v,_,u,s,a]),null}function Al(n){return lg(n.context)}function ht(n){ze(!1)}function kg(n){let{basename:r="/",children:s=null,location:a,navigationType:u=Pr.Pop,navigator:c,static:h=!1,future:p}=n;zn()&&ze(!1);let m=r.replace(/^\/*/,"/"),v=E.useMemo(()=>({basename:m,navigator:c,static:h,future:Ds({v7_relativeSplatPath:!1},p)}),[m,p,c,h]);typeof a=="string"&&(a=Fn(a));let{pathname:x="/",search:_="",hash:y="",state:b=null,key:S="default"}=a,P=E.useMemo(()=>{let T=Yl(x,m);return T==null?null:{location:{pathname:T,search:_,hash:y,state:b,key:S},navigationType:u}},[m,x,_,y,b,S,u]);return P==null?null:E.createElement(Ar.Provider,{value:v},E.createElement(xa.Provider,{children:s,value:P}))}function jg(n){let{children:r,location:s}=n;return ug(Il(r),s)}new Promise(()=>{});function Il(n,r){r===void 0&&(r=[]);let s=[];return E.Children.forEach(n,(a,u)=>{if(!E.isValidElement(a))return;let c=[...r,u];if(a.type===E.Fragment){s.push.apply(s,Il(a.props.children,c));return}a.type!==ht&&ze(!1),!a.props.index||!a.props.children||ze(!1);let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=Il(a.props.children,c)),s.push(h)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},Ll.apply(this,arguments)}function Sg(n,r){if(n==null)return{};var s={},a=Object.keys(n),u,c;for(c=0;c<a.length;c++)u=a[c],!(r.indexOf(u)>=0)&&(s[u]=n[u]);return s}function Ng(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Eg(n,r){return n.button===0&&(!r||r==="_self")&&!Ng(n)}function Dl(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,s)=>{let a=n[s];return r.concat(Array.isArray(a)?a.map(u=>[s,u]):[[s,a]])},[]))}function Cg(n,r){let s=Dl(n);return r&&r.forEach((a,u)=>{s.has(u)||r.getAll(u).forEach(c=>{s.append(u,c)})}),s}const Tg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rg="6";try{window.__reactRouterVersion=Rg}catch{}const Pg="startTransition",nh=Rm[Pg];function Og(n){let{basename:r,children:s,future:a,window:u}=n,c=E.useRef();c.current==null&&(c.current=Pm({window:u,v5Compat:!0}));let h=c.current,[p,m]=E.useState({action:h.action,location:h.location}),{v7_startTransition:v}=a||{},x=E.useCallback(_=>{v&&nh?nh(()=>m(_)):m(_)},[m,v]);return E.useLayoutEffect(()=>h.listen(x),[h,x]),E.useEffect(()=>bg(a),[a]),E.createElement(kg,{basename:r,children:s,location:p.location,navigationType:p.action,navigator:h,future:a})}const Ag=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ig=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pa=E.forwardRef(function(r,s){let{onClick:a,relative:u,reloadDocument:c,replace:h,state:p,target:m,to:v,preventScrollReset:x,viewTransition:_}=r,y=Sg(r,Tg),{basename:b}=E.useContext(Ar),S,P=!1;if(typeof v=="string"&&Ig.test(v)&&(S=v,Ag))try{let A=new URL(window.location.href),q=v.startsWith("//")?new URL(A.protocol+v):new URL(v),oe=Yl(q.pathname,b);q.origin===A.origin&&oe!=null?v=oe+q.search+q.hash:P=!0}catch{}let T=ig(v,{relative:u}),D=Lg(v,{replace:h,state:p,target:m,preventScrollReset:x,relative:u,viewTransition:_});function U(A){a&&a(A),A.defaultPrevented||D(A)}return E.createElement("a",Ll({},y,{href:S||T,onClick:P||c?a:U,ref:s,target:m}))});var sh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(sh||(sh={}));var ih;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ih||(ih={}));function Lg(n,r){let{target:s,replace:a,state:u,preventScrollReset:c,relative:h,viewTransition:p}=r===void 0?{}:r,m=Lt(),v=rn(),x=qh(n,{relative:h});return E.useCallback(_=>{if(Eg(_,s)){_.preventDefault();let y=a!==void 0?a:fa(v)===fa(x);m(n,{replace:y,state:u,preventScrollReset:c,relative:h,viewTransition:p})}},[v,m,x,a,u,s,n,c,h,p])}function Dg(n){let r=E.useRef(Dl(n)),s=E.useRef(!1),a=rn(),u=E.useMemo(()=>Cg(a.search,s.current?null:r.current),[a.search]),c=Lt(),h=E.useCallback((p,m)=>{const v=Dl(typeof p=="function"?p(u):p);s.current=!0,c("?"+v,m)},[c,u]);return[u,h]}function wa(n,r){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&r.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(n);u<a.length;u++)r.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(n,a[u])&&(s[a[u]]=n[a[u]]);return s}function $g(n,r,s,a){function u(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(_){h(_)}}function m(x){try{v(a.throw(x))}catch(_){h(_)}}function v(x){x.done?c(x.value):u(x.value).then(p,m)}v((a=a.apply(n,r||[])).next())})}const Ug=n=>n?(...r)=>n(...r):(...r)=>fetch(...r);class tu extends Error{constructor(r,s="FunctionsError",a){super(r),this.name=s,this.context=a}}class Bg extends tu{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class ah extends tu{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class oh extends tu{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var $l;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})($l||($l={}));class Mg{constructor(r,{headers:s={},customFetch:a,region:u=$l.Any}={}){this.url=r,this.headers=s,this.region=u,this.fetch=Ug(a)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return $g(this,arguments,void 0,function*(s,a={}){var u;let c,h;try{const{headers:p,method:m,body:v,signal:x,timeout:_}=a;let y={},{region:b}=a;b||(b=this.region);const S=new URL(`${this.url}/${s}`);b&&b!=="any"&&(y["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let P;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",P=v):typeof v=="string"?(y["Content-Type"]="text/plain",P=v):typeof FormData<"u"&&v instanceof FormData?P=v:(y["Content-Type"]="application/json",P=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?P=JSON.stringify(v):P=v;let T=x;_&&(h=new AbortController,c=setTimeout(()=>h.abort(),_),x?(T=h.signal,x.addEventListener("abort",()=>h.abort())):T=h.signal);const D=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),p),body:P,signal:T}).catch(oe=>{throw new Bg(oe)}),U=D.headers.get("x-relay-error");if(U&&U==="true")throw new ah(D);if(!D.ok)throw new oh(D);let A=((u=D.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),q;return A==="application/json"?q=yield D.json():A==="application/octet-stream"||A==="application/pdf"?q=yield D.blob():A==="text/event-stream"?q=D:A==="multipart/form-data"?q=yield D.formData():q=yield D.text(),{data:q,error:null,response:D}}catch(p){return{data:null,error:p,response:p instanceof oh||p instanceof ah?p.context:void 0}}finally{c&&clearTimeout(c)}})}}var Fg=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},zg=class{constructor(n){var r,s,a;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(r=n.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(a=n.urlLengthLimit)!==null&&a!==void 0?a:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,r){return this.headers=new Headers(this.headers),this.headers.set(n,r),this}then(n,r){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let h=null,p=null,m=null,v=c.status,x=c.statusText;if(c.ok){var _,y;if(s.method!=="HEAD"){var b;const D=await c.text();D===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((b=s.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?p=D:p=JSON.parse(D))}const P=(_=s.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),T=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");P&&T&&T.length>1&&(m=parseInt(T[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,v=406,x="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var S;const P=await c.text();try{h=JSON.parse(P),Array.isArray(h)&&c.status===404&&(p=[],h=null,v=200,x="OK")}catch{c.status===404&&P===""?(v=204,x="No Content"):h={message:P}}if(h&&s.isMaybeSingle&&(!(h==null||(S=h.details)===null||S===void 0)&&S.includes("0 rows"))&&(h=null,v=200,x="OK"),h&&s.shouldThrowOnError)throw new Fg(h)}return{error:h,data:p,count:m,status:v,statusText:x}});return this.shouldThrowOnError||(u=u.catch(c=>{var h;let p="",m="",v="";const x=c?.cause;if(x){var _,y,b,S;const D=(_=x?.message)!==null&&_!==void 0?_:"",U=(y=x?.code)!==null&&y!==void 0?y:"";p=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,p+=`

Caused by: ${(S=x?.name)!==null&&S!==void 0?S:"Error"}: ${D}`,U&&(p+=` (${U})`),x?.stack&&(p+=`
${x.stack}`)}else{var P;p=(P=c?.stack)!==null&&P!==void 0?P:""}const T=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(v="",m="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(x?.name==="HeadersOverflowError"||x?.code==="UND_ERR_HEADERS_OVERFLOW")&&(v="",m="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(m+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=c?.name)!==null&&h!==void 0?h:"FetchError"}: ${c?.message}`,details:p,hint:m,code:v},data:null,count:null,status:0,statusText:""}})),u.then(n,r)}returns(){return this}overrideTypes(){return this}},qg=class extends zg{select(n){let r=!1;const s=(n??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:r=!0,nullsFirst:s,foreignTable:a,referencedTable:u=a}={}){const c=u?`${u}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${n}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,r,{foreignTable:s,referencedTable:a=s}={}){const u=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(c,`${r-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:r=!1,settings:s=!1,buffers:a=!1,wal:u=!1,format:c="text"}={}){var h;const p=[n?"analyze":null,r?"verbose":null,s?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${p};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const lh=new RegExp("[,()]");var Dn=class extends qg{eq(n,r){return this.url.searchParams.append(n,`eq.${r}`),this}neq(n,r){return this.url.searchParams.append(n,`neq.${r}`),this}gt(n,r){return this.url.searchParams.append(n,`gt.${r}`),this}gte(n,r){return this.url.searchParams.append(n,`gte.${r}`),this}lt(n,r){return this.url.searchParams.append(n,`lt.${r}`),this}lte(n,r){return this.url.searchParams.append(n,`lte.${r}`),this}like(n,r){return this.url.searchParams.append(n,`like.${r}`),this}likeAllOf(n,r){return this.url.searchParams.append(n,`like(all).{${r.join(",")}}`),this}likeAnyOf(n,r){return this.url.searchParams.append(n,`like(any).{${r.join(",")}}`),this}ilike(n,r){return this.url.searchParams.append(n,`ilike.${r}`),this}ilikeAllOf(n,r){return this.url.searchParams.append(n,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(n,r){return this.url.searchParams.append(n,`ilike(any).{${r.join(",")}}`),this}regexMatch(n,r){return this.url.searchParams.append(n,`match.${r}`),this}regexIMatch(n,r){return this.url.searchParams.append(n,`imatch.${r}`),this}is(n,r){return this.url.searchParams.append(n,`is.${r}`),this}isDistinct(n,r){return this.url.searchParams.append(n,`isdistinct.${r}`),this}in(n,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&lh.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,r){const s=Array.from(new Set(r)).map(a=>typeof a=="string"&&lh.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cs.{${r.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(r)}`),this}containedBy(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cd.{${r.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(r)}`),this}rangeGt(n,r){return this.url.searchParams.append(n,`sr.${r}`),this}rangeGte(n,r){return this.url.searchParams.append(n,`nxl.${r}`),this}rangeLt(n,r){return this.url.searchParams.append(n,`sl.${r}`),this}rangeLte(n,r){return this.url.searchParams.append(n,`nxr.${r}`),this}rangeAdjacent(n,r){return this.url.searchParams.append(n,`adj.${r}`),this}overlaps(n,r){return typeof r=="string"?this.url.searchParams.append(n,`ov.${r}`):this.url.searchParams.append(n,`ov.{${r.join(",")}}`),this}textSearch(n,r,{config:s,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${u}fts${c}.${r}`),this}match(n){return Object.entries(n).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(n,r,s){return this.url.searchParams.append(n,`not.${r}.${s}`),this}or(n,{foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${n})`),this}filter(n,r,s){return this.url.searchParams.append(n,`${r}.${s}`),this}},Vg=class{constructor(n,{headers:r={},schema:s,fetch:a,urlLengthLimit:u=8e3}){this.url=n,this.headers=new Headers(r),this.schema=s,this.fetch=a,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,r){const{head:s=!1,count:a}=r??{},u=s?"HEAD":"GET";let c=!1;const h=(n??"*").split("").map(v=>/\s/.test(v)&&!c?"":(v==='"'&&(c=!c),v)).join(""),{url:p,headers:m}=this.cloneRequestState();return p.searchParams.set("select",h),a&&m.append("Prefer",`count=${a}`),new Dn({method:u,url:p,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:r,defaultToNull:s=!0}={}){var a;const u="POST",{url:c,headers:h}=this.cloneRequestState();if(r&&h.append("Prefer",`count=${r}`),s||h.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(p.length>0){const m=[...new Set(p)].map(v=>`"${v}"`);c.searchParams.set("columns",m.join(","))}}return new Dn({method:u,url:c,headers:h,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:r,ignoreDuplicates:s=!1,count:a,defaultToNull:u=!0}={}){var c;const h="POST",{url:p,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&p.searchParams.set("on_conflict",r),a&&m.append("Prefer",`count=${a}`),u||m.append("Prefer","missing=default"),Array.isArray(n)){const v=n.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(v.length>0){const x=[...new Set(v)].map(_=>`"${_}"`);p.searchParams.set("columns",x.join(","))}}return new Dn({method:h,url:p,headers:m,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:r}={}){var s;const a="PATCH",{url:u,headers:c}=this.cloneRequestState();return r&&c.append("Prefer",`count=${r}`),new Dn({method:a,url:u,headers:c,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var r;const s="DELETE",{url:a,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new Dn({method:s,url:a,headers:u,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}};function $s(n){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$s(n)}function Wg(n,r){if($s(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if($s(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Hg(n){var r=Wg(n,"string");return $s(r)=="symbol"?r:r+""}function Kg(n,r,s){return(r=Hg(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function uh(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function ia(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?uh(Object(s),!0).forEach(function(a){Kg(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):uh(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}var Gg=class Kh{constructor(r,{headers:s={},schema:a,fetch:u,timeout:c,urlLengthLimit:h=8e3}={}){this.url=r,this.headers=new Headers(s),this.schemaName=a,this.urlLengthLimit=h;const p=u??globalThis.fetch;c!==void 0&&c>0?this.fetch=(m,v)=>{const x=new AbortController,_=setTimeout(()=>x.abort(),c),y=v?.signal;if(y){if(y.aborted)return clearTimeout(_),p(m,v);const b=()=>{clearTimeout(_),x.abort()};return y.addEventListener("abort",b,{once:!0}),p(m,ia(ia({},v),{},{signal:x.signal})).finally(()=>{clearTimeout(_),y.removeEventListener("abort",b)})}return p(m,ia(ia({},v),{},{signal:x.signal})).finally(()=>clearTimeout(_))}:this.fetch=p}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Vg(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(r){return new Kh(this.url,{headers:this.headers,schema:r,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(r,s={},{head:a=!1,get:u=!1,count:c}={}){var h;let p;const m=new URL(`${this.url}/rpc/${r}`);let v;const x=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(x)),_=a&&Object.values(s).some(x);_?(p="POST",v=s):a||u?(p=a?"HEAD":"GET",Object.entries(s).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{m.searchParams.append(b,S)})):(p="POST",v=s);const y=new Headers(this.headers);return _?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new Dn({method:p,url:m,headers:y,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class Jg{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const a=s.versions;if(a&&a.node){const u=a.node,c=parseInt(u.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const a=this.getWebSocketConstructor();return new a(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Qg="2.94.0",Yg=`realtime-js/${Qg}`,Xg="1.0.0",Gh="2.0.0",ch=Gh,Ul=1e4,Zg=1e3,ev=100;var Tr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Tr||(Tr={}));var Ke;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ke||(Ke={}));var Ht;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ht||(Ht={}));var Bl;(function(n){n.websocket="websocket"})(Bl||(Bl={}));var Xr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Xr||(Xr={}));class tv{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let a=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,a;const u=(a=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(r){var s,a;const u=(a=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},h=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,s,a){var u,c;const h=r.topic,p=(u=r.ref)!==null&&u!==void 0?u:"",m=(c=r.join_ref)!==null&&c!==void 0?c:"",v=r.payload.event,x=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},_=Object.keys(x).length===0?"":JSON.stringify(x);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+h.length+v.length+_.length,b=new ArrayBuffer(this.HEADER_LENGTH+y);let S=new DataView(b),P=0;S.setUint8(P++,this.KINDS.userBroadcastPush),S.setUint8(P++,m.length),S.setUint8(P++,p.length),S.setUint8(P++,h.length),S.setUint8(P++,v.length),S.setUint8(P++,_.length),S.setUint8(P++,s),Array.from(m,D=>S.setUint8(P++,D.charCodeAt(0))),Array.from(p,D=>S.setUint8(P++,D.charCodeAt(0))),Array.from(h,D=>S.setUint8(P++,D.charCodeAt(0))),Array.from(v,D=>S.setUint8(P++,D.charCodeAt(0))),Array.from(_,D=>S.setUint8(P++,D.charCodeAt(0)));var T=new Uint8Array(b.byteLength+a.byteLength);return T.set(new Uint8Array(b),0),T.set(new Uint8Array(a),b.byteLength),T.buffer}decode(r,s){if(this._isArrayBuffer(r)){let a=this._binaryDecode(r);return s(a)}if(typeof r=="string"){const a=JSON.parse(r),[u,c,h,p,m]=a;return s({join_ref:u,ref:c,topic:h,event:p,payload:m})}return s({})}_binaryDecode(r){const s=new DataView(r),a=s.getUint8(0),u=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,u)}}_decodeUserBroadcast(r,s,a){const u=s.getUint8(1),c=s.getUint8(2),h=s.getUint8(3),p=s.getUint8(4);let m=this.HEADER_LENGTH+4;const v=a.decode(r.slice(m,m+u));m=m+u;const x=a.decode(r.slice(m,m+c));m=m+c;const _=a.decode(r.slice(m,m+h));m=m+h;const y=r.slice(m,r.byteLength),b=p===this.JSON_ENCODING?JSON.parse(a.decode(y)):y,S={type:this.BROADCAST_EVENT,event:x,payload:b};return h>0&&(S.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([a])=>s.includes(a)))}}class Jh{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Re||(Re={}));const dh=(n,r,s={})=>{var a;const u=(a=s.skipTypes)!==null&&a!==void 0?a:[];return r?Object.keys(r).reduce((c,h)=>(c[h]=rv(h,n,r,u),c),{}):{}},rv=(n,r,s,a)=>{const u=r.find(p=>p.name===n),c=u?.type,h=s[n];return c&&!a.includes(c)?Qh(c,h):Ml(h)},Qh=(n,r)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return av(r,s)}switch(n){case Re.bool:return nv(r);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return sv(r);case Re.json:case Re.jsonb:return iv(r);case Re.timestamp:return ov(r);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return Ml(r);default:return Ml(r)}},Ml=n=>n,nv=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},sv=n=>{if(typeof n=="string"){const r=parseFloat(n);if(!Number.isNaN(r))return r}return n},iv=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},av=(n,r)=>{if(typeof n!="string")return n;const s=n.length-1,a=n[s];if(n[0]==="{"&&a==="}"){let c;const h=n.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>Qh(r,p))}return n},ov=n=>typeof n=="string"?n.replace(" ","T"):n,Yh=n=>{const r=new URL(n);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class _l{constructor(r,s,a={},u=Ul){this.channel=r,this.event=s,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var a;return this._hasReceived(r)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(a=>a.status===r).forEach(a=>a.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var hh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(hh||(hh={}));class As{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,u,c,h),this.pendingDiffs.forEach(m=>{this.state=As.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},u=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=As.syncDiff(this.state,u,c,h),p())}),this.onJoin((u,c,h)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:c,newPresences:h})}),this.onLeave((u,c,h)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,a,u){const c=this.cloneDeep(r),h=this.transformState(s),p={},m={};return this.map(c,(v,x)=>{h[v]||(m[v]=x)}),this.map(h,(v,x)=>{const _=c[v];if(_){const y=x.map(T=>T.presence_ref),b=_.map(T=>T.presence_ref),S=x.filter(T=>b.indexOf(T.presence_ref)<0),P=_.filter(T=>y.indexOf(T.presence_ref)<0);S.length>0&&(p[v]=S),P.length>0&&(m[v]=P)}else p[v]=x}),this.syncDiff(c,{joins:p,leaves:m},a,u)}static syncDiff(r,s,a,u){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(c,(p,m)=>{var v;const x=(v=r[p])!==null&&v!==void 0?v:[];if(r[p]=this.cloneDeep(m),x.length>0){const _=r[p].map(b=>b.presence_ref),y=x.filter(b=>_.indexOf(b.presence_ref)<0);r[p].unshift(...y)}a(p,x,m)}),this.map(h,(p,m)=>{let v=r[p];if(!v)return;const x=m.map(_=>_.presence_ref);v=v.filter(_=>x.indexOf(_.presence_ref)<0),r[p]=v,u(p,v,m),v.length===0&&delete r[p]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(a=>s(a,r[a]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,a)=>{const u=r[a];return"metas"in u?s[a]=u.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=u,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fh;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(fh||(fh={}));var Is;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Is||(Is={}));var lr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(lr||(lr={}));class Bn{constructor(r,s={config:{}},a){var u,c;if(this.topic=r,this.params=s,this.socket=a,this.bindings={},this.state=Ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new _l(this,Ht.join,this.params,this.timeout),this.rejoinTimer=new Jh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ke.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ht.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new As(this),this.broadcastEndpointURL=Yh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var a,u,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Ke.closed){const{config:{broadcast:h,presence:p,private:m}}=this.params,v=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&u!==void 0?u:[],x=!!this.bindings[Is.PRESENCE]&&this.bindings[Is.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},y={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:v,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(b=>r?.(lr.CHANNEL_ERROR,b)),this._onClose(()=>r?.(lr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},_)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){r?.(lr.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,T=(S=P?.length)!==null&&S!==void 0?S:0,D=[];for(let U=0;U<T;U++){const A=P[U],{filter:{event:q,schema:oe,table:ee,filter:ce}}=A,ve=b&&b[U];if(ve&&ve.event===q&&Bn.isFilterValueEqual(ve.schema,oe)&&Bn.isFilterValueEqual(ve.table,ee)&&Bn.isFilterValueEqual(ve.filter,ce))D.push(Object.assign(Object.assign({},A),{id:ve.id}));else{this.unsubscribe(),this.state=Ke.errored,r?.(lr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,r&&r(lr.SUBSCRIBED);return}}).receive("error",b=>{this.state=Ke.errored,r?.(lr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{r?.(lr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,a){return this.state===Ke.joined&&r===Is.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,a)}async httpSend(r,s,a={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const v=await p.json();m=v.error||v.message||m}catch{}return Promise.reject(new Error(m))}async send(r,s={}){var a,u;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=r,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=v.body)===null||u===void 0?void 0:u.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,m;const v=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ke.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ht.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new _l(this,Ht.leave,{},r),a.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ke.closed,this.bindings={}}async _fetchWithTimeout(r,s,a){const u=new AbortController,c=setTimeout(()=>u.abort(),a),h=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(c),h}_push(r,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new _l(this,r,s,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>ev){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,a){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,a){var u,c;const h=r.toLocaleLowerCase(),{close:p,error:m,leave:v,join:x}=Ht;if(a&&[p,m,v,x].indexOf(h)>=0&&a!==this._joinRef())return;let y=this._onMessage(h,s,a);if(s&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(b=>{var S,P,T;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((T=(P=b.filter)===null||P===void 0?void 0:P.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===h}).map(b=>b.callback(y,a)):(c=this.bindings[h])===null||c===void 0||c.filter(b=>{var S,P,T,D,U,A;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in b){const q=b.id,oe=(S=b.filter)===null||S===void 0?void 0:S.event;return q&&((P=s.ids)===null||P===void 0?void 0:P.includes(q))&&(oe==="*"||oe?.toLocaleLowerCase()===((T=s.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const q=(U=(D=b?.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return q==="*"||q===((A=s?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===h}).map(b=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:P,table:T,commit_timestamp:D,type:U,errors:A}=S;y=Object.assign(Object.assign({},{schema:P,table:T,commit_timestamp:D,eventType:U,new:{},old:{},errors:A}),this._getPayloadRecords(S))}b.callback(y,a)})}_isClosed(){return this.state===Ke.closed}_isJoined(){return this.state===Ke.joined}_isJoining(){return this.state===Ke.joining}_isLeaving(){return this.state===Ke.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,a){const u=r.toLocaleLowerCase(),c={type:u,filter:s,callback:a};return this.bindings[u]?this.bindings[u].push(c):this.bindings[u]=[c],this}_off(r,s){const a=r.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var c;return!(((c=u.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&Bn.isEqual(u.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const a in r)if(r[a]!==s[a])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Ht.close,{},r)}_onError(r){this._on(Ht.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ke.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=dh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=dh(r.columns,r.old_record)),s}}const bl=()=>{},aa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lv=[1e3,2e3,5e3,1e4],uv=1e4,cv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dv{constructor(r,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ul,this.transport=null,this.heartbeatIntervalMs=aa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bl,this.ref=0,this.reconnectTimer=null,this.vsn=ch,this.logger=bl,this.conn=null,this.sendBuffer=[],this.serializer=new tv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...c)=>u(...c):(...c)=>fetch(...c),!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Bl.websocket}`,this.httpEndpoint=Yh(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jg.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,a){this.logger(r,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return Xr.Connecting;case Tr.open:return Xr.Open;case Tr.closing:return Xr.Closing;default:return Xr.Closed}}isConnected(){return this.connectionState()===Xr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const a=`realtime:${r}`,u=this.getChannels().find(c=>c.topic===a);if(u)return u;{const c=new Bn(`realtime:${r}`,s,this);return this.channels.push(c),c}}push(r){const{topic:s,event:a,payload:u,ref:c}=r,h=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${s} ${a} (${c})`,u),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Zg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},aa.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(a=>a.topic===r&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",v)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:c,ref:h}=s,p=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${a} ${u} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(a)).forEach(v=>v._trigger(u,c,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Tr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tr.open||this.conn.readyState===Tr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(Ht.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const a=r.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${r}${a}${u}`}_workerObjectUrl(r){let s;if(r)s=r;else{const a=new Blob([cv],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,a=!1;if(r)s=r,a=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const c={access_token:s,version:Yg};s&&u.updateJoinPayload(c),u.joinedOnce&&u._isJoined()&&u._push(Ht.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(a=>{try{a(s)}catch(u){this.log("error",`error in ${r} callback`,u)}})}catch(a){this.log("error",`error triggering ${r} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Jh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},aa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,a,u,c,h,p,m,v,x,_,y,b;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=r?.timeout)!==null&&a!==void 0?a:Ul,this.heartbeatIntervalMs=(u=r?.heartbeatIntervalMs)!==null&&u!==void 0?u:aa.HEARTBEAT_INTERVAL,this.worker=(c=r?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:bl,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:ch,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(S=>lv[S-1]||uv),this.vsn){case Xg:this.encode=(x=r?.encode)!==null&&x!==void 0?x:((S,P)=>P(JSON.stringify(S))),this.decode=(_=r?.decode)!==null&&_!==void 0?_:((S,P)=>P(JSON.parse(S)));break;case Gh:this.encode=(y=r?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(b=r?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var Us=class extends Error{constructor(n,r){super(n),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hv(n,r,s){const a=new URL(r,n);if(s)for(const[u,c]of Object.entries(s))c!==void 0&&a.searchParams.set(u,c);return a.toString()}async function fv(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function pv(n){const r=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:u,body:c,headers:h}){const p=hv(n.baseUrl,a,u),m=await fv(n.auth),v=await r(p,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...m,...h},body:c?JSON.stringify(c):void 0}),x=await v.text(),_=(v.headers.get("content-type")||"").includes("application/json"),y=_&&x?JSON.parse(x):x;if(!v.ok){const b=_?y:void 0,S=b?.error;throw new Us(S?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:S?.type,icebergCode:S?.code,details:b})}return{status:v.status,headers:v.headers,data:y}}}}function oa(n){return n.join("")}var mv=class{constructor(n,r=""){this.client=n,this.prefix=r}async listNamespaces(n){const r=n?{parent:oa(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(n,r){const s={namespace:n.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oa(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oa(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oa(n.namespace)}`}),!0}catch(r){if(r instanceof Us&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(n,r){try{return await this.createNamespace(n,r)}catch(s){if(s instanceof Us&&s.status===409)return;throw s}}};function Rn(n){return n.join("")}var gv=class{constructor(n,r="",s){this.client=n,this.prefix=r,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables`})).data.identifiers}async createTable(n,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(n,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,headers:r})).data.metadata}async tableExists(n){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,headers:r}),!0}catch(s){if(s instanceof Us&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,r){try{return await this.createTable(n,r)}catch(s){if(s instanceof Us&&s.status===409)return await this.loadTable({namespace:n.namespace,name:r.name});throw s}}},vv=class{constructor(n){let r="v1";n.catalogName&&(r+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=pv({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new mv(this.client,r),this.tableOps=new gv(this.client,r,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,r){return this.namespaceOps.createNamespace(n,r)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,r){return this.tableOps.createTable(n,r)}async updateTable(n,r){return this.tableOps.updateTable(n,r)}async dropTable(n,r){await this.tableOps.dropTable(n,r)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,r){return this.namespaceOps.createNamespaceIfNotExists(n,r)}async createTableIfNotExists(n,r){return this.tableOps.createTableIfNotExists(n,r)}},_a=class extends Error{constructor(n,r="storage",s,a){super(n),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=a}};function ba(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var la=class extends _a{constructor(n,r,s,a="storage"){super(n,a,r,s),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Xh=class extends _a{constructor(n,r,s="storage"){super(n,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const yv=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),xv=n=>{if(typeof n!="object"||n===null)return!1;const r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Fl=n=>{if(Array.isArray(n))return n.map(s=>Fl(s));if(typeof n=="function"||n!==Object(n))return n;const r={};return Object.entries(n).forEach(([s,a])=>{const u=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));r[u]=Fl(a)}),r},wv=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Bs(n){"@babel/helpers - typeof";return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bs(n)}function _v(n,r){if(Bs(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if(Bs(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function bv(n){var r=_v(n,"string");return Bs(r)=="symbol"?r:r+""}function kv(n,r,s){return(r=bv(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function ph(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function ie(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ph(Object(s),!0).forEach(function(a){kv(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):ph(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}const mh=n=>{var r;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(r=n.error)===null||r===void 0?void 0:r.message)||JSON.stringify(n)},jv=async(n,r,s,a)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!s?.noResolveJson){const u=n,c=u.status||500;if(typeof u.json=="function")u.json().then(h=>{const p=h?.statusCode||h?.code||c+"";r(new la(mh(h),c,p,a))}).catch(()=>{if(a==="vectors"){const h=c+"";r(new la(u.statusText||`HTTP ${c} error`,c,h,a))}else{const h=c+"";r(new la(u.statusText||`HTTP ${c} error`,c,h,a))}});else{const h=c+"";r(new la(u.statusText||`HTTP ${c} error`,c,h,a))}}else r(new Xh(mh(n),n,a))},Sv=(n,r,s,a)=>{const u={method:n,headers:r?.headers||{}};return n==="GET"||n==="HEAD"||!a?ie(ie({},u),s):(xv(a)?(u.headers=ie({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(a)):u.body=a,r?.duplex&&(u.duplex=r.duplex),ie(ie({},u),s))};async function Ps(n,r,s,a,u,c,h){return new Promise((p,m)=>{n(s,Sv(r,a,u,c)).then(v=>{if(!v.ok)throw v;if(a?.noResolveJson)return v;if(h==="vectors"){const x=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!x||!x.includes("application/json"))return{}}return v.json()}).then(v=>p(v)).catch(v=>jv(v,m,a,h))})}function Zh(n="storage"){return{get:async(r,s,a,u)=>Ps(r,"GET",s,a,u,void 0,n),post:async(r,s,a,u,c)=>Ps(r,"POST",s,u,c,a,n),put:async(r,s,a,u,c)=>Ps(r,"PUT",s,u,c,a,n),head:async(r,s,a,u)=>Ps(r,"HEAD",s,ie(ie({},a),{},{noResolveJson:!0}),u,void 0,n),remove:async(r,s,a,u,c)=>Ps(r,"DELETE",s,u,c,a,n)}}const Nv=Zh("storage"),{get:Ms,post:Wt,put:zl,head:Ev,remove:ru}=Nv,St=Zh("vectors");var qn=class{constructor(n,r={},s,a="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.fetch=yv(s),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var r=this;try{return{data:await n(),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ba(s))return{data:null,error:s};throw s}}},Cv=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ba(r))return{data:null,error:r};throw r}}};let ef;ef=Symbol.toStringTag;var Tv=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r,this[ef]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cv(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.getPromise().then(n,r)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ba(r))return{data:null,error:r};throw r}}};const Rv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Pv=class extends qn{constructor(n,r={},s,a){super(n,r,a,"storage"),this.bucketId=s}async uploadOrUpdate(n,r,s,a){var u=this;return u.handleOperation(async()=>{let c;const h=ie(ie({},gh),a);let p=ie(ie({},u.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",u.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),m&&!c.has("metadata")&&c.append("metadata",u.encodeMetadata(m))):(c=s,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,m&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),a?.headers&&(p=ie(ie({},p),a.headers));const v=u._removeEmptyFolders(r),x=u._getFinalPath(v),_=await(n=="PUT"?zl:Wt)(u.fetch,`${u.url}/object/${x}`,c,ie({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{path:v,id:_.Id,fullPath:_.Key}})}async upload(n,r,s){return this.uploadOrUpdate("POST",n,r,s)}async uploadToSignedUrl(n,r,s,a){var u=this;const c=u._removeEmptyFolders(n),h=u._getFinalPath(c),p=new URL(u.url+`/object/upload/sign/${h}`);return p.searchParams.set("token",r),u.handleOperation(async()=>{let m;const v=ie({upsert:gh.upsert},a),x=ie(ie({},u.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",v.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",v.cacheControl)):(m=s,x["cache-control"]=`max-age=${v.cacheControl}`,x["content-type"]=v.contentType),{path:c,fullPath:(await zl(u.fetch,p.toString(),m,{headers:x})).Key}})}async createSignedUploadUrl(n,r){var s=this;return s.handleOperation(async()=>{let a=s._getFinalPath(n);const u=ie({},s.headers);r?.upsert&&(u["x-upsert"]="true");const c=await Wt(s.fetch,`${s.url}/object/upload/sign/${a}`,{},{headers:u}),h=new URL(s.url+c.url),p=h.searchParams.get("token");if(!p)throw new _a("No token returned by API");return{signedUrl:h.toString(),path:n,token:p}})}async update(n,r,s){return this.uploadOrUpdate("PUT",n,r,s)}async move(n,r,s){var a=this;return a.handleOperation(async()=>await Wt(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:a.headers}))}async copy(n,r,s){var a=this;return a.handleOperation(async()=>({path:(await Wt(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(n,r,s){var a=this;return a.handleOperation(async()=>{let u=a._getFinalPath(n),c=await Wt(a.fetch,`${a.url}/object/sign/${u}`,ie({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:a.headers});const h=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${h}`)}})}async createSignedUrls(n,r,s){var a=this;return a.handleOperation(async()=>{const u=await Wt(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:r,paths:n},{headers:a.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u.map(h=>ie(ie({},h),{},{signedUrl:h.signedURL?encodeURI(`${a.url}${h.signedURL}${c}`):null}))})}download(n,r){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(r?.transform||{}),u=a?`?${a}`:"",c=this._getFinalPath(n),h=()=>Ms(this.fetch,`${this.url}/${s}/${c}${u}`,{headers:this.headers,noResolveJson:!0});return new Tv(h,this.shouldThrowOnError)}async info(n){var r=this;const s=r._getFinalPath(n);return r.handleOperation(async()=>Fl(await Ms(r.fetch,`${r.url}/object/info/${s}`,{headers:r.headers})))}async exists(n){var r=this;const s=r._getFinalPath(n);try{return await Ev(r.fetch,`${r.url}/object/${s}`,{headers:r.headers}),{data:!0,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(ba(a)&&a instanceof Xh){const u=a.originalError;if([400,404].includes(u?.status))return{data:!1,error:a}}throw a}}getPublicUrl(n,r){const s=this._getFinalPath(n),a=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&a.push(u);const c=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&a.push(h);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${p}`)}}}async remove(n){var r=this;return r.handleOperation(async()=>await ru(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:n},{headers:r.headers}))}async list(n,r,s){var a=this;return a.handleOperation(async()=>{const u=ie(ie(ie({},Rv),r),{},{prefix:n||""});return await Wt(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},s)})}async listV2(n,r){var s=this;return s.handleOperation(async()=>{const a=ie({},n);return await Wt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,a,{headers:s.headers},r)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}};const Ov="2.94.0",Vs={"X-Client-Info":`storage-js/${Ov}`};var Av=class extends qn{constructor(n,r={},s,a){const u=new URL(n);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const c=u.href.replace(/\/$/,""),h=ie(ie({},Vs),r);super(c,h,s,"storage")}async listBuckets(n){var r=this;return r.handleOperation(async()=>{const s=r.listBucketOptionsToQueryString(n);return await Ms(r.fetch,`${r.url}/bucket${s}`,{headers:r.headers})})}async getBucket(n){var r=this;return r.handleOperation(async()=>await Ms(r.fetch,`${r.url}/bucket/${n}`,{headers:r.headers}))}async createBucket(n,r={public:!1}){var s=this;return s.handleOperation(async()=>await Wt(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}))}async updateBucket(n,r){var s=this;return s.handleOperation(async()=>await zl(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(n){var r=this;return r.handleOperation(async()=>await Wt(r.fetch,`${r.url}/bucket/${n}/empty`,{},{headers:r.headers}))}async deleteBucket(n){var r=this;return r.handleOperation(async()=>await ru(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(n){const r={};return n&&("limit"in n&&(r.limit=String(n.limit)),"offset"in n&&(r.offset=String(n.offset)),n.search&&(r.search=n.search),n.sortColumn&&(r.sortColumn=n.sortColumn),n.sortOrder&&(r.sortOrder=n.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},Iv=class extends qn{constructor(n,r={},s){const a=n.replace(/\/$/,""),u=ie(ie({},Vs),r);super(a,u,s,"storage")}async createBucket(n){var r=this;return r.handleOperation(async()=>await Wt(r.fetch,`${r.url}/bucket`,{name:n},{headers:r.headers}))}async listBuckets(n){var r=this;return r.handleOperation(async()=>{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const a=s.toString(),u=a?`${r.url}/bucket?${a}`:`${r.url}/bucket`;return await Ms(r.fetch,u,{headers:r.headers})})}async deleteBucket(n){var r=this;return r.handleOperation(async()=>await ru(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}))}from(n){var r=this;if(!wv(n))throw new _a("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new vv({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(s,{get(u,c){const h=u[c];return typeof h!="function"?h:async(...p)=>{try{return{data:await h.apply(u,p),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}},Lv=class extends qn{constructor(n,r={},s){const a=n.replace(/\/$/,""),u=ie(ie({},Vs),{},{"Content-Type":"application/json"},r);super(a,u,s,"vectors")}async createIndex(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/CreateIndex`,n,{headers:r.headers})||{})}async getIndex(n,r){var s=this;return s.handleOperation(async()=>await St.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:r},{headers:s.headers}))}async listIndexes(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/ListIndexes`,n,{headers:r.headers}))}async deleteIndex(n,r){var s=this;return s.handleOperation(async()=>await St.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:r},{headers:s.headers})||{})}},Dv=class extends qn{constructor(n,r={},s){const a=n.replace(/\/$/,""),u=ie(ie({},Vs),{},{"Content-Type":"application/json"},r);super(a,u,s,"vectors")}async putVectors(n){var r=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/PutVectors`,n,{headers:r.headers})||{})}async getVectors(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/GetVectors`,n,{headers:r.headers}))}async listVectors(n){var r=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/ListVectors`,n,{headers:r.headers}))}async queryVectors(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/QueryVectors`,n,{headers:r.headers}))}async deleteVectors(n){var r=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/DeleteVectors`,n,{headers:r.headers})||{})}},$v=class extends qn{constructor(n,r={},s){const a=n.replace(/\/$/,""),u=ie(ie({},Vs),{},{"Content-Type":"application/json"},r);super(a,u,s,"vectors")}async createBucket(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{})}async getBucket(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:n},{headers:r.headers}))}async listBuckets(n={}){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/ListVectorBuckets`,n,{headers:r.headers}))}async deleteBucket(n){var r=this;return r.handleOperation(async()=>await St.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{})}},Uv=class extends $v{constructor(n,r={}){super(n,r.headers||{},r.fetch)}from(n){return new Bv(this.url,this.headers,n,this.fetch)}async createBucket(n){var r=()=>super.createBucket,s=this;return r().call(s,n)}async getBucket(n){var r=()=>super.getBucket,s=this;return r().call(s,n)}async listBuckets(n={}){var r=()=>super.listBuckets,s=this;return r().call(s,n)}async deleteBucket(n){var r=()=>super.deleteBucket,s=this;return r().call(s,n)}},Bv=class extends Lv{constructor(n,r,s,a){super(n,r,a),this.vectorBucketName=s}async createIndex(n){var r=()=>super.createIndex,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var r=()=>super.listIndexes,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var r=()=>super.getIndex,s=this;return r().call(s,s.vectorBucketName,n)}async deleteIndex(n){var r=()=>super.deleteIndex,s=this;return r().call(s,s.vectorBucketName,n)}index(n){return new Mv(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Mv=class extends Dv{constructor(n,r,s,a,u){super(n,r,u),this.vectorBucketName=s,this.indexName=a}async putVectors(n){var r=()=>super.putVectors,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var r=()=>super.getVectors,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var r=()=>super.listVectors,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var r=()=>super.queryVectors,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var r=()=>super.deleteVectors,s=this;return r().call(s,ie(ie({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},Fv=class extends Av{constructor(n,r={},s,a){super(n,r,s,a)}from(n){return new Pv(this.url,this.headers,n,this.fetch)}get vectors(){return new Uv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Iv(this.url+"/iceberg",this.headers,this.fetch)}};const tf="2.94.0",$n=30*1e3,ql=3,kl=ql*$n,zv="http://localhost:9999",qv="supabase.auth.token",Vv={"X-Client-Info":`gotrue-js/${tf}`},Vl="X-Supabase-Api-Version",rf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hv=600*1e3;class Fs extends Error{constructor(r,s,a){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function X(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Kv extends Fs{constructor(r,s,a){super(r,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function Gv(n){return X(n)&&n.name==="AuthApiError"}class Zr extends Fs{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class ur extends Fs{constructor(r,s,a,u){super(r,a,u),this.name=s,this.status=a}}class jt extends ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jl(n){return X(n)&&n.name==="AuthSessionMissingError"}class Pn extends ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ua extends ur{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class ca extends ur{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jv(n){return X(n)&&n.name==="AuthImplicitGrantRedirectError"}class vh extends ur{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qv extends ur{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Wl extends ur{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function Sl(n){return X(n)&&n.name==="AuthRetryableFetchError"}class yh extends ur{constructor(r,s,a){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class Hl extends ur{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xh=` 	
\r=`.split(""),Yv=(()=>{const n=new Array(128);for(let r=0;r<n.length;r+=1)n[r]=-1;for(let r=0;r<xh.length;r+=1)n[xh[r].charCodeAt(0)]=-2;for(let r=0;r<ma.length;r+=1)n[ma[r].charCodeAt(0)]=r;return n})();function wh(n,r,s){if(n!==null)for(r.queue=r.queue<<8|n,r.queuedBits+=8;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;s(ma[a]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const a=r.queue>>r.queuedBits-6&63;s(ma[a]),r.queuedBits-=6}}function nf(n,r,s){const a=Yv[n];if(a>-1)for(r.queue=r.queue<<6|a,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function _h(n){const r=[],s=h=>{r.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},c=h=>{ey(h,a,s)};for(let h=0;h<n.length;h+=1)nf(n.charCodeAt(h),u,c);return r.join("")}function Xv(n,r){if(n<=127){r(n);return}else if(n<=2047){r(192|n>>6),r(128|n&63);return}else if(n<=65535){r(224|n>>12),r(128|n>>6&63),r(128|n&63);return}else if(n<=1114111){r(240|n>>18),r(128|n>>12&63),r(128|n>>6&63),r(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Zv(n,r){for(let s=0;s<n.length;s+=1){let a=n.charCodeAt(s);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(n.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}Xv(a,r)}}function ey(n,r,s){if(r.utf8seq===0){if(n<=127){s(n);return}for(let a=1;a<6;a+=1)if((n>>7-a&1)===0){r.utf8seq=a;break}if(r.utf8seq===2)r.codepoint=n&31;else if(r.utf8seq===3)r.codepoint=n&15;else if(r.utf8seq===4)r.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|n&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function Mn(n){const r=[],s={queue:0,queuedBits:0},a=u=>{r.push(u)};for(let u=0;u<n.length;u+=1)nf(n.charCodeAt(u),s,a);return new Uint8Array(r)}function ty(n){const r=[];return Zv(n,s=>r.push(s)),new Uint8Array(r)}function en(n){const r=[],s={queue:0,queuedBits:0},a=u=>{r.push(u)};return n.forEach(u=>wh(u,s,a)),wh(null,s,a),r.join("")}function ry(n){return Math.round(Date.now()/1e3)+n}function ny(){return Symbol("auth-callback")}const rt=()=>typeof window<"u"&&typeof document<"u",Jr={tested:!1,writable:!1},sf=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jr.tested)return Jr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Jr.tested=!0,Jr.writable=!0}catch{Jr.tested=!0,Jr.writable=!1}return Jr.writable};function sy(n){const r={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,c)=>{r[c]=u})}catch{}return s.searchParams.forEach((a,u)=>{r[u]=a}),r}const af=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),iy=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Un=async(n,r,s)=>{await n.setItem(r,JSON.stringify(s))},Qr=async(n,r)=>{const s=await n.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},tt=async(n,r)=>{await n.removeItem(r)};class ka{constructor(){this.promise=new ka.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}ka.promiseConstructor=Promise;function da(n){const r=n.split(".");if(r.length!==3)throw new Hl("Invalid JWT structure");for(let a=0;a<r.length;a++)if(!Wv.test(r[a]))throw new Hl("JWT not in base64url format");return{header:JSON.parse(_h(r[0])),payload:JSON.parse(_h(r[1])),signature:Mn(r[2]),raw:{header:r[0],payload:r[1]}}}async function ay(n){return await new Promise(r=>{setTimeout(()=>r(null),n)})}function oy(n,r){return new Promise((a,u)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await n(c);if(!r(c,null,h)){a(h);return}}catch(h){if(!r(c,h)){u(h);return}}})()})}function ly(n){return("0"+n.toString(16)).substr(-2)}function uy(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let u="";for(let c=0;c<56;c++)u+=s.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(r),Array.from(r,ly).join("")}async function cy(n){const s=new TextEncoder().encode(n),a=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(a);return Array.from(u).map(c=>String.fromCharCode(c)).join("")}async function dy(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await cy(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function On(n,r,s=!1){const a=uy();let u=a;s&&(u+="/PASSWORD_RECOVERY"),await Un(n,`${r}-code-verifier`,u);const c=await dy(a);return[c,a===c?"plain":"s256"]}const hy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fy(n){const r=n.headers.get(Vl);if(!r||!r.match(hy))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function py(n){if(!n)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(n<=r)throw new Error("JWT has expired")}function my(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function An(n){if(!gy.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nl(){const n={};return new Proxy(n,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vy(n,r){return new Proxy(n,{get:(s,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,u)}return!r.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,a,u)}})}function bh(n){return JSON.parse(JSON.stringify(n))}const Yr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),yy=[502,503,504];async function kh(n){var r;if(!iy(n))throw new Wl(Yr(n),0);if(yy.includes(n.status))throw new Wl(Yr(n),n.status);let s;try{s=await n.json()}catch(c){throw new Zr(Yr(c),c)}let a;const u=fy(n);if(u&&u.getTime()>=rf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new yh(Yr(s),n.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(a==="session_not_found")throw new jt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new yh(Yr(s),n.status,s.weak_password.reasons);throw new Kv(Yr(s),n.status||500,a)}const xy=(n,r,s,a)=>{const u={method:n,headers:r?.headers||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),s))};async function se(n,r,s,a){var u;const c=Object.assign({},a?.headers);c[Vl]||(c[Vl]=rf["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const h=(u=a?.query)!==null&&u!==void 0?u:{};a?.redirectTo&&(h.redirect_to=a.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await wy(n,r,s+p,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function wy(n,r,s,a,u,c){const h=xy(r,a,u,c);let p;try{p=await n(s,Object.assign({},h))}catch(m){throw console.error(m),new Wl(Yr(m),0)}if(p.ok||await kh(p),a?.noResolveJson)return p;try{return await p.json()}catch(m){await kh(m)}}function Vt(n){var r;let s=null;ky(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=ry(n.expires_in)));const a=(r=n.user)!==null&&r!==void 0?r:n;return{data:{session:s,user:a},error:null}}function jh(n){const r=Vt(n);return!r.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(r.data.weak_password=n.weak_password),r}function Rr(n){var r;return{data:{user:(r=n.user)!==null&&r!==void 0?r:n},error:null}}function _y(n){return{data:n,error:null}}function by(n){const{action_link:r,email_otp:s,hashed_token:a,redirect_to:u,verification_type:c}=n,h=wa(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:s,hashed_token:a,redirect_to:u,verification_type:c},m=Object.assign({},h);return{data:{properties:p,user:m},error:null}}function Sh(n){return n}function ky(n){return n.access_token&&n.refresh_token&&n.expires_in}const El=["global","local","others"];class jy{constructor({url:r="",headers:s={},fetch:a}){this.url=r,this.headers=s,this.fetch=af(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=El[0]){if(El.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${El.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}}async inviteUserByEmail(r,s={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Rr})}catch(a){if(X(a))return{data:{user:null},error:a};throw a}}async generateLink(r){try{const{options:s}=r,a=wa(r,["options"]),u=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(u.new_email=a?.newEmail,delete u.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:by,redirectTo:s?.redirectTo})}catch(s){if(X(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Rr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,a,u,c,h,p,m;try{const v={nextPage:null,lastPage:0,total:0},x=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Sh});if(x.error)throw x.error;const _=await x.json(),y=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,b=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const P=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);v[`${T}Page`]=P}),v.total=parseInt(y)),{data:Object.assign(Object.assign({},_),v),error:null}}catch(v){if(X(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){An(r);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Rr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){An(r);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:Rr})}catch(a){if(X(a))return{data:{user:null},error:a};throw a}}async deleteUser(r,s=!1){An(r);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:Rr})}catch(a){if(X(a))return{data:{user:null},error:a};throw a}}async _listFactors(r){An(r.userId);try{const{data:s,error:a}=await se(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:a}}catch(s){if(X(s))return{data:null,error:s};throw s}}async _deleteFactor(r){An(r.userId),An(r.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,a,u,c,h,p,m;try{const v={nextPage:null,lastPage:0,total:0},x=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&c!==void 0?c:""},xform:Sh});if(x.error)throw x.error;const _=await x.json(),y=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,b=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const P=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);v[`${T}Page`]=P}),v.total=parseInt(y)),{data:Object.assign(Object.assign({},_),v),error:null}}catch(v){if(X(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(X(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(r){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}}function Nh(n={}){return{getItem:r=>n[r]||null,setItem:(r,s)=>{n[r]=s},removeItem:r=>{delete n[r]}}}const In={debug:!!(globalThis&&sf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class of extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Sy extends of{}async function Ny(n,r,s){In.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,r);const a=new globalThis.AbortController;return r>0&&setTimeout(()=>{a.abort(),In.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){In.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await s()}finally{In.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(r===0)throw In.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Sy(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(In.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Ey(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lf(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Cy(n){return parseInt(n,16)}function Ty(n){const r=new TextEncoder().encode(n);return"0x"+Array.from(r,a=>a.toString(16).padStart(2,"0")).join("")}function Ry(n){var r;const{chainId:s,domain:a,expirationTime:u,issuedAt:c=new Date,nonce:h,notBefore:p,requestId:m,resources:v,scheme:x,uri:_,version:y}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((r=n.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const b=lf(n.address),S=x?`${x}://${a}`:a,P=n.statement?`${n.statement}
`:"",T=`${S} wants you to sign in with your Ethereum account:
${b}

${P}`;let D=`URI: ${_}
Version: ${y}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(u&&(D+=`
Expiration Time: ${u.toISOString()}`),p&&(D+=`
Not Before: ${p.toISOString()}`),m&&(D+=`
Request ID: ${m}`),v){let U=`
Resources:`;for(const A of v){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);U+=`
- ${A}`}D+=U}return`${T}
${D}`}class Ve extends Error{constructor({message:r,code:s,cause:a,name:u}){var c;super(r,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=u??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class ga extends Ve{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function Py({error:n,options:r}){var s,a,u;const{publicKey:c}=r;if(!c)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(r.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=c.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ve({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const h=window.location.hostname;if(uf(h)){if(c.rp.id!==h)return new Ve({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Oy({error:n,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ve({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(uf(a)){if(s.rpId!==a)return new Ve({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Ay{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Iy=new Ay;function Ly(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:r,user:s,excludeCredentials:a}=n,u=wa(n,["challenge","user","excludeCredentials"]),c=Mn(r).buffer,h=Object.assign(Object.assign({},s),{id:Mn(s.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:c,user:h});if(a&&a.length>0){p.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const v=a[m];p.excludeCredentials[m]=Object.assign(Object.assign({},v),{id:Mn(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function Dy(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:r,allowCredentials:s}=n,a=wa(n,["challenge","allowCredentials"]),u=Mn(r).buffer,c=Object.assign(Object.assign({},a),{challenge:u});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];c.allowCredentials[h]=Object.assign(Object.assign({},p),{id:Mn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function $y(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:en(new Uint8Array(n.response.attestationObject)),clientDataJSON:en(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Uy(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,a=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:en(new Uint8Array(u.authenticatorData)),clientDataJSON:en(new Uint8Array(u.clientDataJSON)),signature:en(new Uint8Array(u.signature)),userHandle:u.userHandle?en(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function uf(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Eh(){var n,r;return!!(rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function By(n){try{const r=await navigator.credentials.create(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ga("Browser returned unexpected credential type",r)}:{data:null,error:new ga("Empty credential response",r)}}catch(r){return{data:null,error:Py({error:r,options:n})}}}async function My(n){try{const r=await navigator.credentials.get(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ga("Browser returned unexpected credential type",r)}:{data:null,error:new ga("Empty credential response",r)}}catch(r){return{data:null,error:Oy({error:r,options:n})}}}const Fy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function va(...n){const r=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of n)if(u)for(const c in u){const h=u[c];if(h!==void 0)if(Array.isArray(h))a[c]=h;else if(s(h))a[c]=h;else if(r(h)){const p=a[c];r(p)?a[c]=va(p,h):a[c]=va(h)}else a[c]=h}return a}function qy(n,r){return va(Fy,n,r||{})}function Vy(n,r){return va(zy,n,r||{})}class Wy{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:a,signal:u},c){var h;try{const{data:p,error:m}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!p)return{data:null,error:m};const v=u??Iy.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:x}=p.webauthn.credential_options.publicKey;if(!x.name){const _=a;if(_)x.name=`${x.id}:${_}`;else{const b=(await this.client.getUser()).data.user,S=((h=b?.user_metadata)===null||h===void 0?void 0:h.name)||b?.email||b?.id||"User";x.name=`${x.id}:${S}`}}x.displayName||(x.displayName=x.name)}switch(p.webauthn.type){case"create":{const x=qy(p.webauthn.credential_options.publicKey,c?.create),{data:_,error:y}=await By({publicKey:x,signal:v});return _?{data:{factorId:r,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:_}},error:null}:{data:null,error:y}}case"request":{const x=Vy(p.webauthn.credential_options.publicKey,c?.request),{data:_,error:y}=await My(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:x,signal:v}));return _?{data:{factorId:r,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:_}},error:null}:{data:null,error:y}}}}catch(p){return X(p)?{data:null,error:p}:{data:null,error:new Zr("Unexpected error in challenge",p)}}}async _verify({challengeId:r,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:a})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new Fs("rpId is required for WebAuthn authentication")};try{if(!Eh())return{data:null,error:new Zr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:a},signal:u},{request:c});if(!h)return{data:null,error:p};const{webauthn:m}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:a,credential_response:m.credential_response}})}catch(h){return X(h)?{data:null,error:h}:{data:null,error:new Zr("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},c){if(!s)return{data:null,error:new Fs("rpId is required for WebAuthn registration")};try{if(!Eh())return{data:null,error:new Zr("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(x=>{var _;return(_=x.data)===null||_===void 0?void 0:_.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===r&&y.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:m,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:u},{create:c});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:v}}catch(h){return X(h)?{data:null,error:h}:{data:null,error:new Zr("Unexpected error in register",h)}}}}Ey();const Hy={url:zv,storageKey:qv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ch(n,r,s){return await s()}const Ln={};class zs{get jwks(){var r,s;return(s=(r=Ln[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){Ln[this.storageKey]=Object.assign(Object.assign({},Ln[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=Ln[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Ln[this.storageKey]=Object.assign(Object.assign({},Ln[this.storageKey]),{cachedAt:r})}constructor(r){var s,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},Hy),r);if(this.storageKey=c.storageKey,this.instanceID=(s=zs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,zs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&rt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new jy({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=af(c.fetch),this.lock=c.lock||Ch,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&rt()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=Ny:this.lock=Ch,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Wy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:sf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nh(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Nh(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(p){this._debug("#broadcastChannel","error",p)}})}this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},a="none";if(rt()&&(s=sy(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),rt()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Jv(c)){const m=(r=c.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:h,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return X(s)?this._returnResult({error:s}):this._returnResult({error:new Zr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,a,u;try{const c=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=r?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Vt}),{data:h,error:p}=c;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(X(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(r){var s,a,u;try{let c;if("email"in r){const{email:x,password:_,options:y}=r;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await On(this.storage,this.storageKey)),c=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:x,password:_,data:(s=y?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:S},xform:Vt})}else if("phone"in r){const{phone:x,password:_,options:y}=r;c=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:_,data:(a=y?.data)!==null&&a!==void 0?a:{},channel:(u=y?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Vt})}else throw new ua("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return await tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(c){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(r){try{let s;if("email"in r){const{email:c,password:h,options:p}=r;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:jh})}else if("phone"in r){const{phone:c,password:h,options:p}=r;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:jh})}else throw new ua("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const c=new Pn;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,a,u,c;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=r.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=r.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(c=r.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,a,u,c,h,p,m,v,x,_,y;let b,S;if("message"in r)b=r.message,S=r.signature;else{const{chain:P,wallet:T,statement:D,options:U}=r;let A;if(rt())if(typeof T=="object")A=T;else{const Se=window;if("ethereum"in Se&&typeof Se.ethereum=="object"&&"request"in Se.ethereum&&typeof Se.ethereum.request=="function")A=Se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=T}const q=new URL((s=U?.url)!==null&&s!==void 0?s:window.location.href),oe=await A.request({method:"eth_requestAccounts"}).then(Se=>Se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!oe||oe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ee=lf(oe[0]);let ce=(a=U?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!ce){const Se=await A.request({method:"eth_chainId"});ce=Cy(Se)}const ve={domain:q.host,address:ee,statement:D,uri:q.href,version:"1",chainId:ce,nonce:(u=U?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(h=(c=U?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=U?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=U?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(v=U?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(x=U?.signInWithEthereum)===null||x===void 0?void 0:x.resources};b=Ry(ve),S=await A.request({method:"personal_sign",params:[Ty(b),ee]})}try{const{data:P,error:T}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(y=r.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Vt});if(T)throw T;if(!P||!P.session||!P.user){const D=new Pn;return this._returnResult({data:{user:null,session:null},error:D})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:T})}catch(P){if(X(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(r){var s,a,u,c,h,p,m,v,x,_,y,b;let S,P;if("message"in r)S=r.message,P=r.signature;else{const{chain:T,wallet:D,statement:U,options:A}=r;let q;if(rt())if(typeof D=="object")q=D;else{const ee=window;if("solana"in ee&&typeof ee.solana=="object"&&("signIn"in ee.solana&&typeof ee.solana.signIn=="function"||"signMessage"in ee.solana&&typeof ee.solana.signMessage=="function"))q=ee.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=D}const oe=new URL((s=A?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const ee=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:oe.host,uri:oe.href}),U?{statement:U}:null));let ce;if(Array.isArray(ee)&&ee[0]&&typeof ee[0]=="object")ce=ee[0];else if(ee&&typeof ee=="object"&&"signedMessage"in ee&&"signature"in ee)ce=ee;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ce&&"signature"in ce&&(typeof ce.signedMessage=="string"||ce.signedMessage instanceof Uint8Array)&&ce.signature instanceof Uint8Array)S=typeof ce.signedMessage=="string"?ce.signedMessage:new TextDecoder().decode(ce.signedMessage),P=ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${oe.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${oe.href}`,`Issued At: ${(u=(a=A?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((c=A?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((m=A?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((v=A?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((_=(x=A?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||_===void 0)&&_.length?["Resources",...A.signInWithSolana.resources.map(ce=>`- ${ce}`)]:[]].join(`
`);const ee=await q.signMessage(new TextEncoder().encode(S),"utf8");if(!ee||!(ee instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=ee}}try{const{data:T,error:D}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:en(P)},!((y=r.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Vt});if(D)throw D;if(!T||!T.session||!T.user){const U=new Pn;return this._returnResult({data:{user:null,session:null},error:U})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:D})}catch(T){if(X(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(r){const s=await Qr(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(s??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Qv;const{data:c,error:h}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:a},xform:Vt});if(await tt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const p=new Pn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:u??null}),error:h})}catch(c){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(r){try{const{options:s,provider:a,token:u,access_token:c,nonce:h}=r,p=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Vt}),{data:m,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m||!m.session||!m.user){const x=new Pn;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:v})}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,a,u,c,h;try{if("email"in r){const{email:p,options:m}=r;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await On(this.storage,this.storageKey));const{error:_}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:v,code_challenge_method:x},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in r){const{phone:p,options:m}=r,{data:v,error:x}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=m?.data)!==null&&u!==void 0?u:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(h=m?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:x})}throw new ua("You must provide either an email or phone number.")}catch(p){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var s,a;try{let u,c;"options"in r&&(u=(s=r.options)===null||s===void 0?void 0:s.redirectTo,c=(a=r.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:p}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:c}}),redirectTo:u,xform:Vt});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,v=h.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(u){if(X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(r){var s,a,u,c,h;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await On(this.storage,this.storageKey));const v=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(a=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=r?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:_y});return!((c=v.data)===null||c===void 0)&&c.url&&rt()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)throw a;if(!s)throw new jt;const{error:u}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:a,type:u,options:c}=r,{error:h}=await se(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:a,type:u,options:c}=r,{data:h,error:p}=await se(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new ua("You must provide either an email or phone number and a type")}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await Qr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const a=r.expires_at?r.expires_at*1e3-Date.now()<kl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(this.userStorage){const h=await Qr(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=Nl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=vy(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Rr}):await this._useSession(async s=>{var a,u,c;const{data:h,error:p}=s;if(p)throw p;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0,xform:Rr})})}catch(s){if(X(s))return jl(s)&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async a=>{const{data:u,error:c}=a;if(c)throw c;if(!u.session)throw new jt;const h=u.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await On(this.storage,this.storageKey));const{data:v,error:x}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:h.access_token,xform:Rr});if(x)throw x;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(a){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new jt;const s=Date.now()/1e3;let a=s,u=!0,c=null;const{payload:h}=da(r.access_token);if(h.exp&&(a=h.exp,u=a<=s),u){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(X(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var a;if(!r){const{data:h,error:p}=s;if(p)throw p;r=(a=h.session)!==null&&a!==void 0?a:void 0}if(!r?.refresh_token)throw new jt;const{data:u,error:c}=await this._callRefreshToken(r.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(X(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!rt())throw new ca("No browser detected.");if(r.error||r.error_description||r.error_code)throw new ca(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new vh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ca("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new vh("No code detected.");const{data:U,error:A}=await this._exchangeCodeForSession(r.code);if(A)throw A;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:c,refresh_token:h,expires_in:p,expires_at:m,token_type:v}=r;if(!c||!p||!h||!v)throw new ca("No session defined in URL");const x=Math.round(Date.now()/1e3),_=parseInt(p);let y=x+_;m&&(y=parseInt(m));const b=y-x;b*1e3<=$n&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);const S=y-_;x-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,x):x-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,x);const{data:P,error:T}=await this._getUser(c);if(T)throw T;const D={provider_token:a,provider_refresh_token:u,access_token:c,expires_in:_,expires_at:y,refresh_token:h,token_type:v,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:r.type},error:null})}catch(a){if(X(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await Qr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c&&!jl(c))return this._returnResult({error:c});const h=(a=u.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:p}=await this.admin.signOut(h,r);if(p&&!(Gv(p)&&(p.status===404||p.status===401||p.status===403)||jl(p)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=ny(),a={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(r){return await this._useSession(async s=>{var a,u;try{const{data:{session:c},error:h}=s;if(h)throw h;await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",r,"session",c)}catch(c){await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",c),console.error(c)}})}async resetPasswordForEmail(r,s={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await On(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var r;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:a,error:u}=await this._useSession(async c=>{var h,p,m,v,x;const{data:_,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",b,{headers:this.headers,jwt:(x=(v=_.session)===null||v===void 0?void 0:v.access_token)!==null&&x!==void 0?x:void 0})});if(u)throw u;return rt()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:r.provider,url:a?.url},error:null})}catch(a){if(X(a))return this._returnResult({data:{provider:r.provider,url:null},error:a});throw a}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var a;try{const{error:u,data:{session:c}}=s;if(u)throw u;const{options:h,provider:p,token:m,access_token:v,nonce:x}=r,_=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:p,id_token:m,access_token:v,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Vt}),{data:y,error:b}=_;return b?this._returnResult({data:{user:null,session:null},error:b}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Pn}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:b}))}catch(u){if(await tt(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var a,u;const{data:c,error:h}=s;if(h)throw h;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(u=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await oy(async u=>(u>0&&await ay(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Vt})),(u,c)=>{const h=200*Math.pow(2,u);return c&&Sl(c)&&Date.now()+h-a<$n})}catch(a){if(this._debug(s,"error",a),X(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",a),rt()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:r,url:a},error:null}}async _recoverAndRefresh(){var r,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await Qr(this.storage,this.storageKey);if(u&&this.userStorage){let h=await Qr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:u.user},await Un(this.userStorage,this.storageKey+"-user",h)),u.user=(r=h?.user)!==null&&r!==void 0?r:Nl()}else if(u&&!u.user&&!u.user){const h=await Qr(this.storage,this.storageKey+"-user");h&&h?.user?(u.user=h.user,await tt(this.storage,this.storageKey+"-user"),await Un(this.storage,this.storageKey,u)):u.user=Nl()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const c=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<kl;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${kl}s`),c){if(this.autoRefreshToken&&u.refresh_token){const{error:h}=await this._callRefreshToken(u.refresh_token);h&&(console.error(h),Sl(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(u.access_token);!p&&h?.user?(u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(r){var s,a;if(!r)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new ka;const{data:c,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!c.session)throw new jt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(u,"error",c),X(c)){const h={data:null,error:c};return Sl(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(r,s,a=!0){const u=`#_notifyAllSubscribers(${r})`;this._debug(u,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:r,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,s)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(u,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await tt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await Un(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const c=bh(u);await Un(this.storage,this.storageKey,c)}else{const u=bh(s);await Un(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await tt(this.storage,this.storageKey),await tt(this.storage,this.storageKey+"-code-verifier"),await tt(this.storage,this.storageKey+"-user"),this.userStorage&&await tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&rt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),$n);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-r)/$n);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${$n}ms, refresh threshold is ${ql} ticks`),u<=ql&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof of)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,a){const u=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,h]=await On(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});u.push(p.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);u.push(c.toString())}return a?.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${r}?${u.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;return c?this._returnResult({data:null,error:c}):await se(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var a,u;const{data:c,error:h}=s;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:v}=await se(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&m.type==="totp"&&(!((u=m?.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?$y(r.webauthn.credential_response):Uy(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await se(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const h=await se(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Ly(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Dy(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:a}=await this._challenge({factorId:r.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const c of(r=s?.factors)!==null&&r!==void 0?r:[])u.all.push(c),c.status==="verified"&&u[c.factor_type].push(c);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(r){var s,a,u,c;if(r)try{const{payload:b}=da(r);let S=null;b.aal&&(S=b.aal);let P=S;const{data:{user:T},error:D}=await this.getUser(r);if(D)return this._returnResult({data:null,error:D});((a=(s=T?.factors)===null||s===void 0?void 0:s.filter(q=>q.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(P="aal2");const A=b.amr||[];return{data:{currentLevel:S,nextLevel:P,currentAuthenticationMethods:A},error:null}}catch(b){if(X(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:h},error:p}=await this.getSession();if(p)return this._returnResult({data:null,error:p});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=da(h.access_token);let v=null;m.aal&&(v=m.aal);let x=v;((c=(u=h.user.factors)===null||u===void 0?void 0:u.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(x="aal2");const y=m.amr||[];return{data:{currentLevel:v,nextLevel:x,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new jt})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new jt});const h=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&rt()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(X(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(r,s){try{return await this._useSession(async a=>{const{data:{session:u},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!u)return this._returnResult({data:null,error:new jt});const h=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&rt()&&!s?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(a){if(X(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new jt})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jt})})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let a=s.keys.find(p=>p.kid===r);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(p=>p.kid===r),a&&this.jwks_cached_at+Hv>u)return a;const{data:c,error:h}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=u,a=c.keys.find(p=>p.kid===r),!a)?null:a}async getClaims(r,s={}){try{let a=r;if(!a){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});a=b.session.access_token}const{header:u,payload:c,signature:h,raw:{header:p,payload:m}}=da(a);s?.allowExpired||py(c.exp);const v=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:c,header:u,signature:h},error:null}}const x=my(u.alg),_=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,_,h,ty(`${p}.${m}`)))throw new Hl("Invalid JWT signature");return{data:{claims:c,header:u,signature:h},error:null}}catch(a){if(X(a))return this._returnResult({data:null,error:a});throw a}}}zs.nextInstanceID={};const Ky=zs,Gy="2.94.0";let Os="";typeof Deno<"u"?Os="deno":typeof document<"u"?Os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Os="react-native":Os="node";const Jy={"X-Client-Info":`supabase-js-${Os}/${Gy}`},Qy={headers:Jy},Yy={schema:"public"},Xy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zy={};function qs(n){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qs(n)}function e0(n,r){if(qs(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if(qs(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function t0(n){var r=e0(n,"string");return qs(r)=="symbol"?r:r+""}function r0(n,r,s){return(r=t0(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,n}function Th(n,r){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function Ue(n){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Th(Object(s),!0).forEach(function(a){r0(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Th(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}const n0=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),s0=()=>Headers,i0=(n,r,s)=>{const a=n0(s),u=s0();return async(c,h)=>{var p;const m=(p=await r())!==null&&p!==void 0?p:n;let v=new u(h?.headers);return v.has("apikey")||v.set("apikey",n),v.has("Authorization")||v.set("Authorization",`Bearer ${m}`),a(c,Ue(Ue({},h),{},{headers:v}))}};function a0(n){return n.endsWith("/")?n:n+"/"}function o0(n,r){var s,a;const{db:u,auth:c,realtime:h,global:p}=n,{db:m,auth:v,realtime:x,global:_}=r,y={db:Ue(Ue({},m),u),auth:Ue(Ue({},v),c),realtime:Ue(Ue({},x),h),storage:{},global:Ue(Ue(Ue({},_),p),{},{headers:Ue(Ue({},(s=_?.headers)!==null&&s!==void 0?s:{}),(a=p?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function l0(n){const r=n?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(a0(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var u0=class extends Ky{constructor(n){super(n)}},c0=class{constructor(n,r,s){var a,u;this.supabaseUrl=n,this.supabaseKey=r;const c=l0(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:Yy,realtime:Zy,auth:Ue(Ue({},Xy),{},{storageKey:h}),global:Qy},m=o0(s??{},p);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=m.global.headers)!==null&&u!==void 0?u:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=m.auth)!==null&&v!==void 0?v:{},this.headers,m.global.fetch)}this.fetch=i0(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ue({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new Gg(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new Fv(this.storageUrl.href,this.headers,this.fetch,s?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Mg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,r,s;if(n.accessToken)return await n.accessToken();const{data:a}=await n.auth.getSession();return(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:u,storageKey:c,flowType:h,lock:p,debug:m,throwOnError:v},x,_){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u0({url:this.authUrl.href,headers:Ue(Ue({},y),x),storageKey:c,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:u,flowType:h,lock:p,debug:m,throwOnError:v,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new dv(this.realtimeUrl.href,Ue(Ue({},n),{},{params:Ue(Ue({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const d0=(n,r,s)=>new c0(n,r,s);function h0(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const r=n.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}h0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f0=void 0,p0=void 0;throw new Error("Missing Supabase env vars. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.");const Nt=d0(f0,p0),cf=E.createContext(void 0);function m0({children:n}){const[r,s]=E.useState(null),[a,u]=E.useState(null),[c,h]=E.useState(!0);E.useEffect(()=>{let x=!0;Nt.auth.getSession().then(({data:y,error:b})=>{x&&(b?(u(null),s(null)):(u(y.session??null),s(y.session?.user??null)),h(!1))}).catch(()=>{x&&(u(null),s(null),h(!1))});const{data:_}=Nt.auth.onAuthStateChange((y,b)=>{x&&(u(b),s(b?.user??null))});return()=>{x=!1,_.subscription.unsubscribe()}},[]);const p=async(x,_)=>{const y=x.trim(),b=_.trim();if(!y||!b)return{ok:!1,error:"Email and password are required."};const{error:S}=await Nt.auth.signInWithPassword({email:y,password:b});return S?{ok:!1,error:S.message}:{ok:!0}},m=async()=>{await Nt.auth.signOut(),u(null),s(null)},v=E.useMemo(()=>({user:r,session:a,isAuthenticated:!!r,isLoading:c,signIn:p,signOut:m}),[r,a,c]);return l.jsx(cf.Provider,{value:v,children:n})}function Ws(){const n=E.useContext(cf);if(!n)throw new Error("useAuth must be used within AuthProvider");return n}function g0(){const{isAuthenticated:n,isLoading:r}=Ws();return r?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"text-gray-600",children:"Loading..."})}):n?l.jsx(Al,{}):l.jsx(ha,{to:"/login",replace:!0})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y0=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,s,a)=>a?a.toUpperCase():s.toLowerCase()),Rh=n=>{const r=y0(n);return r.charAt(0).toUpperCase()+r.slice(1)},df=(...n)=>n.filter((r,s,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=E.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:u="",children:c,iconNode:h,...p},m)=>E.createElement("svg",{ref:m,...x0,width:r,height:r,stroke:n,strokeWidth:a?Number(s)*24/Number(r):s,className:df("lucide",u),...p},[...h.map(([v,x])=>E.createElement(v,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(n,r)=>{const s=E.forwardRef(({className:a,...u},c)=>E.createElement(w0,{ref:c,iconNode:r,className:df(`lucide-${v0(Rh(n))}`,`lucide-${n}`,a),...u}));return s.displayName=Rh(n),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nu=nt("arrow-left",_0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],k0=nt("chevron-down",b0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],su=nt("chevron-right",j0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hf=nt("circle-alert",S0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ph=nt("circle-check-big",N0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Hs=nt("download",E0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],T0=nt("file-text",C0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],P0=nt("lock",R0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],A0=nt("pen",O0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ya=nt("plus",I0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ks=nt("printer",L0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ja=nt("save",D0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],U0=nt("search",$0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sa=nt("trash-2",B0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oh=nt("triangle-alert",M0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ff=nt("upload",F0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tn=nt("x",z0);function q0(){const[n,r]=E.useState(!1),s=rn(),a=Lt(),{signOut:u,user:c}=Ws(),h=s.pathname.startsWith("/bills"),p=s.pathname.startsWith("/event-forms")||s.pathname.startsWith("/forms");return l.jsx("nav",{className:"bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50",children:l.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-8",children:[l.jsx("div",{className:"text-xl font-semibold text-gray-900",children:"AccuCount"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(pa,{to:"/bills",className:`px-4 py-2 rounded-md transition-colors ${h?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Bills"}),l.jsx(pa,{to:"/event-forms",className:`px-4 py-2 rounded-md transition-colors ${p?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Event Forms"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 hover:bg-gray-50 rounded-md px-3 py-2 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:"KE"}),l.jsx(k0,{className:"w-4 h-4 text-gray-600"})]}),n&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>r(!1)}),l.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-20",children:[c?.email&&l.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 border-b border-gray-100",children:c.email}),l.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:"Profile"}),l.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>{r(!1),u().then(()=>a("/login"))},children:"Logout"})]})]})]})]})})}function V0(){const[n,r]=E.useState(""),[s,a]=E.useState(""),[u,c]=E.useState(null),[h,p]=E.useState(!1),m=Lt(),{signIn:v}=Ws(),x=async _=>{_.preventDefault(),console.log("Login attempt:",{email:n,password:s}),c(null),p(!0);const y=await v(n,s);if(p(!1),!y.ok){c(y.error||"Login failed.");return}m("/bills")};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 flex items-center justify-center p-4",children:l.jsx("div",{className:"w-full max-w-md",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(P0,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"AccuCount"})]})}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Sign in"}),l.jsx("p",{className:"text-gray-600",children:"Access your billing system"})]}),l.jsxs("form",{onSubmit:x,className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Email address"}),l.jsx("input",{type:"email",id:"email",value:n,onChange:_=>r(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@company.com",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Password"}),l.jsx("input",{type:"password",id:"password",value:s,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"",required:!0})]}),l.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-2.5 rounded-md hover:bg-blue-700 transition-colors font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:h?"Signing in...":"Sign In"})]}),u&&l.jsx("div",{className:"mt-4 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:u}),l.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"Authorized users only"})]})})})}async function W0(n){const r=n.page??1,s=n.pageSize??10,a=(r-1)*s,u=a+s-1;let c=Nt.from("bills").select(`
      id,
      vendor_id,
      reference_no,
      request_date,
      priority_level,
      payment_method,
      bank_name,
      bank_account_name,
      bank_account_no,
      status,
      remarks,
      total_amount,
      created_by,
      created_at,
      updated_at,
      vendor:vendors(id,name,address)
    `,{count:"exact"}).order("request_date",{ascending:!1}).range(a,u);if(n.status&&(c=c.eq("status",n.status)),n.dateFrom&&(c=c.gte("request_date",n.dateFrom)),n.dateTo&&(c=c.lte("request_date",n.dateTo)),n.search&&n.search.trim()){const v=n.search.trim();c=c.or(`reference_no.ilike.%${v}%,vendor.name.ilike.%${v}%`)}const{data:h,error:p,count:m}=await c;return p?{data:[],count:0,error:p.message}:{data:h??[],count:m??0,error:null}}async function pf(n){const{data:r,error:s}=await Nt.from("bills").select(`
      id,
      vendor_id,
      reference_no,
      request_date,
      priority_level,
      payment_method,
      bank_name,
      bank_account_name,
      bank_account_no,
      status,
      remarks,
      total_amount,
      created_by,
      created_at,
      updated_at,
      vendor:vendors(id,name,address),
      breakdowns:bill_breakdowns(id,bill_id,category,description,amount)
    `).eq("id",n).single();return s?{data:null,error:s.message}:{data:{bill:{id:r.id,vendor_id:r.vendor_id,reference_no:r.reference_no,request_date:r.request_date,priority_level:r.priority_level,payment_method:r.payment_method,bank_name:r.bank_name,bank_account_name:r.bank_account_name,bank_account_no:r.bank_account_no,status:r.status,remarks:r.remarks,total_amount:r.total_amount,created_by:r.created_by,created_at:r.created_at,updated_at:r.updated_at},vendor:r.vendor,breakdowns:r.breakdowns??[]},error:null}}async function H0(n){const{data:r,error:s}=await Nt.from("bills").insert(n.bill).select(`
      id,
      vendor_id,
      reference_no,
      request_date,
      priority_level,
      payment_method,
      bank_name,
      bank_account_name,
      bank_account_no,
      status,
      remarks,
      total_amount,
      created_by,
      created_at,
      updated_at
    `).single();if(s||!r)return{data:null,error:s?.message||"Failed to create bill."};const a=n.breakdowns.map(u=>({bill_id:r.id,category:u.category,description:u.description??"",amount:Number.isFinite(u.amount)?u.amount:0}));if(a.length>0){const{error:u}=await Nt.from("bill_breakdowns").insert(a);if(u)return{data:r,error:u.message}}return{data:r,error:null}}async function K0(n,r){const{data:s,error:a}=await Nt.from("bills").update(r.bill).eq("id",n).select(`
      id,
      vendor_id,
      reference_no,
      request_date,
      priority_level,
      payment_method,
      bank_name,
      bank_account_name,
      bank_account_no,
      status,
      remarks,
      total_amount,
      created_by,
      created_at,
      updated_at
    `).single();if(a||!s)return{data:null,error:a?.message||"Failed to update bill."};const{error:u}=await Nt.from("bill_breakdowns").delete().eq("bill_id",n);if(u)return{data:s,error:u.message};const c=r.breakdowns.map(h=>({bill_id:n,category:h.category,description:h.description??"",amount:Number.isFinite(h.amount)?h.amount:0}));if(c.length>0){const{error:h}=await Nt.from("bill_breakdowns").insert(c);if(h)return{data:s,error:h.message}}return{data:s,error:null}}function G0(){const[n,r]=E.useState("All"),[s,a]=E.useState(""),[u,c]=E.useState(""),[h,p]=E.useState(""),[m,v]=E.useState(1),[x]=E.useState(10),[_,y]=E.useState(0),[b,S]=E.useState([]),[P,T]=E.useState(!1),[D,U]=E.useState(null),A=Lt(),q=["All","Draft","Awaiting Approval","Approved","Paid","Void"],oe=E.useMemo(()=>{switch(n){case"Draft":return"draft";case"Awaiting Approval":return"awaiting_approval";case"Approved":return"approved";case"Paid":return"paid";case"Void":return"void";default:return}},[n]),ee=Q=>{switch(Q){case"draft":return"bg-gray-100 text-gray-700";case"awaiting_approval":return"bg-yellow-100 text-yellow-700";case"approved":return"bg-blue-100 text-blue-700";case"paid":return"bg-green-100 text-green-700";case"void":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ce=Q=>{switch(Q){case"urgent":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"standard":return"bg-blue-100 text-blue-700";case"low":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},ve=Q=>{switch(Q){case"draft":return"Draft";case"awaiting_approval":return"Awaiting Approval";case"approved":return"Approved";case"paid":return"Paid";case"void":return"Void";default:return Q}},Se=Q=>{switch(Q){case"urgent":return"Urgent";case"high":return"High";case"standard":return"Standard";case"low":return"Low";default:return Q}};E.useEffect(()=>{let Q=!0;return T(!0),U(null),W0({status:oe,search:s,dateFrom:u||void 0,dateTo:h||void 0,page:m,pageSize:x}).then(be=>{Q&&(be.error?(U(be.error),S([]),y(0)):(S(be.data),y(be.count)))}).catch(be=>{Q&&(U(be.message||"Failed to load bills."),S([]),y(0))}).finally(()=>{Q&&T(!1)}),()=>{Q=!1}},[oe,s,u,h,m,x]);const Be=Math.max(1,Math.ceil(_/x));return l.jsx("div",{className:"min-h-screen bg-gray-50",children:l.jsx("div",{className:"pt-16",children:l.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Payment Requests"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage payment requests"})]}),l.jsxs("button",{onClick:()=>A("/bills/new"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(ya,{className:"w-4 h-4"}),"New Bill"]})]}),l.jsx("div",{className:"flex items-center gap-1 border-b border-gray-200 mb-6",children:q.map(Q=>l.jsxs("button",{onClick:()=>{r(Q),v(1)},className:`px-4 py-3 font-medium transition-colors relative ${n===Q?"text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[Q,n===Q&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},Q))}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("div",{className:"relative",children:[l.jsx(U0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search by vendor or reference",value:s,onChange:Q=>{a(Q.target.value),v(1)},className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),l.jsx("div",{children:l.jsx("input",{type:"date",value:u,onChange:Q=>{c(Q.target.value),v(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"From"})}),l.jsx("div",{children:l.jsx("input",{type:"date",value:h,onChange:Q=>{p(Q.target.value),v(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"To"})}),l.jsx("div",{className:"flex items-center",children:l.jsx("button",{onClick:()=>{a(""),c(""),p(""),v(1)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Clear Filters"})})]})}),P?l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 py-16 text-center",children:l.jsx("p",{className:"text-gray-600",children:"Loading bills..."})}):D?l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 py-16 text-center",children:l.jsx("p",{className:"text-red-600",children:D})}):b.length>0?l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Reference No."}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Payee / Vendor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Purpose Summary"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Payment Method"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Priority"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Total Amount"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Requested By"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map((Q,be)=>l.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${be%2===0?"bg-white":"bg-gray-50/50"}`,children:[l.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:Q.request_date}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 font-medium",children:Q.reference_no}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:Q.vendor?.name||""}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:Q.remarks||""}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:Q.payment_method}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ce(Q.priority_level)}`,children:Se(Q.priority_level)})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-gray-900 font-semibold text-right",children:["",Number(Q.total_amount).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ee(Q.status)}`,children:ve(Q.status)})}),l.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:Q.created_by}),l.jsx("td",{className:"px-4 py-4",children:l.jsx("button",{onClick:()=>A(`/bills/${Q.id}`),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View"})})]},Q.id))})]})}),l.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",b.length," of ",_," results"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>v(Q=>Math.max(1,Q-1)),disabled:m<=1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),l.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm",children:m}),l.jsx("button",{onClick:()=>v(Q=>Math.min(Be,Q+1)),disabled:m>=Be,className:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}):l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 py-16 text-center",children:[l.jsx(T0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payment requests found"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or create a new bill"}),l.jsxs("button",{onClick:()=>A("/bills/new"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md inline-flex items-center gap-2 transition-colors",children:[l.jsx(ya,{className:"w-4 h-4"}),"Create New Bill"]})]})]})})})}async function mf(n){let r=Nt.from("vendors").select("id,name,address").order("name");n&&n.trim()&&(r=r.ilike("name",`%${n.trim()}%`));const{data:s,error:a}=await r.limit(50);return a?{data:[],error:a.message}:{data:s??[],error:null}}async function gf(n,r){const s=n.trim();if(!s)return{data:null,error:"Vendor name is required."};const{data:a,error:u}=await Nt.from("vendors").insert({name:s,address:null}).select("id,name,address").single();return u?{data:null,error:u.message}:{data:a,error:null}}function J0(){const[n,r]=E.useState(""),[s,a]=E.useState(null),[u,c]=E.useState([]),[h,p]=E.useState(!1),[m,v]=E.useState(""),[x,_]=E.useState(""),[y,b]=E.useState("Standard"),[S,P]=E.useState("Bank Transfer"),[T,D]=E.useState(""),[U,A]=E.useState(""),[q,oe]=E.useState(""),[ee,ce]=E.useState(""),[ve,Se]=E.useState([]),[Be,Q]=E.useState(!1),[be,Ce]=E.useState(null),[te,Ne]=E.useState(!1),{user:De}=Ws(),ke=Lt(),[F,Z]=E.useState([{id:"1",category:"Savings",description:"",amount:""}]),W=E.useMemo(()=>({Urgent:"urgent",High:"high",Standard:"standard",Low:"low"}),[]),N=E.useMemo(()=>({"Bank Transfer":"bank_transfer",Check:"check",Cash:"cash",Other:"other"}),[]),I=E.useMemo(()=>({Savings:"savings","Loan Assistance":"loan_assistance","Car Amortization":"car_amortization","SMS Allowance":"sms_allowance","Gas Allowance":"gas_allowance",Other:"other"}),[]);E.useEffect(()=>{let V=!0;if(!n.trim()){c([]);return}return p(!0),mf(n).then(me=>{V&&(me.error?c([]):c(me.data))}).finally(()=>{V&&p(!1)}),()=>{V=!1}},[n]);const ue=()=>{Z([...F,{id:Date.now().toString(),category:"Savings",description:"",amount:""}])},de=V=>{F.length>1&&Z(F.filter(me=>me.id!==V))},he=(V,me,lt)=>{Z(F.map(Dt=>Dt.id===V?{...Dt,[me]:lt}:Dt))},le=()=>F.reduce((V,me)=>{const lt=parseFloat(me.amount)||0;return V+lt},0),ge=V=>{const me=Array.from(V);me.length!==0&&Se(lt=>[...lt,...me])},ye=V=>{V.target.files&&(ge(V.target.files),V.target.value="")},Ee=V=>{V.preventDefault(),Q(!0)},Xe=V=>{V.preventDefault(),Q(!1)},Et=V=>{V.preventDefault(),Q(!1),V.dataTransfer.files&&ge(V.dataTransfer.files)},nn=V=>{Se(ve.filter((me,lt)=>lt!==V))},Kt=async V=>{if(Ce(null),!De){Ce("You must be logged in to create a bill.");return}if(!n.trim()){Ce("Vendor name is required.");return}Ne(!0);let me=s?.id;if(!me){const Ge=await gf(n.trim());if(Ge.error||!Ge.data){Ne(!1),Ce(Ge.error||"Failed to create vendor.");return}me=Ge.data.id}const lt=le(),Dt={bill:{vendor_id:me,reference_no:m,request_date:x,priority_level:W[y]||"standard",payment_method:N[S]||"bank_transfer",bank_name:T||null,bank_account_name:U||null,bank_account_no:q||null,status:V,remarks:ee||null,total_amount:lt,created_by:De.id},breakdowns:F.map(Ge=>({category:I[Ge.category]||"other",description:Ge.description?Ge.description:"",amount:parseFloat(Ge.amount)||0}))},Ct=await H0(Dt);if(Ne(!1),Ct.error||!Ct.data){Ce(Ct.error||"Failed to create bill.");return}ke(`/bills/${Ct.data.id}`)},Ir=async V=>{V.preventDefault(),await Kt("awaiting_approval")},sn=async()=>{await Kt("draft")};return l.jsx("div",{className:"min-h-screen bg-gray-50",children:l.jsx("div",{className:"pt-16",children:l.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[l.jsx("button",{onClick:()=>ke("/bills"),className:"hover:text-blue-600",children:"Bills"}),l.jsx(su,{className:"w-4 h-4"}),l.jsx("span",{className:"text-gray-900",children:"New Bill"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"New Payment Request"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new payment request for approval"})]}),be&&l.jsx("div",{className:"mb-6 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:be}),l.jsxs("form",{onSubmit:Ir,children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payee & Reference"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"vendor",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Vendor / Payee ",l.jsx("span",{className:"text-red-600",children:"*"})]}),l.jsx("input",{type:"text",id:"vendor",value:n,onChange:V=>{r(V.target.value),a(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Select or type vendor name",required:!0}),h&&l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Searching vendors..."}),u.length>0&&!s&&l.jsx("div",{className:"mt-2 border border-gray-200 rounded-md bg-white shadow-sm max-h-40 overflow-auto",children:u.map(V=>l.jsx("button",{type:"button",onClick:()=>{a(V),r(V.name),c([])},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:V.name},V.id))})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"reference",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Reference Number ",l.jsx("span",{className:"text-red-600",children:"*"})]}),l.jsx("input",{type:"text",id:"reference",value:m,onChange:V=>v(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"PRF-MMDDYY-XXX",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"requestDate",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Request Date ",l.jsx("span",{className:"text-red-600",children:"*"})]}),l.jsx("input",{type:"date",id:"requestDate",value:x,onChange:V=>_(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Priority Level"}),l.jsxs("select",{id:"priority",value:y,onChange:V=>b(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"Urgent",children:"Urgent"}),l.jsx("option",{value:"High",children:"High"}),l.jsx("option",{value:"Standard",children:"Standard"}),l.jsx("option",{value:"Low",children:"Low"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),l.jsx("div",{className:"space-y-3 mb-4",children:["Bank Transfer","Check","Cash","Other"].map(V=>l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"paymentMethod",value:V,checked:S===V,onChange:me=>P(me.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-900",children:V})]},V))}),S==="Bank Transfer"&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bankName",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Bank Name"}),l.jsx("input",{type:"text",id:"bankName",value:T,onChange:V=>D(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., BDO, BPI, Metrobank"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"accountHolder",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Account Holder Name"}),l.jsx("input",{type:"text",id:"accountHolder",value:U,onChange:V=>A(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full name as registered"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"accountNumber",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Bank Account Number"}),l.jsx("input",{type:"text",id:"accountNumber",value:q,onChange:V=>oe(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Account number"})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Breakdown"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Amount (PHP)"}),l.jsx("th",{className:"px-4 py-3 w-12"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:F.map(V=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("select",{value:V.category,onChange:me=>he(V.id,"category",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[l.jsx("option",{value:"Savings",children:"Savings"}),l.jsx("option",{value:"Loan Assistance",children:"Loan Assistance"}),l.jsx("option",{value:"Car Amortization",children:"Car Amortization"}),l.jsx("option",{value:"SMS Allowance",children:"SMS Allowance"}),l.jsx("option",{value:"Gas Allowance",children:"Gas Allowance"}),l.jsx("option",{value:"Other",children:"Other"})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"text",value:V.description,onChange:me=>he(V.id,"description",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Brief description"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"number",step:"0.01",value:V.amount,onChange:me=>he(V.id,"amount",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm text-right",placeholder:"0.00"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{type:"button",onClick:()=>de(V.id),disabled:F.length===1,className:"text-red-600 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(tn,{className:"w-5 h-5"})})})]},V.id))})]})}),l.jsxs("button",{type:"button",onClick:ue,className:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-2",children:[l.jsx(ya,{className:"w-4 h-4"}),"Add Breakdown Line"]}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-end",children:l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),l.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",le().toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reason for Payment"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Reason for Payment / Remarks"}),l.jsx("textarea",{id:"reason",value:ee,onChange:V=>ce(V.target.value),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Brief explanation or supporting details..."}),l.jsx("p",{className:"text-sm text-gray-500 mt-1.5",children:"Brief explanation or supporting details"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attachments"}),l.jsxs("div",{onDragOver:Ee,onDragLeave:Xe,onDrop:Et,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${Be?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[l.jsx(ff,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),l.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[l.jsx("label",{htmlFor:"file-upload",className:"text-blue-600 hover:text-blue-700 cursor-pointer font-medium",children:"Click to upload"})," ","or drag and drop"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG (max 10MB each)"}),l.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:ye,className:"hidden"})]}),ve.length>0&&l.jsx("div",{className:"mt-4 space-y-2",children:ve.map((V,me)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[l.jsx("span",{className:"text-sm text-gray-900",children:V.name}),l.jsx("button",{type:"button",onClick:()=>nn(me),className:"text-red-600 hover:text-red-700",children:l.jsx(tn,{className:"w-4 h-4"})})]},me))}),l.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Attach scanned forms or proof"})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Request & Approval Info"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Requested By"}),l.jsx("input",{type:"text",value:De?.email||"Current User",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Checked By"}),l.jsx("input",{type:"text",value:"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-400"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Approved By"}),l.jsx("input",{type:"text",value:"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-400"})]})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Approval fields will be populated after submission"})]})]}),l.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pb-8",children:[l.jsx("button",{type:"button",onClick:()=>ke("/bills"),className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),l.jsx("button",{type:"button",onClick:sn,disabled:te,className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:"Save as Draft"}),l.jsx("button",{type:"submit",disabled:te,className:"px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:te?"Saving...":"Submit for Approval"})]})]})]})})})}function vf({isOpen:n,onClose:r,onConfirm:s,billReference:a,billVendor:u,billAmount:c}){const[h,p]=E.useState("");E.useEffect(()=>{n||p("")},[n]),E.useEffect(()=>{const v=x=>{x.key==="Escape"&&n&&r()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n,r]);const m=()=>{h.trim()&&(s(h),p(""))};return n?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(tn,{className:"w-5 h-5"})}),l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(Oh,{className:"w-6 h-6 text-red-600"})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Void Payment Request"})]})}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:l.jsx("p",{className:"text-sm text-red-800",children:"Voiding this payment request will permanently cancel it. This action cannot be undone and the request will no longer be payable."})}),l.jsxs("div",{className:"bg-gray-50 rounded-md p-4 space-y-3",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Payment Request Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Reference Number"}),l.jsx("div",{className:"text-sm font-medium text-gray-900",children:a})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Amount"}),l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["",c.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Vendor / Payee"}),l.jsx("div",{className:"text-sm font-medium text-gray-900",children:u})]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"voidReason",className:"block text-sm font-medium text-gray-900 mb-1.5",children:["Reason for Voiding ",l.jsx("span",{className:"text-red-600",children:"*"})]}),l.jsx("textarea",{id:"voidReason",value:h,onChange:v=>p(v.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none",placeholder:"Enter the reason for voiding this payment request...",autoFocus:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Please provide a reason for audit purposes."})]}),l.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-600",children:[l.jsx(Oh,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}),l.jsx("p",{children:"Voided requests are retained for audit history but cannot be edited or paid."})]})]}),l.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[l.jsx("button",{onClick:r,className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),l.jsx("button",{onClick:m,disabled:!h.trim(),className:"px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-600",children:"Confirm Void"})]})]})]}):null}function Q0({isOpen:n,onClose:r,onConfirm:s,action:a,billReference:u,billVendor:c,billAmount:h,billPriority:p}){const[m,v]=E.useState(""),x=a==="approve";E.useEffect(()=>{n||v("")},[n]),E.useEffect(()=>{const b=S=>{S.key==="Escape"&&n&&r()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n,r]);const _=()=>{!x&&!m.trim()||(s(m),v(""))},y=b=>{switch(b){case"Urgent":return"bg-red-100 text-red-700";case"High":return"bg-orange-100 text-orange-700";case"Standard":return"bg-blue-100 text-blue-700";case"Low":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}};return n?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:r}),l.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[l.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(tn,{className:"w-5 h-5"})}),l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center gap-3",children:[x?l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(Ph,{className:"w-6 h-6 text-green-600"})}):l.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(hf,{className:"w-6 h-6 text-orange-600"})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:x?"Approve Payment Request":"Reject Payment Request"})]})}),l.jsxs("div",{className:"p-6 space-y-5",children:[l.jsx("div",{className:`${x?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"} border rounded-md p-4`,children:l.jsx("p",{className:`text-sm ${x?"text-green-800":"text-orange-800"}`,children:x?"You are about to approve this payment request for processing.":"You are about to reject this payment request and return it to the requester."})}),l.jsxs("div",{className:"bg-gray-50 rounded-md p-4 space-y-3",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Payment Request Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Reference Number"}),l.jsx("div",{className:"text-sm font-medium text-gray-900",children:u})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total Amount"}),l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["",h.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Vendor / Payee"}),l.jsx("div",{className:"text-sm font-medium text-gray-900",children:c})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Priority Level"}),l.jsx("div",{children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${y(p)}`,children:p})})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-900 mb-1.5",children:[x?"Approval Notes":"Rejection Reason",!x&&l.jsx("span",{className:"text-red-600",children:" *"})]}),l.jsx("textarea",{id:"notes",value:m,onChange:b=>v(b.target.value),rows:4,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 ${x?"focus:ring-green-500":"focus:ring-orange-500"} focus:border-transparent resize-none`,placeholder:x?"Optional notes for audit reference...":"Enter the reason for rejection...",autoFocus:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:x?"Optional notes for audit reference.":"Please provide a reason for rejection."})]}),x&&l.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-600",children:[l.jsx(Ph,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("p",{children:"Once approved, this payment request will be ready for payment processing."})]})]}),l.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-end gap-3",children:[l.jsx("button",{onClick:r,className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),l.jsx("button",{onClick:_,disabled:!x&&!m.trim(),className:`px-5 py-2.5 text-white rounded-md transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed ${x?"bg-green-600 hover:bg-green-700 disabled:hover:bg-green-600":"bg-red-600 hover:bg-red-700 disabled:hover:bg-red-600"}`,children:x?"Confirm Approval":"Confirm Rejection"})]})]})]}):null}function Y0(){const{id:n}=zh(),r=Lt(),[s,a]=E.useState(null),[u,c]=E.useState(!0),[h,p]=E.useState(null),[m,v]=E.useState(!1),[x,_]=E.useState({isOpen:!1,action:"approve"});E.useEffect(()=>{let te=!0;if(!n){c(!1),p("Bill not found.");return}return c(!0),pf(n).then(Ne=>{te&&(Ne.error||!Ne.data?(p(Ne.error||"Bill not found."),a(null)):(a(Ne.data),p(null)))}).catch(Ne=>{te&&(p(Ne.message||"Failed to load bill."),a(null))}).finally(()=>{te&&c(!1)}),()=>{te=!1}},[n]);const y=s?.bill,b=s?.vendor,S=s?.breakdowns??[],P=te=>{switch(te){case"draft":return"bg-gray-100 text-gray-700";case"awaiting_approval":return"bg-yellow-100 text-yellow-700";case"approved":return"bg-blue-100 text-blue-700";case"paid":return"bg-green-100 text-green-700";case"void":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},T=te=>{switch(te){case"urgent":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"standard":return"bg-blue-100 text-blue-700";case"low":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},D=te=>{switch(te){case"draft":return"Draft";case"awaiting_approval":return"Awaiting Approval";case"approved":return"Approved";case"paid":return"Paid";case"void":return"Void";default:return te||""}},U=te=>{switch(te){case"urgent":return"Urgent";case"high":return"High";case"standard":return"Standard";case"low":return"Low";default:return te||""}},A=te=>{switch(te){case"bank_transfer":return"Bank Transfer";case"check":return"Check";case"cash":return"Cash";case"other":return"Other";default:return te||""}},q=te=>te.length<=4?te:"****"+te.slice(-4),oe=()=>{_({isOpen:!0,action:"approve"})},ee=()=>{_({isOpen:!0,action:"reject"})},ce=te=>{y&&(console.log(`${x.action}ing bill:`,y.id,"Notes:",te),_({isOpen:!1,action:"approve"}),r("/bills"))},ve=()=>{y&&(console.log("Marking as paid:",y.id),r("/bills"))},Se=()=>{v(!0)},Be=te=>{y&&(console.log("Voiding bill:",y.id,"Reason:",te),v(!1),r("/bills"))},Q=()=>{y&&r(`/bills/${y.id}/edit`)},be=()=>{window.print()},Ce=S.reduce((te,Ne)=>te+Number(Ne.amount||0),0);return u?l.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:l.jsx("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Loading bill..."})})}):h||!y||!b?l.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:l.jsx("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Bill not found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:h||"The bill you are looking for does not exist."}),l.jsx(pa,{to:"/bills",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Back to Bills"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"pt-16",children:l.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[l.jsx("button",{onClick:()=>r("/bills"),className:"hover:text-blue-600",children:"Bills"}),l.jsx(su,{className:"w-4 h-4"}),l.jsx("span",{className:"text-gray-900",children:"Payment Request Details"})]}),l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Payment Request"}),l.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${P(y.status)}`,children:D(y.status)})]}),l.jsx("p",{className:"text-lg text-gray-600",children:y.reference_no})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:be,className:"p-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",title:"Print",children:l.jsx(Ks,{className:"w-5 h-5"})}),l.jsx("button",{onClick:be,className:"p-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",title:"Download PDF",children:l.jsx(Hs,{className:"w-5 h-5"})}),y.status!=="paid"&&y.status!=="void"&&l.jsx("button",{onClick:Se,className:"px-4 py-2 border border-red-600 text-red-600 rounded-md hover:bg-red-50 transition-colors font-medium",children:"Void"}),l.jsxs("button",{onClick:Q,className:"px-4 py-2 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition-colors font-medium flex items-center gap-2",children:[l.jsx(A0,{className:"w-4 h-4"}),"Edit"]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payee & Reference"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Vendor / Payee"}),l.jsx("div",{className:"text-base text-gray-900",children:b.name})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Reference Number"}),l.jsx("div",{className:"text-base text-gray-900 font-medium",children:y.reference_no})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Request Date"}),l.jsx("div",{className:"text-base text-gray-900",children:y.request_date})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Priority Level"}),l.jsx("div",{children:l.jsx("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${T(y.priority_level)}`,children:U(y.priority_level)})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Payment Method"}),l.jsx("div",{className:"text-base text-gray-900",children:A(y.payment_method)})]}),y.payment_method==="bank_transfer"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bank Name"}),l.jsx("div",{className:"text-base text-gray-900",children:y.bank_name||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Account Holder Name"}),l.jsx("div",{className:"text-base text-gray-900",children:y.bank_account_name||""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Bank Account Number"}),l.jsx("div",{className:"text-base text-gray-900 font-mono",children:y.bank_account_no?q(y.bank_account_no):""})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Breakdown"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Amount (PHP)"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map((te,Ne)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:te.category}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:te.description||""}),l.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:["",Number(te.amount).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},te.id||Ne))})]})}),l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-end",children:l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),l.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",Ce.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reason for Payment"}),l.jsx("div",{className:"bg-gray-50 rounded-md p-4 border border-gray-200",children:l.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:y.remarks||"No remarks provided"})})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attachments"}),l.jsx("p",{className:"text-sm text-gray-500",children:"No attachments"})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Request & Approval Info"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Requested By"}),l.jsx("div",{className:"text-base text-gray-900",children:y.created_by})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Submitted Date"}),l.jsx("div",{className:"text-base text-gray-900",children:y.request_date})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Checked By"}),l.jsx("div",{className:"text-base text-gray-900",children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Approved By"}),l.jsx("div",{className:"text-base text-gray-900",children:""})]})]})]})]}),l.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pb-8",children:[l.jsx("button",{onClick:()=>r("/bills"),className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Back to List"}),y.status==="awaiting_approval"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:ee,className:"px-5 py-2.5 border border-red-600 text-red-600 rounded-md hover:bg-red-50 transition-colors font-medium",children:"Reject"}),l.jsx("button",{onClick:oe,className:"px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors font-medium",children:"Approve"})]}),y.status==="approved"&&l.jsx("button",{onClick:ve,className:"px-5 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors font-medium",children:"Mark as Paid"})]})]})}),l.jsx(vf,{isOpen:m,onClose:()=>v(!1),onConfirm:Be,billReference:y.reference_no,billVendor:b.name,billAmount:Ce}),l.jsx(Q0,{isOpen:x.isOpen,onClose:()=>_({isOpen:!1,action:"approve"}),onConfirm:ce,action:x.action,billReference:y.reference_no,billVendor:b.name,billAmount:Ce,billPriority:U(y.priority_level)})]})}function X0(){const{id:n}=zh(),r=Lt(),[s,a]=E.useState(!1),[u,c]=E.useState(!0),[h,p]=E.useState(!1),[m,v]=E.useState(null),[x,_]=E.useState(null),[y,b]=E.useState(""),[S,P]=E.useState(null),[T,D]=E.useState([]),[U,A]=E.useState(!1),[q,oe]=E.useState(""),[ee,ce]=E.useState(""),[ve,Se]=E.useState("Standard"),[Be,Q]=E.useState("Bank Transfer"),[be,Ce]=E.useState(""),[te,Ne]=E.useState(""),[De,ke]=E.useState(""),[F,Z]=E.useState(""),[W,N]=E.useState([]),[I,ue]=E.useState([]),[de,he]=E.useState(!1),[le,ge]=E.useState([]),ye=E.useMemo(()=>({Urgent:"urgent",High:"high",Standard:"standard",Low:"low"}),[]),Ee=E.useMemo(()=>({"Bank Transfer":"bank_transfer",Check:"check",Cash:"cash",Other:"other"}),[]),Xe=E.useMemo(()=>({Savings:"savings","Loan Assistance":"loan_assistance","Car Amortization":"car_amortization","SMS Allowance":"sms_allowance","Gas Allowance":"gas_allowance",Other:"other"}),[]),Et=x==="draft"||x==="awaiting_approval";E.useEffect(()=>{let z=!0;if(!n){c(!1),v("Bill not found.");return}return c(!0),pf(n).then(fe=>{if(!z)return;if(fe.error||!fe.data){v(fe.error||"Bill not found.");return}const{bill:_e,vendor:ut,breakdowns:xt}=fe.data;_(_e.status),b(ut.name),P(ut),oe(_e.reference_no),ce(_e.request_date),Se(_e.priority_level==="urgent"?"Urgent":_e.priority_level==="high"?"High":_e.priority_level==="low"?"Low":"Standard"),Q(_e.payment_method==="bank_transfer"?"Bank Transfer":_e.payment_method==="check"?"Check":_e.payment_method==="cash"?"Cash":"Other"),Ce(_e.bank_name||""),Ne(_e.bank_account_name||""),ke(_e.bank_account_no||""),Z(_e.remarks||""),N([]),ge(xt.map((Lr,Qs)=>({id:Lr.id||Qs.toString(),category:Lr.category,description:Lr.description||"",amount:String(Lr.amount??"")})))}).catch(fe=>{z&&v(fe.message||"Failed to load bill.")}).finally(()=>{z&&c(!1)}),()=>{z=!1}},[n]),E.useEffect(()=>{let z=!0;if(!y.trim()){D([]);return}return A(!0),mf(y).then(fe=>{z&&(fe.error?D([]):D(fe.data))}).finally(()=>{z&&A(!1)}),()=>{z=!1}},[y]);const nn=z=>{switch(z){case"draft":return"bg-gray-100 text-gray-700";case"awaiting_approval":return"bg-yellow-100 text-yellow-700";case"approved":return"bg-blue-100 text-blue-700";case"paid":return"bg-green-100 text-green-700";case"void":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Kt=z=>{switch(z){case"draft":return"Draft";case"awaiting_approval":return"Awaiting Approval";case"approved":return"Approved";case"paid":return"Paid";case"void":return"Void";default:return""}},Ir=()=>{ge([...le,{id:Date.now().toString(),category:"Savings",description:"",amount:""}])},sn=z=>{le.length>1&&ge(le.filter(fe=>fe.id!==z))},V=(z,fe,_e)=>{ge(le.map(ut=>ut.id===z?{...ut,[fe]:_e}:ut))},me=()=>le.reduce((z,fe)=>{const _e=parseFloat(fe.amount)||0;return z+_e},0),lt=z=>{const fe=Array.from(z);fe.length!==0&&ue(_e=>[..._e,...fe])},Dt=z=>{z.target.files&&(lt(z.target.files),z.target.value="")},Ct=z=>{z.preventDefault(),he(!0)},Ge=z=>{z.preventDefault(),he(!1)},Vn=z=>{z.preventDefault(),he(!1),z.dataTransfer.files&&lt(z.dataTransfer.files)},Gs=z=>{N(W.filter((fe,_e)=>_e!==z))},Js=z=>{ue(I.filter((fe,_e)=>_e!==z))},Wn=async()=>{if(!n)return;if(!Et){v("This bill can no longer be edited.");return}v(null),p(!0);let z=S?.id;if(!z){const xt=await gf(y.trim());if(xt.error||!xt.data){p(!1),v(xt.error||"Failed to create vendor.");return}z=xt.data.id}const fe=me(),_e={bill:{vendor_id:z,reference_no:q,request_date:ee,priority_level:ye[ve]||"standard",payment_method:Ee[Be]||"bank_transfer",bank_name:be||null,bank_account_name:te||null,bank_account_no:De||null,remarks:F||null,total_amount:fe},breakdowns:le.map(xt=>({category:Xe[xt.category]||"other",description:xt.description?xt.description:"",amount:parseFloat(xt.amount)||0}))},ut=await K0(n,_e);if(p(!1),ut.error){v(ut.error||"Failed to update bill.");return}r(`/bills/${n}`)},Hn=()=>{confirm("Are you sure you want to cancel? All unsaved changes will be lost.")&&r("/bills")},Kn=()=>{n&&(console.log("Voiding bill...",{vendorInput:y,requestDate:ee,priority:ve,paymentMethod:Be,bankName:be,accountHolder:te,accountNumber:De,breakdowns:le,reasonForPayment:F,attachments:W,newFiles:I}),a(!1),r("/bills"))};return u?l.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:l.jsx("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-gray-600",children:"Loading bill..."})})}):m&&!x?l.jsx("div",{className:"min-h-screen bg-gray-50 pt-16",children:l.jsx("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Bill not found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:m}),l.jsx(pa,{to:"/bills",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Back to Bills"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"pt-16",children:l.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 mb-4 flex items-center gap-3",children:[l.jsx(hf,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Editing Payment Request"})]}),!Et&&l.jsxs("div",{className:"mb-4 rounded-md border border-yellow-200 bg-yellow-50 px-4 py-3 text-sm text-yellow-800",children:["This bill is ",Kt(x)," and can no longer be edited."]}),m&&l.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:m}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[l.jsx("button",{onClick:()=>r("/bills"),className:"hover:text-blue-600",children:"Bills"}),l.jsx(su,{className:"w-4 h-4"}),l.jsx("span",{className:"text-gray-900",children:"Payment Request Details"})]}),l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Payment Request"}),l.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${nn(x||"")}`,children:Kt(x)})]}),l.jsx("p",{className:"text-lg text-gray-600",children:q})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:Hn,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors font-medium",children:"Cancel Edit"}),l.jsx("button",{onClick:Wn,disabled:!Et||h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:h?"Saving...":"Save Changes"})]})]}),l.jsxs("form",{onSubmit:z=>{z.preventDefault(),Wn()},children:[l.jsxs("fieldset",{disabled:!Et||h,className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payee & Reference"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"vendor",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Vendor / Payee ",l.jsx("span",{className:"text-red-600",children:"*"})]}),l.jsx("input",{type:"text",id:"vendor",value:y,onChange:z=>{b(z.target.value),P(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Select or type vendor name",required:!0}),U&&l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Searching vendors..."}),T.length>0&&!S&&l.jsx("div",{className:"mt-2 border border-gray-200 rounded-md bg-white shadow-sm max-h-40 overflow-auto",children:T.map(z=>l.jsx("button",{type:"button",onClick:()=>{P(z),b(z.name),D([])},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:z.name},z.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1.5",children:"Reference Number"}),l.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-600",children:q}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reference number cannot be edited"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"requestDate",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Request Date ",l.jsx("span",{className:"text-red-600",children:"*"})]}),l.jsx("input",{type:"date",id:"requestDate",value:ee,onChange:z=>ce(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Priority Level"}),l.jsxs("select",{id:"priority",value:ve,onChange:z=>Se(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"Urgent",children:"Urgent"}),l.jsx("option",{value:"High",children:"High"}),l.jsx("option",{value:"Standard",children:"Standard"}),l.jsx("option",{value:"Low",children:"Low"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),l.jsx("div",{className:"space-y-3 mb-4",children:["Bank Transfer","Check","Cash","Other"].map(z=>l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"paymentMethod",value:z,checked:Be===z,onChange:fe=>Q(fe.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-900",children:z})]},z))}),Be==="Bank Transfer"&&l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bankName",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Bank Name"}),l.jsx("input",{type:"text",id:"bankName",value:be,onChange:z=>Ce(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., BDO, BPI, Metrobank"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"accountHolder",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Account Holder Name"}),l.jsx("input",{type:"text",id:"accountHolder",value:te,onChange:z=>Ne(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full name as registered"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"accountNumber",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Bank Account Number"}),l.jsx("input",{type:"text",id:"accountNumber",value:De,onChange:z=>ke(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Account number"})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Breakdown"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Category"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Amount (PHP)"}),l.jsx("th",{className:"px-4 py-3 w-12"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:le.map(z=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("select",{value:z.category,onChange:fe=>V(z.id,"category",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[l.jsx("option",{value:"Savings",children:"Savings"}),l.jsx("option",{value:"Loan Assistance",children:"Loan Assistance"}),l.jsx("option",{value:"Car Amortization",children:"Car Amortization"}),l.jsx("option",{value:"SMS Allowance",children:"SMS Allowance"}),l.jsx("option",{value:"Gas Allowance",children:"Gas Allowance"}),l.jsx("option",{value:"Other",children:"Other"})]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"text",value:z.description,onChange:fe=>V(z.id,"description",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Brief description"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"number",step:"0.01",value:z.amount,onChange:fe=>V(z.id,"amount",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm text-right",placeholder:"0.00"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{type:"button",onClick:()=>sn(z.id),disabled:le.length===1,className:"text-red-600 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(tn,{className:"w-5 h-5"})})})]},z.id))})]})}),l.jsxs("button",{type:"button",onClick:Ir,className:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-2",children:[l.jsx(ya,{className:"w-4 h-4"}),"Add Breakdown Line"]}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-end",children:l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),l.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["",me().toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reason for Payment"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Reason for Payment / Remarks"}),l.jsx("textarea",{id:"reason",value:F,onChange:z=>Z(z.target.value),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Brief explanation or supporting details..."}),l.jsx("p",{className:"text-sm text-gray-500 mt-1.5",children:"Brief explanation or supporting details"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Attachments"}),W.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Existing Attachments"}),l.jsx("div",{className:"space-y-2",children:W.map((z,fe)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border border-gray-200",children:[l.jsx("span",{className:"text-sm text-gray-900",children:z}),l.jsx("button",{type:"button",onClick:()=>Gs(fe),className:"text-red-600 hover:text-red-700",children:l.jsx(tn,{className:"w-4 h-4"})})]},fe))})]}),l.jsxs("div",{onDragOver:Ct,onDragLeave:Ge,onDrop:Vn,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${de?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[l.jsx(ff,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),l.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[l.jsx("label",{htmlFor:"file-upload",className:"text-blue-600 hover:text-blue-700 cursor-pointer font-medium",children:"Click to upload"})," ","or drag and drop"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG (max 10MB each)"}),l.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:Dt,className:"hidden"})]}),I.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"New Attachments"}),l.jsx("div",{className:"space-y-2",children:I.map((z,fe)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-md border border-blue-200",children:[l.jsx("span",{className:"text-sm text-gray-900",children:z.name}),l.jsx("button",{type:"button",onClick:()=>Js(fe),className:"text-red-600 hover:text-red-700",children:l.jsx(tn,{className:"w-4 h-4"})})]},fe))})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Attach scanned forms or proof"})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Request & Approval Info"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Requested By"}),l.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-600",children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Submitted Date"}),l.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-600",children:ee})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Checked By"}),l.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-600",children:""})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-1",children:"Approved By"}),l.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-600",children:""})]})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Approval information is read-only and cannot be modified"})]})]}),l.jsxs("div",{className:"mt-8 flex items-center justify-end gap-3 pb-8",children:[l.jsx("button",{type:"button",onClick:Hn,className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:!Et||h,className:"px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:h?"Saving...":"Save Changes"})]})]})]})}),l.jsx(vf,{isOpen:s,onClose:()=>a(!1),onConfirm:Kn,billReference:q,billVendor:y,billAmount:me()})]})}const Cl="event-request-form",Tl={name:"",organizationDepartment:"",phoneNo:"",emailAddress:"",eventTitle:"",eventDescription:"",eventType:"",eventDate:"",timeFrom:"",timeTo:"",recurring:"",recurrenceDetails:"",preferredVenueRoom:"",expectedAttendance:"",roomSetupClassroomStyle:!1,avProjector:!1,avMicrophone:!1,avSpeakers:!1,avLaptopComputer:!1,avZoomStreamingSupport:!1,avOthers:"",cateringNeeded:"",cateringSpecify:"",securityNeeded:"",requestedBy:"",dateOfRequest:"",signature:"",organizer:"",prayerTechnical:"",host:"",speaker:"",testimony1:"",testimony2:""};function yf({showBackButton:n=!0,embedded:r=!1,showToolbar:s=!0,onRegisterActions:a}){const u=Lt(),[c,h]=E.useState(Tl),p=(y,b)=>{h(S=>({...S,[y]:b}))},m=()=>{localStorage.setItem(Cl,JSON.stringify(c))},v=()=>{const y=localStorage.getItem(Cl);if(y)try{const b=JSON.parse(y);h({...Tl,...b})}catch{}},x=()=>{h(Tl),localStorage.removeItem(Cl)},_=()=>{window.print()};return E.useEffect(()=>{a?.({save:m,load:v,clear:x,print:_})},[a,c]),l.jsx("div",{className:r?"event-request-page":"event-request-page min-h-screen bg-gray-50",children:l.jsx("div",{className:r?"":"pt-16",children:l.jsxs("div",{className:r?"":"max-w-[1440px] mx-auto px-6 py-8",children:[s&&l.jsxs("div",{className:"form-toolbar",children:[n?l.jsx("div",{className:"form-toolbar__left",children:l.jsxs("button",{onClick:()=>u("/event-forms"),className:"toolbar-btn toolbar-btn--back",children:[l.jsx(nu,{className:"form-btn__icon"}),"Back to Forms"]})}):l.jsx("div",{}),l.jsxs("div",{className:"form-toolbar__right",children:[l.jsxs("button",{onClick:m,className:"toolbar-btn",children:[l.jsx(ja,{className:"form-btn__icon"}),"Save"]}),l.jsxs("button",{onClick:v,className:"toolbar-btn",children:[l.jsx(Hs,{className:"form-btn__icon"}),"Load"]}),l.jsxs("button",{onClick:x,className:"toolbar-btn",children:[l.jsx(Sa,{className:"form-btn__icon"}),"Clear"]}),l.jsxs("button",{onClick:_,className:"toolbar-btn",children:[l.jsx(Ks,{className:"form-btn__icon"}),"Print"]})]})]}),l.jsxs("div",{className:"event-request-paper event-request-print-area mx-auto",children:[l.jsxs("header",{className:"event-request-header",children:[l.jsx("h1",{children:"EVENT REQUEST FORM"}),l.jsx("p",{children:"IMPORTANT: ALL EVENT REQUEST SHOULD BE DONE 5 DAYS PRIOR AND ARE OPEN TO ALL GRINDERS GUILD DISTRIBUTORS."})]}),l.jsxs("div",{className:"event-request-grid",children:[l.jsxs("div",{className:"event-request-col",children:[l.jsxs("section",{className:"event-request-section",children:[l.jsx("h2",{children:"1. CONTACT INFORMATION"}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Name"}),l.jsx("input",{value:c.name,onChange:y=>p("name",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Organization/Department"}),l.jsx("input",{value:c.organizationDepartment,onChange:y=>p("organizationDepartment",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Phone No."}),l.jsx("input",{value:c.phoneNo,onChange:y=>p("phoneNo",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Email Address"}),l.jsx("input",{value:c.emailAddress,onChange:y=>p("emailAddress",y.target.value)})]})]}),l.jsxs("section",{className:"event-request-section",children:[l.jsx("h2",{children:"2. EVENT DETAILS"}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Event Title"}),l.jsx("input",{value:c.eventTitle,onChange:y=>p("eventTitle",y.target.value)})]}),l.jsxs("label",{className:"event-request-row event-request-row--stacked",children:[l.jsx("span",{children:"Event Description"}),l.jsx("textarea",{rows:3,value:c.eventDescription,onChange:y=>p("eventDescription",y.target.value)})]}),l.jsxs("div",{className:"event-request-group",children:[l.jsx("div",{className:"event-request-group-title",children:"Event Type (Check One)"}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.eventType==="meeting",onChange:y=>p("eventType",y.target.checked?"meeting":"")}),l.jsx("span",{children:"Meeting - GBP Product Presentation"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.eventType==="workshop",onChange:y=>p("eventType",y.target.checked?"workshop":"")}),l.jsx("span",{children:"Workshop - Grinders Distributors Orientation"})]})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Date(s)"}),l.jsx("input",{placeholder:"dd/mm/yyyy",value:c.eventDate,onChange:y=>p("eventDate",y.target.value)})]}),l.jsxs("div",{className:"event-request-inline",children:[l.jsx("span",{className:"event-request-inline-label",children:"Time"}),l.jsxs("label",{children:[l.jsx("span",{children:"From"}),l.jsx("input",{value:c.timeFrom,onChange:y=>p("timeFrom",y.target.value)})]}),l.jsxs("label",{children:[l.jsx("span",{children:"To"}),l.jsx("input",{value:c.timeTo,onChange:y=>p("timeTo",y.target.value)})]})]}),l.jsxs("div",{className:"event-request-group",children:[l.jsx("div",{className:"event-request-group-title",children:"Is this a recurring event?"}),l.jsxs("div",{className:"event-request-radio-row",children:[l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"radio",name:"recurring",checked:c.recurring==="yes",onChange:()=>p("recurring","yes")}),l.jsx("span",{children:"YES"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"radio",name:"recurring",checked:c.recurring==="no",onChange:()=>p("recurring","no")}),l.jsx("span",{children:"NO"})]})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"If YES, please specify recurrence"}),l.jsx("input",{value:c.recurrenceDetails,onChange:y=>p("recurrenceDetails",y.target.value)})]})]})]}),l.jsxs("section",{className:"event-request-section",children:[l.jsx("h2",{children:"3. LOCATION & SET-UP NEEDS"}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Preferred Venue/Room"}),l.jsx("input",{value:c.preferredVenueRoom,onChange:y=>p("preferredVenueRoom",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Expected attendance"}),l.jsx("input",{value:c.expectedAttendance,onChange:y=>p("expectedAttendance",y.target.value)})]}),l.jsxs("div",{className:"event-request-group",children:[l.jsx("div",{className:"event-request-group-title",children:"Room Set-Up Required"}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.roomSetupClassroomStyle,onChange:y=>p("roomSetupClassroomStyle",y.target.checked)}),l.jsx("span",{children:"Classroom Style"})]})]}),l.jsxs("div",{className:"event-request-group",children:[l.jsx("div",{className:"event-request-group-title",children:"Audio/Visual Requirements"}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.avProjector,onChange:y=>p("avProjector",y.target.checked)}),l.jsx("span",{children:"Projector"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.avMicrophone,onChange:y=>p("avMicrophone",y.target.checked)}),l.jsx("span",{children:"Microphone"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.avSpeakers,onChange:y=>p("avSpeakers",y.target.checked)}),l.jsx("span",{children:"Speakers"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.avLaptopComputer,onChange:y=>p("avLaptopComputer",y.target.checked)}),l.jsx("span",{children:"Laptop/Computer"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"checkbox",checked:c.avZoomStreamingSupport,onChange:y=>p("avZoomStreamingSupport",y.target.checked)}),l.jsx("span",{children:"Zoom/Streaming Support"})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Others"}),l.jsx("input",{value:c.avOthers,onChange:y=>p("avOthers",y.target.value)})]})]}),l.jsxs("div",{className:"event-request-note",children:[l.jsx("div",{className:"event-request-note__title",children:"NOTE: For Speakers Attire :"}),l.jsx("div",{children:"At least polo shirt"}),l.jsx("div",{children:"If T-Shirt w/ round neck, use blazer/coat"})]})]})]}),l.jsxs("div",{className:"event-request-col",children:[l.jsxs("section",{className:"event-request-section",children:[l.jsx("h2",{children:"4. ADDITIONAL SERVICES (IF Applicable)"}),l.jsxs("div",{className:"event-request-group",children:[l.jsxs("div",{className:"event-request-inline-line",children:[l.jsx("span",{children:"Catering Needed"}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"radio",name:"catering-needed",checked:c.cateringNeeded==="yes",onChange:()=>p("cateringNeeded","yes")}),l.jsx("span",{children:"YES"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"radio",name:"catering-needed",checked:c.cateringNeeded==="no",onChange:()=>p("cateringNeeded","no")}),l.jsx("span",{children:"NO"})]})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"IF YES, specify"}),l.jsx("input",{value:c.cateringSpecify,onChange:y=>p("cateringSpecify",y.target.value)})]})]}),l.jsxs("div",{className:"event-request-inline-line",children:[l.jsx("span",{children:"Security"}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"radio",name:"security-needed",checked:c.securityNeeded==="yes",onChange:()=>p("securityNeeded","yes")}),l.jsx("span",{children:"YES"})]}),l.jsxs("label",{className:"event-request-check",children:[l.jsx("input",{type:"radio",name:"security-needed",checked:c.securityNeeded==="no",onChange:()=>p("securityNeeded","no")}),l.jsx("span",{children:"NO"})]})]})]}),l.jsxs("section",{className:"event-request-section",children:[l.jsx("h2",{children:"5. AUTHORIZATION & SUBMISSION"}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Requested By"}),l.jsx("input",{value:c.requestedBy,onChange:y=>p("requestedBy",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Date Of Request"}),l.jsx("input",{placeholder:"dd/mm/yyyy",value:c.dateOfRequest,onChange:y=>p("dateOfRequest",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Signature"}),l.jsx("input",{value:c.signature,onChange:y=>p("signature",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Organizer"}),l.jsx("input",{value:c.organizer,onChange:y=>p("organizer",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Prayer/Technical"}),l.jsx("input",{value:c.prayerTechnical,onChange:y=>p("prayerTechnical",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Host"}),l.jsx("input",{value:c.host,onChange:y=>p("host",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"Speaker"}),l.jsx("input",{value:c.speaker,onChange:y=>p("speaker",y.target.value)})]}),l.jsxs("div",{className:"event-request-group",children:[l.jsx("div",{className:"event-request-group-title",children:"Testimony:"}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"1.)"}),l.jsx("input",{value:c.testimony1,onChange:y=>p("testimony1",y.target.value)})]}),l.jsxs("label",{className:"event-request-row",children:[l.jsx("span",{children:"2.)"}),l.jsx("input",{value:c.testimony2,onChange:y=>p("testimony2",y.target.value)})]})]})]})]})]})]})]})})})}const Rl="prospect-invitation-form",Kl=30,Gl=()=>({leaderName:"",guestName:"",date1:"",date2:"",remarks:""}),Ah=()=>Array.from({length:Kl},()=>Gl()),Z0=n=>n.leaderName.trim()||n.guestName.trim()||n.date1.trim()||n.date2.trim()||n.remarks.trim();function xf({showBackButton:n=!0,embedded:r=!1,showToolbar:s=!0,onRegisterActions:a}){const u=Lt(),[c,h]=E.useState(Ah),p=(y,b,S)=>{h(P=>{const T=[...P];return T[y]={...T[y],[b]:S},y===T.length-1&&Z0(T[y])&&T.push(Gl()),T})},m=()=>{localStorage.setItem(Rl,JSON.stringify(c))},v=()=>{const y=localStorage.getItem(Rl);if(y)try{const b=JSON.parse(y);if(!Array.isArray(b))return;const S=b.map(P=>({leaderName:P.leaderName??"",guestName:P.guestName??"",date1:P.date1??"",date2:P.date2??"",remarks:P.remarks??""}));S.length<Kl&&S.push(...Array.from({length:Kl-S.length},Gl)),h(S)}catch{}},x=()=>{h(Ah()),localStorage.removeItem(Rl)},_=()=>{window.print()};return E.useEffect(()=>{a?.({save:m,load:v,clear:x,print:_})},[a,c]),l.jsx("div",{className:r?"prospect-page":"prospect-page min-h-screen bg-gray-50",children:l.jsx("div",{className:r?"":"pt-16",children:l.jsxs("div",{className:r?"":"max-w-[1440px] mx-auto px-6 py-8",children:[s&&l.jsxs("div",{className:"form-toolbar",children:[n?l.jsx("div",{className:"form-toolbar__left",children:l.jsxs("button",{onClick:()=>u("/event-forms"),className:"toolbar-btn toolbar-btn--back",children:[l.jsx(nu,{className:"form-btn__icon"}),"Back to Forms"]})}):l.jsx("div",{}),l.jsxs("div",{className:"form-toolbar__right",children:[l.jsxs("button",{onClick:m,className:"toolbar-btn",children:[l.jsx(ja,{className:"form-btn__icon"}),"Save"]}),l.jsxs("button",{onClick:v,className:"toolbar-btn",children:[l.jsx(Hs,{className:"form-btn__icon"}),"Load"]}),l.jsxs("button",{onClick:x,className:"toolbar-btn",children:[l.jsx(Sa,{className:"form-btn__icon"}),"Clear"]}),l.jsxs("button",{onClick:_,className:"toolbar-btn",children:[l.jsx(Ks,{className:"form-btn__icon"}),"Print"]})]})]}),l.jsxs("div",{className:"prospect-paper prospect-print-area mx-auto",children:[l.jsx("header",{className:"prospect-header",children:"PROSPECT INVITATION GUIDE"}),l.jsxs("table",{className:"prospect-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Leader's Name"}),l.jsx("th",{children:"Name of Guest"}),l.jsx("th",{children:"Call/P2P: Date 1"}),l.jsx("th",{children:"Call/P2P: Date 2 (Follow-Up)"}),l.jsx("th",{children:"Remarks"})]})}),l.jsx("tbody",{children:c.map((y,b)=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("input",{value:y.leaderName,onChange:S=>p(b,"leaderName",S.target.value)})}),l.jsx("td",{children:l.jsx("input",{value:y.guestName,onChange:S=>p(b,"guestName",S.target.value)})}),l.jsx("td",{children:l.jsx("input",{value:y.date1,onChange:S=>p(b,"date1",S.target.value)})}),l.jsx("td",{children:l.jsx("input",{value:y.date2,onChange:S=>p(b,"date2",S.target.value)})}),l.jsx("td",{children:l.jsx("input",{value:y.remarks,onChange:S=>p(b,"remarks",S.target.value)})})]},b))})]})]})]})})})}const wf=[{id:"event-request",step:"Event Request",assigned:"by (01)"},{id:"review",step:"Review",assigned:"(Revs, Jake)"},{id:"approval",step:"Approval",assigned:"(CEO)"},{id:"assign-event-master",step:"Assign Event Master",assigned:"Point man for Event"},{id:"confirm-itinerary",step:"Confirmation of itinerary of speakers/Hosts",assigned:"(Jake, Event Master)"},{id:"adjustments",step:"Adjustments",assigned:"(if Any)(Jake)"},{id:"draft-banner",step:"Draft Banner",assigned:"(Kyle, Jake)"},{id:"banner-approval",step:"Banner approval and posting",assigned:"(Revs). Feedback ug na post na"},{id:"fund-allocation",step:"Fund allocation request (Tickets, Hotel accommodation, Venue DP, PF, etc)",assigned:"from 01 or (Revs)"},{id:"fund-approval",step:"Fund approval",assigned:"CEO, Release finance"},{id:"inform-feedback",step:"Inform/Feedback final itinerary to speakers/ host, event master, 01, Pres",assigned:""},{id:"assigned-point-person",step:"Assigned Point Person (sundo, guide, check in, check out, until exit)",assigned:""},{id:"monitor-arrival",step:"Monitor arrival of speaker",assigned:"(Revs, event master)"},{id:"after-event-report",step:"Submit After Event Report",assigned:"(Event master, Jake/Revs)"},{id:"collect-photos",step:"Collect event photos",assigned:"(Jake)"},{id:"post-event",step:"Post event in FB Page",assigned:"(CSA)"},{id:"speaker",step:"Speaker",assigned:"",isSpeaker:!0}],Pl="special-company-events-form",_f=()=>wf.reduce((n,r)=>(n[r.id]=!1,n),{}),Ih={eventDetails:"",eventDate:"",location:"",speaker:"",checks:_f()};function bf({showBackButton:n=!0,embedded:r=!1,showToolbar:s=!0,onRegisterActions:a}){const u=Lt(),[c,h]=E.useState(Ih),p=E.useMemo(()=>wf,[]),m=(b,S)=>{h(P=>({...P,checks:{...P.checks,[b]:S}}))},v=()=>{localStorage.setItem(Pl,JSON.stringify(c))},x=()=>{const b=localStorage.getItem(Pl);if(b)try{const S=JSON.parse(b);h({eventDetails:S.eventDetails??"",eventDate:S.eventDate??"",location:S.location??"",speaker:S.speaker??"",checks:{..._f(),...S.checks??{}}})}catch{}},_=()=>{h(Ih),localStorage.removeItem(Pl)},y=()=>{window.print()};return E.useEffect(()=>{a?.({save:v,load:x,clear:_,print:y})},[a,c]),l.jsx("div",{className:r?"":"min-h-screen bg-gray-50",children:l.jsx("div",{className:r?"":"pt-16",children:l.jsxs("div",{className:r?"":"max-w-[1440px] mx-auto px-6 py-8",children:[s&&l.jsxs("div",{className:"form-toolbar",children:[n?l.jsx("div",{className:"form-toolbar__left",children:l.jsxs("button",{onClick:()=>u("/event-forms"),className:"toolbar-btn toolbar-btn--back",children:[l.jsx(nu,{className:"form-btn__icon"}),"Back to Forms"]})}):l.jsx("div",{}),l.jsxs("div",{className:"form-toolbar__right",children:[l.jsxs("button",{onClick:v,className:"toolbar-btn",children:[l.jsx(ja,{className:"form-btn__icon"}),"Save"]}),l.jsxs("button",{onClick:x,className:"toolbar-btn",children:[l.jsx(Hs,{className:"form-btn__icon"}),"Load"]}),l.jsxs("button",{onClick:_,className:"toolbar-btn",children:[l.jsx(Sa,{className:"form-btn__icon"}),"Clear"]}),l.jsxs("button",{onClick:y,className:"toolbar-btn",children:[l.jsx(Ks,{className:"form-btn__icon"}),"Print"]})]})]}),l.jsxs("div",{className:"form-paper mx-auto",children:[l.jsxs("div",{className:"form-title",children:[l.jsx("div",{className:"form-title__line form-title__primary",children:"SPECIAL COMPANY EVENTS"}),l.jsx("div",{className:"form-title__line",children:"(with speaker)"}),l.jsx("div",{className:"form-title__line form-title__secondary",children:"FLOW CHECKLIST:"})]}),l.jsxs("div",{className:"form-fields",children:[l.jsxs("label",{className:"form-field",children:[l.jsx("span",{children:"Event Details:"}),l.jsx("input",{type:"text",value:c.eventDetails,onChange:b=>h(S=>({...S,eventDetails:b.target.value}))})]}),l.jsxs("label",{className:"form-field",children:[l.jsx("span",{children:"Event Date:"}),l.jsx("input",{type:"text",placeholder:"dd/mm/yyyy",value:c.eventDate,onChange:b=>h(S=>({...S,eventDate:b.target.value}))})]}),l.jsxs("label",{className:"form-field",children:[l.jsx("span",{children:"Location/Address:"}),l.jsx("input",{type:"text",value:c.location,onChange:b=>h(S=>({...S,location:b.target.value}))})]})]}),l.jsxs("table",{className:"form-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Step"}),l.jsx("th",{children:"Assigned Personal"})]})}),l.jsx("tbody",{children:p.map(b=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsxs("div",{className:"form-step",children:[l.jsx("input",{type:"checkbox",checked:c.checks[b.id]||!1,onChange:S=>m(b.id,S.target.checked)}),l.jsx("span",{children:b.step})]})}),l.jsx("td",{children:b.isSpeaker?l.jsx("input",{type:"text",value:c.speaker,onChange:S=>h(P=>({...P,speaker:S.target.value})),className:"form-inline-input"}):l.jsx("span",{children:b.assigned})})]},b.id))})]}),l.jsxs("div",{className:"form-footer",children:[l.jsxs("div",{children:[l.jsx("div",{className:"form-footer__label",children:"Prepared by:"}),l.jsx("div",{className:"form-footer__line",children:"Name"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"form-footer__label",children:"Checked by:"}),l.jsx("div",{className:"form-footer__line",children:"Name"})]})]})]})]})})})}const kf="eventForms.activeTab",ex=[{key:"special",label:"Special Company Events"},{key:"request",label:"Event Request"},{key:"prospect",label:"Prospect Invitation"}],Lh=n=>n==="special"||n==="request"||n==="prospect",tx=n=>{if(Lh(n))return n;const r=localStorage.getItem(kf);return Lh(r)?r:"request"};function rx({activeTab:n,onChange:r}){return l.jsx("div",{className:"flex items-center gap-1",children:ex.map(s=>l.jsxs("button",{onClick:()=>r(s.key),className:`px-4 py-3 font-medium transition-colors relative ${n===s.key?"text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[s.label,n===s.key&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},s.key))})}function nx({onSave:n,onLoad:r,onClear:s,onPrint:a}){return l.jsxs("div",{className:"form-toolbar__right",children:[l.jsxs("button",{onClick:n,className:"toolbar-btn",children:[l.jsx(ja,{className:"form-btn__icon"}),"Save"]}),l.jsxs("button",{onClick:r,className:"toolbar-btn",children:[l.jsx(Hs,{className:"form-btn__icon"}),"Load"]}),l.jsxs("button",{onClick:s,className:"toolbar-btn",children:[l.jsx(Sa,{className:"form-btn__icon"}),"Clear"]}),l.jsxs("button",{onClick:a,className:"toolbar-btn",children:[l.jsx(Ks,{className:"form-btn__icon"}),"Print"]})]})}function sx(){const[n,r]=Dg(),[s,a]=E.useState(()=>tx(n.get("tab"))),u=E.useRef({}),c=p=>{a(p),localStorage.setItem(kf,p),r(m=>{const v=new URLSearchParams(m);return v.set("tab",p),v})},h=p=>{u.current[s]?.[p]?.()};return l.jsx("div",{className:"min-h-screen bg-gray-50",children:l.jsx("div",{className:"pt-16",children:l.jsxs("div",{className:"max-w-[1440px] mx-auto px-6 py-8",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Event Forms"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Choose a form to get started with your event requests."})]}),l.jsxs("div",{className:"flex items-end justify-between border-b border-gray-200 mb-6",children:[l.jsx(rx,{activeTab:s,onChange:c}),l.jsx(nx,{onSave:()=>h("save"),onLoad:()=>h("load"),onClear:()=>h("clear"),onPrint:()=>h("print")})]}),l.jsxs("div",{className:"space-y-5",children:[l.jsx("div",{className:s==="special"?"block":"hidden",children:l.jsx(bf,{embedded:!0,showBackButton:!1,showToolbar:!1,onRegisterActions:p=>{u.current.special=p}})}),l.jsx("div",{className:s==="request"?"block":"hidden",children:l.jsx(yf,{embedded:!0,showBackButton:!1,showToolbar:!1,onRegisterActions:p=>{u.current.request=p}})}),l.jsx("div",{className:s==="prospect"?"block":"hidden",children:l.jsx(xf,{embedded:!0,showBackButton:!1,showToolbar:!1,onRegisterActions:p=>{u.current.prospect=p}})})]})]})})})}function ix(){const{isAuthenticated:n,isLoading:r}=Ws(),s=()=>l.jsx(Al,{}),a=()=>l.jsxs(l.Fragment,{children:[l.jsx(q0,{}),l.jsx(Al,{})]});return l.jsxs(jg,{children:[l.jsx(ht,{path:"/",element:l.jsx(ha,{to:"/login",replace:!0})}),l.jsx(ht,{element:l.jsx(s,{}),children:l.jsx(ht,{path:"/login",element:r?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"text-gray-600",children:"Loading..."})}):n?l.jsx(ha,{to:"/bills",replace:!0}):l.jsx(V0,{})})}),l.jsx(ht,{element:l.jsx(g0,{}),children:l.jsxs(ht,{element:l.jsx(a,{}),children:[l.jsx(ht,{path:"/bills",element:l.jsx(G0,{})}),l.jsx(ht,{path:"/bills/new",element:l.jsx(J0,{})}),l.jsx(ht,{path:"/bills/:id",element:l.jsx(Y0,{})}),l.jsx(ht,{path:"/bills/:id/edit",element:l.jsx(X0,{})}),l.jsx(ht,{path:"/event-forms",element:l.jsx(sx,{})}),l.jsx(ht,{path:"/forms/event-request",element:l.jsx(yf,{})}),l.jsx(ht,{path:"/forms/prospect-invitation",element:l.jsx(xf,{})}),l.jsx(ht,{path:"/forms/special-company-events",element:l.jsx(bf,{})})]})}),l.jsx(ht,{path:"*",element:l.jsx(ha,{to:"/login",replace:!0})})]})}Cm.createRoot(document.getElementById("root")).render(l.jsx(m0,{children:l.jsx(Og,{children:l.jsx(ix,{})})}));
